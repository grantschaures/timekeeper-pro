import{menuBtn,popupMenu,blogBtn,blog_icon,about_btn,about_icon,about_menu_container,settings_btn,settings_icon,settings_menu_container,logInOut_btn,login_icon,login_menu_container,about_exit,blog_exit,blog_post_exit,blog_post_back,back_icons,exit_icons,main_elements,about_container,blog_container,settings_container,blog_post_container,blog_cells,blogs,settings_exit,pomodoroBtnContainer,backgroundsBtnContainer,start_stop_btn,reportIcon,reportPath,blogIcon,homeIcon,blogMenuContainer,aboutIconNotes,body,isMobile}from"../modules/dom-elements.js";import{blogIdList,flags,counters,state}from"../modules/navigation-objects.js";import{sessionState}from"../modules/state-objects.js";function dealWithClick(t,e,o,n,s,i,l,a,c,d,r,g,u,b,_,m){(t.includes(n.target)||e.some(t=>t.contains(n.target)))&&!o.includes(n.target)||(s.contains(n.target)?alert("This feature is currently under development. Thank you for your patience."):i.contains(n.target)?(document.body.setAttribute("data-dashboard-mode","home"),l.style.display="block",a.lastSelectedMode="home",m.style.overflowY="scroll"):c.contains(n.target)?d.click():n.target===b||n.target===_?"report"===a.lastSelectedMode?document.body.setAttribute("data-dashboard-mode","report"):"home"===a.lastSelectedMode?(document.body.setAttribute("data-dashboard-mode","home"),l.style.display="block"):"blog"===a.lastSelectedMode&&(document.body.setAttribute("data-dashboard-mode","blog"),r.style.display="flex"):(document.body.setAttribute("data-dashboard-mode","home"),l.style.display="block",a.lastSelectedMode="home",m.style.overflowY="scroll"),1!=g.blogShowing)||(u.style.display="none",hideBlog(blogs))}function showBlog(t,e,o,n,s){e.style.display="none",o.style.display="block",s.blogShowing=!0,document.getElementById(n[t]).classList.remove("hidden")}function hideBlog(t){t.forEach(function(t){document.getElementById(t.id).classList.contains("hidden")||document.getElementById(t.id).classList.add("hidden")})}function isClickNotOnAboutElements(e,t,o,n,s,i,l){[t,o,n,i,l].some(t=>t.contains(e.target))&&e.target!==s||(o.style.display="none")}function isClickNotOnMenuElements(t,e,o,n){e.contains(t.target)||(o.popupWindowShowing=!1,n.style.opacity="0",setTimeout(()=>{n.style.display="none"},50))}function isClickNotOnBlogElements(e,t,o,n,s,i,l,a,c){[t,o,n,s,i,l,a,c].some(t=>t.contains(e.target))&&e.target!==l||(n.style.display="none")}function isClickNotOnSettingsElements(e,t,o,n,s,i,l,a,c,d){([t,s,i].some(t=>t.contains(e.target))||e.target===o||e.target===n)&&e.target!==l||(s.style.display="none","home"!==c.lastSelectedMode)||"flex"===d.style.display||(a.style.overflowY="scroll")}document.addEventListener("DOMContentLoaded",function(){setTimeout(()=>{menuBtn.style.opacity="1"},1e3),menuBtn.addEventListener("click",function(){flags.popupWindowShowing?(flags.popupWindowShowing=!1,popupMenu.style.opacity="0",setTimeout(()=>{popupMenu.style.display="none"},50)):(flags.popupWindowShowing=!0,popupMenu.style.display="flex",setTimeout(()=>{popupMenu.classList.add("menuLanding"),popupMenu.style.opacity="1"},100))}),blogMenuContainer.addEventListener("click",function(t){main_elements.style.display="none",document.body.setAttribute("data-dashboard-mode","blog"),state.lastSelectedMode="blog",1==flags.blogShowing&&(blog_post_container.style.display="none",hideBlog(blogs)),blog_container.style.display="flex",body.style.overflowY="hidden",blog_exit.classList.add("resetRotation")}),about_menu_container.addEventListener("click",function(){main_elements.style.display="none",1==flags.blogShowing&&(blog_post_container.style.display="none",hideBlog(blogs)),about_container.style.display="flex",body.style.overflowY="hidden",about_exit.classList.add("resetRotation")}),settings_menu_container.addEventListener("click",function(){var t=window.innerWidth||document.documentElement.clientWidth;0===counters.settingsBtnClicked&&650<t&&(isMobile?backgroundsBtnContainer:pomodoroBtnContainer).click(),counters.settingsBtnClicked++,settings_container.style.display="block",body.style.overflowY="hidden",settings_exit.classList.add("resetRotation")}),login_menu_container.addEventListener("click",function(){!1===sessionState.loggedIn?window.location.href="/login":fetch("/api/state/logout",{method:"POST"}).then(()=>{sessionState.loggedIn=!1,window.location.href="/"}).catch(t=>{})}),exit_icons.forEach(function(t){t.addEventListener("mouseover",function(){t.classList.remove("resetRotation"),t.classList.add("triggerRotation")}),t.addEventListener("mouseout",function(){t.classList.remove("triggerRotation"),t.classList.add("resetRotation")})}),back_icons.forEach(function(t){t.addEventListener("mouseover",function(){t.classList.remove("resetBounce"),t.classList.add("triggerBounceLeft")}),t.addEventListener("mouseout",function(){t.classList.remove("TriggerBounceLeft"),t.classList.add("resetBounce")}),t.addEventListener("click",function(){1==flags.blogShowing&&(blog_post_container.style.display="none",hideBlog(blogs)),blog_container.style.display="flex",flags.blogShowing=!1})}),blog_cells.forEach(function(t){t.addEventListener("click",function(){showBlog(t.id,blog_container,blog_post_container,blogIdList,flags),blog_post_exit.classList.add("resetRotation"),blog_post_back.classList.add("resetBounce")})}),document.addEventListener("click",function(t){isClickNotOnMenuElements(t,menuBtn,flags,popupMenu),isClickNotOnAboutElements(t,about_menu_container,about_container,menuBtn,about_exit,reportIcon,reportPath),isClickNotOnBlogElements(t,blogIcon,blogMenuContainer,blog_container,blog_post_container,menuBtn,blog_exit,reportIcon,reportPath),isClickNotOnSettingsElements(t,settings_menu_container,start_stop_btn,aboutIconNotes,settings_container,menuBtn,settings_exit,body,state,about_container),dealWithClick([blogBtn,blog_icon,blogMenuContainer,about_btn,about_icon,about_menu_container,settings_btn,settings_icon,settings_menu_container,logInOut_btn,login_icon,login_menu_container],[about_container,blog_container,menuBtn,blog_post_container,settings_container],[about_exit,blog_exit,blog_post_exit,settings_exit],t,reportIcon,homeIcon,main_elements,state,blogIcon,blogMenuContainer,blog_container,flags,blog_post_container,settings_exit,about_exit,body)})});