import{menuBtn as t,popupMenu as n,blogBtn as Y,blog_icon as H,about_btn as O,about_icon as Q,about_menu_container as o,settings_btn as F,settings_icon as q,settings_menu_container as N,logInOut_btn as X,login_icon as $,login_menu_container as z,about_exit as i,blog_exit as s,blog_post_exit as a,blog_post_back as D,back_icons as U,exit_icons as G,main_elements as e,aboutContainer as l,blogContainer as c,settingsContainer as J,blog_post_container as d,blog_cells as K,blogs as u,settings_exit as V,pomodoroBtnContainer as Z,backgroundsBtnContainer as ee,start_stop_btn as ne,reportIcon as r,reportPath as te,spaceIcon as oe,homeIcon as ie,blogMenuContainer as g,aboutIconNotes as se,body as y,isMobile as ae,popupOverlay as p,questionIcon as f,popupQuestionMenu as m,privacyPolicyContainer as le,termsAndConditionsContainer as ce,loginQuestionMenuContainer as de,accountPopup as w,deleteAccountPopup as h,goBackBtn as re,deleteAccountPopupNoBtn as ue,deleteAccountPopupYesBtn as ge,deleteAccountBtn as ye,spaceContainer as b,shortcutsContainer as pe,shortcutsPopup as v,shortcutsExit as fe,reportContainer as L,flowTimeAnimationToggle as me,chillTimeAnimationToggle as we,flowAnimation as he,chillAnimation as be,target_hours_input as ve,streaksContainer as Le,threeWayToggle as ke}from"../modules/dom-elements.js";import{blogIdList as Se,flags as k,counters as Ee,state as S}from"../modules/navigation-objects.js";import{sessionState as E}from"../modules/state-objects.js";import{flags as C,selectedBackground as Ce,defaultBackgroundPath as M}from"../modules/index-objects.js";import{flags as Me}from"../modules/notes-objects.js";import{deleteUserAccount as Te}from"../state/delete-account.js";import{setBackground as _e,animationsFadeIn as xe,animationsFadeOut as Be}from"../main/index.js";function T(){We("scaleX(2)"),setTimeout(()=>{We("scaleX(1)")},125)}function We(e){let n=document.getElementById("pseudo-style");n||((n=document.createElement("style")).id="pseudo-style",document.head.appendChild(n)),n.innerHTML=`
        .dinkle-doink-mode::after {
            transform: ${e};
        }
    `}function Ie(e){var n=[Me.noteTaskInputContainerShowing,Me.createLabelWindowOpen,Me.updateLabelWindowOpen,k.settingsContainerShowing,"target-hours"===document.activeElement.id];k.allowToggleSwitch&&n.every(e=>!e)&&("ArrowLeft"===e.key?"space"===S.lastSelectedMode?(T(),_("home"),I(L),I(b),x("flex"),P()):"home"===S.lastSelectedMode&&(T(),W(L),je(e,o,l,t,i,r,te),Re(e,g,d,t,s),x("none"),A(),_("report"),B(M),k.blogShowing)&&(d.style.display="none",j(u)):"ArrowRight"===e.key&&("report"===S.lastSelectedMode?(T(),_("home"),I(L),I(b),x("flex"),P()):"home"===S.lastSelectedMode&&(T(),W(b),je(e,o,l,t,i,r,te),Re(e,g,d,t,s),x("none"),A(),_("space"),B(M),k.blogShowing)&&(d.style.display="none",j(u))),Ae(k))}function Ae(e){e.allowToggleSwitch=!1,setTimeout(()=>{e.allowToggleSwitch=!0},150)}function _(e){y.setAttribute("dinkle-doink-setting",e),S.lastSelectedMode=e}function x(e){"none"===e?(subMainContainer.style.opacity=0,subMainContainer.offsetHeight,y.style.overflowY="hidden",setTimeout(()=>{0==subMainContainer.style.opacity&&(subMainContainer.style.display=e)},150)):"flex"===e&&(subMainContainer.style.display=e,subMainContainer.offsetHeight,setTimeout(()=>{subMainContainer.style.opacity=1},0))}function B(e){var n=new Image;n.src=e,(C.sessionInProgress||"home"!==S.lastSelectedMode)&&"report"!==S.lastSelectedMode&&"space"!=S.lastSelectedMode||(n.onload=function(){document.documentElement.style.backgroundImage=`url('${e}')`},n.onerror=function(){})}function W(e){e.style.display="flex",e.offsetHeight,setTimeout(()=>{e.style.opacity=1},0)}function I(e){e.classList.add("no-transition"),e.style.opacity=0,setTimeout(()=>{0==e.style.opacity&&(e.style.display="none"),y.style.overflowY="scroll",e.classList.remove("no-transition")},150)}function Pe(e,n,t,o,i,s,a,l,c,d,r){(e.includes(i.target)||n.some(e=>e.contains(i.target)))&&!o.includes(i.target)||(s.contains(i.target)?("report"!==l.lastSelectedMode&&T(),W(L),I(b),x("none"),A(),_("report"),B(M)):a.contains(i.target)?("home"!==l.lastSelectedMode&&T(),_("home"),I(L),I(b),x("flex"),P()):c.contains(i.target)&&("space"!==l.lastSelectedMode&&T(),W(b),I(L),x("none"),A(),_("space"),B(M)),!t.includes(i.target)&&"home"!==l.lastSelectedMode||(_("home"),x("flex"),I(L),I(b)),1!=d.blogShowing)||(r.style.display="none",j(u))}function je(n,e,t,o,i,s,a){[e,t,o,f,m,v,w,p].some(e=>e.contains(n.target))&&n.target!==i||(t.style.display="none")}function Re(n,e,t,o,i){[e,c,t,o,f,m,v,w,p].some(e=>e.contains(n.target))&&n.target!==i||(c.style.display="none")}function Ye(e,n,t,o){n.contains(e.target)||R(t,o)}function He(e,n,t,o){n.contains(e.target)||qe(t,o)}function Oe(e,n,t,o){e.target===t&&(k.settingsContainerShowing=!1,n.style.display="none",o.style.overflowY="scroll")}function A(){C.sessionInProgress&&(_e("",0),C.flowTimeAnimationToggle&&C.inHyperFocus&&Be(he),C.chillTimeAnimationToggle)&&!C.inHyperFocus&&Be(be)}function P(){C.sessionInProgress&&(C.inHyperFocus?(_e(Ce.flowtime,1),C.flowTimeAnimationToggle&&xe(he,"block")):(_e(Ce.chilltime,1),C.chillTimeAnimationToggle&&xe(be,"flex")))}function Qe(e,n,t,o,i){n.style.display="none",t.style.display="block",i.blogShowing=!0,document.getElementById(o[e]).classList.remove("hidden")}function j(e){e.forEach(function(e){document.getElementById(e.id).classList.contains("hidden")||document.getElementById(e.id).classList.add("hidden")}),k.blogShowing=!1}function R(e,n){e.popupWindowShowing=!1,n.style.opacity="0",setTimeout(()=>{n.style.display="none"},50)}function Fe(e,n){e.popupWindowShowing=!0,n.style.display="flex",setTimeout(()=>{n.classList.add("menuLanding"),n.style.opacity="1"},100)}function qe(e,n){e.popupQuestionWindowShowing=!1,n.style.opacity="0",setTimeout(()=>{n.style.display="none"},50)}function Ne(e,n){e.popupQuestionWindowShowing=!0,n.style.display="flex",setTimeout(()=>{n.classList.add("questionMenuLanding"),n.style.opacity="1"},100)}function Xe(e,n){k.accountWindowShowing=!0,e.style.display="flex",n.style.display="block",y.style.overflowY="hidden"}function $e(e,n){k.accountWindowShowing=!1,n.style.display="none",e.style.display="none"}function ze(e,n){k.deleteAccountWindowShowing=!0,e.style.display="flex",n.style.display="block"}function De(e,n){k.deleteAccountWindowShowing=!1,n.style.display="none",e.style.display="none"}function Ue(e,n){k.shortcutsWindowShowing=!0,e.style.display="flex",n.style.display="block",y.style.overflowY="hidden"}function Ge(e,n){k.shortcutsWindowShowing=!1,n.style.display="none",e.style.display="none"}document.addEventListener("DOMContentLoaded",function(){var e;e=navigator.userAgent||window.opera,/iPad/.test(e)||navigator.maxTouchPoints;ae||(f.style.display="flex",Le.style.display="flex"),setTimeout(()=>{t.style.opacity="1",ae||(f.style.opacity="1",Le.style.opacity="1")},1e3),t.addEventListener("click",function(){(k.popupWindowShowing?R:Fe)(k,n)}),f.addEventListener("click",function(){(k.popupQuestionWindowShowing?qe:Ne)(k,m)}),g.addEventListener("click",function(e){subMainContainer.style.display="none",l.style.display="none",R(k,n),k.blogShowing&&(d.style.display="none",j(u)),c.style.display="flex",y.style.overflowY="hidden",s.classList.add("resetRotation"),_("home"),x("none"),P(),I(L),I(b)}),o.addEventListener("click",function(){subMainContainer.style.display="none",c.style.display="none",R(k,n),k.blogShowing&&(d.style.display="none",j(u)),l.style.display="flex",y.style.overflowY="hidden",i.classList.add("resetRotation"),_("home"),x("none"),P(),I(L),I(b)}),N.addEventListener("click",function(){c.style.display="none",l.style.display="none",R(k,n),J.style.display="block","home"===S.lastSelectedMode&&(subMainContainer.style.display="flex",subMainContainer.offsetHeight,setTimeout(()=>{subMainContainer.style.opacity=1},0));var e=window.innerWidth||document.documentElement.clientWidth;0===Ee.settingsBtnClicked&&650<e&&Z.click(),k.settingsContainerShowing=!0,Ee.settingsBtnClicked++,y.style.overflowY="hidden",V.classList.add("resetRotation")}),le.addEventListener("click",function(){var e=window.location.origin+"/privacy-policy";window.open(e,"_blank")}),ce.addEventListener("click",function(){var e=window.location.origin+"/terms-and-conditions";window.open(e,"_blank")}),window.addEventListener("resize",function(){(window.innerWidth||document.documentElement.clientWidth)<=725&&(k.popupQuestionWindowShowing=!1,m.style.opacity="0",m.style.display="none")}),z.addEventListener("click",function(){!1===E.loggedIn?window.location.href="/login":fetch("/api/state/logout",{method:"POST"}).then(()=>{E.loggedIn=!1,window.location.href="/"}).catch(e=>{})}),de.addEventListener("click",function(){!1===E.loggedIn?window.location.href="/login":Xe(p,w)}),re.addEventListener("click",function(){$e(p,w)}),pe.addEventListener("click",function(){Ue(p,v)}),p.addEventListener("click",function(e){k.accountWindowShowing&&!w.contains(e.target)?re.click():k.deleteAccountWindowShowing&&!h.contains(e.target)?ue.click():k.shortcutsWindowShowing&&!v.contains(e.target)&&Ge(p,v)}),fe.addEventListener("click",function(){Ge(p,v)}),ye.addEventListener("click",async function(){ze(p,h)}),ue.addEventListener("click",function(){De(p,h)}),ge.addEventListener("click",async function(){E.loggedIn&&await Te(),window.location.href="/"}),G.forEach(function(e){e.addEventListener("mouseover",function(){e.classList.remove("resetRotation"),e.classList.add("triggerRotation")}),e.addEventListener("mouseout",function(){e.classList.remove("triggerRotation"),e.classList.add("resetRotation")})}),U.forEach(function(e){e.addEventListener("mouseover",function(){e.classList.remove("resetBounce"),e.classList.add("triggerBounceLeft")}),e.addEventListener("mouseout",function(){e.classList.remove("TriggerBounceLeft"),e.classList.add("resetBounce")}),e.addEventListener("click",function(){1==k.blogShowing&&(d.style.display="none",j(u)),c.style.display="flex",k.blogShowing=!1})}),K.forEach(function(e){e.addEventListener("click",function(){Qe(e.id,c,d,Se,k),a.classList.add("resetRotation"),D.classList.add("resetBounce")})}),document.addEventListener("click",function(e){Ye(e,t,k,n),He(e,f,k,m),je(e,o,l,t,i,r,te),Re(e,g,d,t,s),Oe(e,J,V,y),Pe([Y,H,g,O,Q,o,F,q,N,X,$,z,se,p],[l,c,t,f,d,J,m,h,w,de,v],[i,s,a],[i,s,a,V],e,r,ie,S,oe,k,d)}),document.addEventListener("keydown",e=>Ie(e))});