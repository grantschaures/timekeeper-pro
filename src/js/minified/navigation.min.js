import{menuBtn as n,popupMenu as e,blogBtn as R,blog_icon as Y,about_btn as O,about_icon as D,about_menu_container as o,settings_btn as H,settings_icon as Q,settings_menu_container as F,logInOut_btn as U,login_icon as N,login_menu_container as q,about_exit as s,blog_exit as i,blog_post_exit as G,blog_post_back as X,back_icons as z,exit_icons as V,main_elements as t,aboutContainer as a,blogContainer as l,settingsContainer as c,blog_post_container as d,blog_cells as $,blogs as u,settings_exit as J,pomodoroBtnContainer as K,backgroundsBtnContainer as Z,start_stop_btn as tt,reportIcon as et,reportPath as nt,spaceIcon as ot,homeIcon as st,blogMenuContainer as r,aboutIconNotes as it,body as p,isMobile as y,popupOverlay as g,questionIcon as m,popupQuestionMenu as h,privacyPolicyContainer as at,termsAndConditionsContainer as lt,loginQuestionMenuContainer as ct,accountPopup as f,deleteAccountPopup as dt,goBackBtn as rt,deleteAccountPopupNoBtn as ut,deleteAccountPopupYesBtn as pt,deleteAccountBtn as yt,spaceContainer as w,shortcutsContainer as gt,shortcutsPopup as b,shortcutsExit as mt,dashboardContainer as S,flowTimeAnimationToggle as ht,chillTimeAnimationToggle as ft,flowAnimation as wt,chillAnimation as bt,target_hours_input as St,streaksContainer as L,threeWayToggle as Lt,labelToDeleteContainer as vt,confirmLabelDeletionPopup as kt,labelSelectionRow as Ct,confirmLabelDeletionNoBtn as Et,sessionSummaryOkBtn as Tt,sessionSummarySignupPromptPopup as _t,HC_icon_signup_prompt as xt,settingsGUIContainer as Mt,darkLightThemeGUIContainer as v}from"../modules/dom-elements.js";import{blogIdList as Pt,flags as k,counters as Bt,state as C}from"../modules/navigation-objects.js";import{sessionState as Wt}from"../modules/state-objects.js";import{flags as E}from"../modules/index-objects.js";import{labelArrs as It,labelDict as At,labelFlags as jt,flags as T,selectedLabelDict as Rt}from"../modules/notes-objects.js";import{chimePath as Yt,bellPath as Ot,soundMap as Dt}from"../modules/sound-map.js";import{deleteUserAccount as Ht}from"../state/delete-account.js";import{animationsFadeIn as Qt,animationsFadeOut as Ft,triggerSilentAlertAudioMobile as Ut}from"./index.js";function Nt(t){subMainContainer.style.display="none",document.getElementById(t)?(window.location.hash=t,d.scrollTo(0,0),l.style.display="none",d.style.display="block",k.blogShowing=!0,document.getElementById(t).classList.remove("hidden")):history.pushState({},"","/")}function qt(){l.style.display="none",a.style.display="none",j(k,e),c.style.display="block","home"===C.lastSelectedMode&&(subMainContainer.style.display="flex",subMainContainer.offsetHeight,setTimeout(()=>{subMainContainer.style.opacity=1},0)),history.pushState({window:"settings"},"","/settings");var t=window.innerWidth||document.documentElement.clientWidth;0===Bt.settingsBtnClicked&&650<t&&K.click(),Ut(Dt.Chime,Dt.Bell,Yt,Ot,E),k.settingsContainerShowing=!0,Bt.settingsBtnClicked++,p.style.overflowY="hidden",J.classList.add("resetRotation")}function Gt(){subMainContainer.style.display="none",l.style.display="none",j(k,e),k.blogShowing&&(d.style.display="none",A(u)),k.settingsContainerShowing&&W(),a.style.display="flex",_(L,y),_(v,y),history.pushState({window:"about"},"","/about"),p.style.overflowY="hidden",s.classList.add("resetRotation"),P("home"),subMainContainerTransition("none"),I(),B(S),B(w)}function Xt(){subMainContainer.style.display="none",a.style.display="none",j(k,e),k.blogShowing&&(d.style.display="none",A(u)),k.settingsContainerShowing&&W(),l.style.display="flex",_(L,y),_(v,y),history.pushState({window:"blog"},"","/blog"),p.style.overflowY="hidden",i.classList.add("resetRotation"),P("home"),subMainContainerTransition("none"),I(),B(S),B(w)}function _(t,e){e||(t.style.display="flex",setTimeout(()=>{t.style.opacity=1},0))}function x(t){t.style.opacity=0,setTimeout(()=>{t.style.display="none"},250)}function M(){zt("scaleX(1.25)"),setTimeout(()=>{zt("scaleX(1)")},150)}function zt(t){let e=document.getElementById("pseudo-style");e||((e=document.createElement("style")).id="pseudo-style",document.head.appendChild(e)),e.innerHTML=`
        .dinkle-doink-mode::after {
            transform: ${t};
        }
    `}function Vt(t){var e=[T.noteTaskInputContainerShowing,T.noteTaskInputContainerEditShowing,T.createLabelWindowOpen,T.updateLabelWindowOpen,k.settingsContainerShowing,k.sessionSummaryPopupShowing,k.sessionSummarySignupPromptPopupShowing,!k.canToggleSwitch,"target-hours"===document.activeElement.id];k.allowToggleSwitch&&e.every(t=>!t)&&("ArrowLeft"===t.key?"space"===C.lastSelectedMode?(M(),_(L,y),_(v,y),P("home"),B(S),B(w),subMainContainerTransition("flex"),I()):"home"===C.lastSelectedMode&&(history.pushState({},"","/"),M(),x(L),x(v),Jt(S),Zt(t,o,a,n,s,et,nt),te(t,r,d,n,i),subMainContainerTransition("none"),se(),P("report"),k.blogShowing)&&(d.style.display="none",A(u)):"ArrowRight"===t.key&&("report"===C.lastSelectedMode?(M(),_(L,y),_(v,y),P("home"),B(S),B(w),subMainContainerTransition("flex"),I()):"home"===C.lastSelectedMode&&(history.pushState({},"","/"),M(),x(L),x(v),Jt(w),Zt(t,o,a,n,s,et,nt),te(t,r,d,n,i),subMainContainerTransition("none"),se(),P("space"),k.blogShowing)&&(d.style.display="none",A(u))),$t(k))}function $t(t){t.allowToggleSwitch=!1,setTimeout(()=>{t.allowToggleSwitch=!0},250)}function P(t){p.setAttribute("dinkle-doink-setting",t),C.lastSelectedMode=t}function subMainContainerTransition(t){"none"===t?(subMainContainer.style.opacity=0,subMainContainer.offsetHeight,p.style.overflowY="hidden",setTimeout(()=>{0==subMainContainer.style.opacity&&(subMainContainer.style.display=t)},150)):"flex"===t&&(subMainContainer.style.display=t,subMainContainer.offsetHeight,setTimeout(()=>{subMainContainer.style.opacity=1},0))}function Jt(t){setTimeout(()=>{t.style.display="flex",t.offsetHeight,setTimeout(()=>{t.style.opacity=1},0)},100)}function B(t){t.classList.add("no-transition"),t.style.opacity=0,setTimeout(()=>{0==t.style.opacity&&(t.style.display="none"),p.style.overflowY="scroll",t.classList.remove("no-transition")},150)}function Kt(t,e,n,o,s,i,a,l,c,d,r){(t.includes(s.target)||e.some(t=>t.contains(s.target)))&&!o.includes(s.target)||(i.contains(s.target)?("report"!==l.lastSelectedMode&&M(),history.pushState({},"","/"),x(L),x(v),Jt(S),B(w),subMainContainerTransition("none"),se(),P("report")):a.contains(s.target)?("home"!==l.lastSelectedMode&&M(),_(L,y),_(v,y),P("home"),B(S),B(w),subMainContainerTransition("flex"),I()):c.contains(s.target)&&("space"!==l.lastSelectedMode&&M(),history.pushState({},"","/"),x(L),x(v),Jt(w),B(S),subMainContainerTransition("none"),se(),P("space")),setTimeout(()=>{!n.includes(s.target)&&"home"!==l.lastSelectedMode||d.sessionSummaryPopupShowing||d.sessionSummarySignupPromptPopupShowing||Mt.contains(s.target)||d.settingsContainerShowing||v.contains(s.target)||(P("home"),subMainContainerTransition("flex"),B(S),B(w),history.pushState({},"","/"))},0),!d.blogShowing)||v.contains(s.target)||(r.style.display="none",A(u))}function Zt(e,t,n,o,s,i,a){[t,n,o,m,h,b,f,g,v,c].some(t=>t.contains(e.target))&&e.target!==s||(n.style.display="none")}function te(e,t,n,o,s){[t,l,n,o,m,h,b,f,g,v,c].some(t=>t.contains(e.target))&&e.target!==s||(l.style.display="none")}function ee(t,e,n,o){e.contains(t.target)||j(n,o)}function ne(t,e,n,o){e.contains(t.target)||le(n,o)}function oe(t,e,n,o){t.target===n&&W()}function W(){k.settingsContainerShowing=!1,c.style.display="none",p.style.overflowY="scroll",history.pushState({},"","/")}function se(){Ft(wt),Ft(bt)}function I(){E.inHyperFocus?E.flowTimeAnimationToggle&&Qt(wt,"block"):!E.chillTimeAnimationToggle&&E.sessionInProgress||Qt(bt,"flex")}function ie(t,e,n,o,s){window.location.hash=o[t],n.scrollTo(0,0),e.style.display="none",n.style.display="block",s.blogShowing=!0,document.getElementById(o[t]).classList.remove("hidden")}function A(t){t.forEach(function(t){document.getElementById(t.id).classList.contains("hidden")||document.getElementById(t.id).classList.add("hidden")}),pauseVideo(),k.blogShowing=!1}function j(t,e){t.popupWindowShowing=!1,e.style.opacity="0",setTimeout(()=>{e.style.display="none"},50)}function ae(t,e){t.popupWindowShowing=!0,e.style.display="flex",setTimeout(()=>{e.classList.add("menuLanding"),e.style.opacity="1"},100)}function le(t,e){t.popupQuestionWindowShowing=!1,e.style.opacity="0",setTimeout(()=>{e.style.display="none"},50)}function ce(t,e){t.popupQuestionWindowShowing=!0,e.style.display="flex",setTimeout(()=>{e.classList.add("questionMenuLanding"),e.style.opacity="1"},100)}function de(t,e){k.accountWindowShowing=!0,t.style.display="flex",e.style.display="block",p.style.overflowY="hidden"}function re(t,e){k.accountWindowShowing=!1,e.style.display="none",t.style.display="none",p.style.overflowY="scroll"}function ue(t,e){k.deleteAccountWindowShowing=!0,t.style.display="flex",e.style.display="block"}function pe(t,e){k.deleteAccountWindowShowing=!1,e.style.display="none",t.style.display="none"}function ye(t,e){k.shortcutsWindowShowing=!0,t.style.display="flex",e.style.display="block",p.style.overflowY="hidden"}function ge(t,e){k.shortcutsWindowShowing=!1,e.style.display="none",t.style.display="none",p.style.overflowY="scroll"}function me(){k.sessionSummarySignupPromptPopupShowing=!1,_t.style.display="none",xt.classList.remove("hyperChillSlowRotate"),_t.style.opacity=0}window.addEventListener("popstate",t=>{var e=window.location.hash.substring(1);t.state&&t.state.window?"blog"===(t=t.state.window)?Xt():"about"===t?Gt():"settings"===t&&qt():""===e&&(P("home"),subMainContainerTransition("flex"),B(S),B(w),a.style.display="none",l.style.display="none",W())}),document.addEventListener("DOMContentLoaded",()=>{var t=window.location.pathname.split("/").pop(),e=window.location.hash.substring(1);"blog"===t&&""===e?Xt():"about"===t?Gt():"settings"===t&&history.pushState({},"","/"),e&&Nt(e)}),document.addEventListener("stateUpdated",function(){var t;t=navigator.userAgent||window.opera,/iPad/.test(t)||navigator.maxTouchPoints;y||(m.style.display="flex",L.style.display="flex",Mt.style.display="flex",v.style.display="flex"),setTimeout(()=>{n.style.opacity="1",k.canToggleSwitch=!0,y||(m.style.opacity="1",L.style.opacity="1",Mt.style.opacity="1",v.style.opacity="1",setTimeout(()=>{L.style.transition="opacity 0.25s ease-in-out, background-color 0.25s ease",v.style.transition="opacity 0.25s ease-in-out, background-color 0.25s ease"},1e3))},1e3),n.addEventListener("click",function(){(k.popupWindowShowing?j:ae)(k,e)}),m.addEventListener("click",function(){(k.popupQuestionWindowShowing?le:ce)(k,h)}),r.addEventListener("click",function(){Xt()}),o.addEventListener("click",function(){Gt()}),F.addEventListener("click",function(){qt()}),Mt.addEventListener("click",function(){(k.settingsContainerShowing?W:qt)()}),at.addEventListener("click",function(){var t=window.location.origin+"/privacy-policy";window.open(t,"_blank")}),lt.addEventListener("click",function(){var t=window.location.origin+"/terms-and-conditions";window.open(t,"_blank")}),window.addEventListener("resize",function(){(window.innerWidth||document.documentElement.clientWidth)<=725&&(k.popupQuestionWindowShowing=!1,h.style.opacity="0",h.style.display="none")}),q.addEventListener("click",function(){!1===Wt.loggedIn?window.location.href="/login":fetch("/api/state/logout",{method:"POST"}).then(()=>{Wt.loggedIn=!1,window.location.href="/"}).catch(t=>{})}),ct.addEventListener("click",function(){!1===Wt.loggedIn?window.location.href="/login":de(g,f)}),rt.addEventListener("click",function(){re(g,f)}),gt.addEventListener("click",function(){ye(g,b)}),g.addEventListener("click",function(t){k.accountWindowShowing&&!f.contains(t.target)?rt.click():k.deleteAccountWindowShowing&&!dt.contains(t.target)?ut.click():k.shortcutsWindowShowing&&!b.contains(t.target)?ge(g,b):T.confirmLabelDeletionWindowShowing&&!kt.contains(t.target)?Et.click():k.sessionSummarySignupPromptPopupShowing&&!_t.contains(t.target)&&t.target!==Tt&&(me(),g.style.display="none",subMainContainerTransition("flex"))}),mt.addEventListener("click",function(){ge(g,b)}),yt.addEventListener("click",async function(){ue(g,dt)}),ut.addEventListener("click",function(){pe(g,dt)}),pt.addEventListener("click",async function(){Wt.loggedIn&&await Ht(),window.location.href="/"}),V.forEach(function(t){t.addEventListener("mouseover",function(){t.classList.remove("resetRotation"),t.classList.add("triggerRotation")}),t.addEventListener("mouseout",function(){t.classList.remove("triggerRotation"),t.classList.add("resetRotation")})}),z.forEach(function(t){t.addEventListener("mouseover",function(){t.classList.remove("resetBounce"),t.classList.add("triggerBounceLeft")}),t.addEventListener("mouseout",function(){t.classList.remove("TriggerBounceLeft"),t.classList.add("resetBounce")}),t.addEventListener("click",function(){k.blogShowing&&(d.style.display="none",A(u),history.replaceState(null,null,window.location.pathname)),l.style.display="flex",k.blogShowing=!1})}),$.forEach(function(t){t.addEventListener("click",function(){ie(t.id,l,d,Pt,k),G.classList.add("resetRotation"),X.classList.add("resetBounce")})}),document.addEventListener("click",function(t){ee(t,n,k,e),ne(t,m,k,h),Zt(t,o,a,n,s,et,nt),te(t,r,d,n,i),oe(t,c,J,p),Kt([R,Y,r,O,D,o,H,Q,F,U,N,q,it,g,tt],[a,l,n,m,d,c,h,dt,f,ct,b,kt,Ct],[s,i,G],[s,i,G,J],t,et,st,C,ot,k,d)}),document.addEventListener("keydown",t=>Vt(t))});export{subMainContainerTransition};