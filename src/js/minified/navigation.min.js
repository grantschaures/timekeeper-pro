import{menuBtn as n,popupMenu as e,blogBtn as W,blog_icon as A,about_btn as j,about_icon as D,about_menu_container as o,settings_btn as O,settings_icon as R,settings_menu_container as Y,logInOut_btn as H,login_icon as Q,login_menu_container as F,about_exit as s,blog_exit as i,blog_post_exit as U,blog_post_back as G,back_icons as N,exit_icons as V,main_elements as t,aboutContainer as a,blogContainer as l,settingsContainer as c,blog_post_container as d,blog_cells as q,blogs as u,settings_exit as X,pomodoroBtnContainer as z,backgroundsBtnContainer as $,start_stop_btn as J,reportIcon as K,reportPath as Z,spaceIcon as tt,homeIcon as et,blogMenuContainer as r,aboutIconNotes as nt,body as p,isMobile as y,popupOverlay as g,questionIcon as m,popupQuestionMenu as h,privacyPolicyContainer as ot,termsAndConditionsContainer as st,loginQuestionMenuContainer as it,accountPopup as f,deleteAccountPopup as at,goBackBtn as lt,deleteAccountPopupNoBtn as ct,deleteAccountPopupYesBtn as dt,deleteAccountBtn as rt,spaceContainer as w,shortcutsContainer as ut,shortcutsPopup as b,shortcutsExit as pt,dashboardContainer as S,flowTimeAnimationToggle as yt,chillTimeAnimationToggle as gt,flowAnimation as mt,chillAnimation as ht,target_hours_input as ft,streaksContainer as v,threeWayToggle as wt,labelToDeleteContainer as bt,confirmLabelDeletionPopup as St,labelSelectionRow as vt,confirmLabelDeletionNoBtn as Lt,sessionSummaryOkBtn as Ct,sessionSummarySignupPromptPopup as kt,HC_icon_signup_prompt as Et,settingsGUIContainer as Tt,darkLightThemeGUIContainer as L,displayGUIContainer as C}from"../modules/dom-elements.js";import{blogIdList as Mt,flags as k,counters as xt,state as E}from"../modules/navigation-objects.js";import{sessionState as It}from"../modules/state-objects.js";import{dashboardCatIds as _t,flags as T,settingsMappings as Pt,tempCounters as Bt,tempStorage as Wt}from"../modules/index-objects.js";import{labelArrs as At,labelDict as jt,labelFlags as Dt,flags as M,selectedLabelDict as Ot}from"../modules/notes-objects.js";import{chimePath as Rt,bellPath as Yt,soundMap as Ht}from"../modules/sound-map.js";import{flags as Qt}from"../modules/dashboard-objects.js";import{confirmSessionDeletionPopup as Ft}from"../modules/dashboard-elements.js";import{deleteUserAccount as Ut}from"../state/delete-account.js";import{animationsFadeIn as Gt,animationsFadeOut as Nt,handleViewportWidthChange as Vt,triggerSilentAlertAudioMobile as qt}from"./index.js";import{hideConfirmSessionDeletionPopup as Xt}from"../utility/session-view.js";function zt(t){subMainContainer.style.display="none",document.getElementById(t)?(window.location.hash=t,d.scrollTo(0,0),closeBlogContainer(),d.style.display="block",k.blogShowing=!0,document.getElementById(t).classList.remove("hidden")):history.pushState({},"","/")}function $t(){closeBlogContainer(),closeAboutContainer(),ge(k,e),c.style.display="block",setTimeout(()=>{c.style.opacity="1"},0),"home"===E.lastSelectedMode&&(subMainContainer.style.display="flex",subMainContainer.offsetHeight,setTimeout(()=>{subMainContainer.style.opacity=1},0)),history.pushState({window:"settings"},"","/settings");var t=window.innerWidth||document.documentElement.clientWidth;0===xt.settingsBtnClicked&&650<t&&z.click(),qt(Ht.Chime,Ht.Bell,Rt,Yt,T),k.settingsContainerShowing=!0,xt.settingsBtnClicked++,p.style.overflowY="hidden",X.classList.add("resetRotation")}function Jt(){subMainContainer.style.display="none",closeBlogContainer(),ge(k,e),k.blogShowing&&(d.style.display="none",hideBlog(u)),k.settingsContainerShowing&&re(),k.aboutContainerShowing=!0,a.style.display="flex",setTimeout(()=>{a.style.opacity="1"},0),x(v,y),x(L,y),x(C,y),history.pushState({window:"about"},"","/about"),p.style.overflowY="hidden",s.classList.add("resetRotation"),P("home"),subMainContainerTransition("none"),pe(),B(S),B(w)}function Kt(){k.blogContainerShowing=!0,subMainContainer.style.display="none",closeAboutContainer(),ge(k,e),k.blogShowing&&(d.style.display="none",hideBlog(u)),k.settingsContainerShowing&&re(),l.style.display="flex",setTimeout(()=>{l.style.opacity="1"},0),x(v,y),x(L,y),x(C,y),history.pushState({window:"blog"},"","/blog"),p.style.overflowY="hidden",i.classList.add("resetRotation"),P("home"),subMainContainerTransition("none"),pe(),B(S),B(w)}function x(t,e){e||(t.style.display="flex",setTimeout(()=>{t.style.opacity=1},0))}function I(t){t.style.opacity=0,setTimeout(()=>{t.style.display="none"},250)}function _(){Zt("scaleX(1.25)"),setTimeout(()=>{Zt("scaleX(1)")},150)}function Zt(t){let e=document.getElementById("pseudo-style");e||((e=document.createElement("style")).id="pseudo-style",document.head.appendChild(e)),e.innerHTML=`
        .dinkle-doink-mode::after {
            transform: ${t};
        }
    `}function te(t){var e=[M.noteTaskInputContainerShowing,M.noteTaskInputContainerEditShowing,M.createLabelWindowOpen,M.updateLabelWindowOpen,k.settingsContainerShowing,k.sessionSummaryPopupShowing,k.sessionSummarySignupPromptPopupShowing,!k.canToggleSwitch,"target-hours"===document.activeElement.id];k.allowToggleSwitch&&e.every(t=>!t)&&("ArrowLeft"===t.key?"space"===E.lastSelectedMode?(_(),hideDashboardCat(),x(v,y),x(L,y),x(C,y),P("home"),B(S),B(w),subMainContainerTransition("flex"),pe()):"home"===E.lastSelectedMode&&(history.pushState({},"","/"),_(),se(),I(v),I(L),I(C),ne(S),ie(t,o,a,n,s,K,Z),ae(t,r,d,n,i),subMainContainerTransition("none"),ue(),P("report"),k.blogShowing)&&(d.style.display="none",hideBlog(u)):"ArrowRight"===t.key&&("report"===E.lastSelectedMode?(_(),hideDashboardCat(),x(v,y),x(L,y),x(C,y),P("home"),B(S),B(w),subMainContainerTransition("flex"),pe()):"home"===E.lastSelectedMode&&(history.pushState({},"","/"),_(),hideDashboardCat(),I(v),I(L),I(C),ne(w),ie(t,o,a,n,s,K,Z),ae(t,r,d,n,i),subMainContainerTransition("none"),ue(),P("space"),k.blogShowing)&&(d.style.display="none",hideBlog(u))),ee(k))}function ee(t){t.allowToggleSwitch=!1,setTimeout(()=>{t.allowToggleSwitch=!0},250)}function P(t){p.setAttribute("dinkle-doink-setting",t),E.lastSelectedMode=t}function subMainContainerTransition(t){"none"===t?(subMainContainer.style.opacity=0,subMainContainer.offsetHeight,p.style.overflowY="hidden",setTimeout(()=>{0==subMainContainer.style.opacity&&(subMainContainer.style.display=t)},150),T.pipWindowOpen&&(document.getElementById("pip-cat-shadow").style.opacity="0")):"flex"===t&&(subMainContainer.style.display=t,subMainContainer.offsetHeight,history.pushState({},"","/"),setTimeout(()=>{subMainContainer.style.opacity=1},0),T.pipWindowOpen)&&(document.getElementById("pip-cat-shadow").style.opacity="1")}function ne(t){setTimeout(()=>{t.style.display="flex",t.offsetHeight,setTimeout(()=>{t.style.opacity=1},0)},100)}function B(t){t.classList.add("no-transition"),t.style.opacity=0,setTimeout(()=>{0==t.style.opacity&&(t.style.display="none"),p.style.overflowY="scroll",t.classList.remove("no-transition")},150)}function oe(t,e,n,o,s,i,a,l,c,d,r){(t.includes(s.target)||e.some(t=>t.contains(s.target)))&&!o.includes(s.target)||(i.contains(s.target)?("report"!==l.lastSelectedMode&&_(),history.pushState({},"","/"),"report"!==l.lastSelectedMode&&se(),I(v),I(L),I(C),ne(S),B(w),subMainContainerTransition("none"),ue(),P("report")):a.contains(s.target)?("home"!==l.lastSelectedMode&&_(),hideDashboardCat(),x(v,y),x(L,y),x(C,y),P("home"),B(S),B(w),subMainContainerTransition("flex"),pe()):c.contains(s.target)&&("space"!==l.lastSelectedMode&&_(),history.pushState({},"","/"),hideDashboardCat(),I(v),I(L),I(C),ne(w),B(S),subMainContainerTransition("none"),ue(),P("space")),setTimeout(()=>{!n.includes(s.target)&&"home"!==l.lastSelectedMode||d.sessionSummaryPopupShowing||d.sessionSummarySignupPromptPopupShowing||Tt.contains(s.target)||d.settingsContainerShowing||L.contains(s.target)||(P("home"),subMainContainerTransition("flex"),B(S),B(w),history.pushState({},"","/"))},0),!d.blogShowing)||L.contains(s.target)||(r.style.display="none",hideBlog(u))}function se(){if(T.muffinToggle&&(!T.sessionInProgress||T.inHyperFocus)&&!T.pipWindowOpen&&!y){let t=Math.floor(9*Math.random());for(;t===Bt.dashboardCatIdsArrIndex;)t=Math.floor(9*Math.random());Bt.dashboardCatIdsArrIndex=t;var e=_t[t];document.getElementById(e).style.display="flex"}}function hideDashboardCat(){var t=_t[Bt.dashboardCatIdsArrIndex];document.getElementById(t).style.display="none"}function ie(e,t,n,o,s,i,a){[t,n,o,m,h,b,f,g,L,c].some(t=>t.contains(e.target))&&e.target!==s||closeAboutContainer()}function closeAboutContainer(){k.aboutContainerShowing=!1,a.style.display="none",a.style.opacity="0"}function ae(e,t,n,o,s){[t,l,n,o,m,h,b,f,g,L,c].some(t=>t.contains(e.target))&&e.target!==s||closeBlogContainer()}function closeBlogContainer(){k.blogContainerShowing=!1,l.style.display="none",l.style.opacity="0"}function le(t,e,n,o){e.contains(t.target)||ge(n,o)}function ce(t,e,n,o){e.contains(t.target)||he(n,o)}function de(t,e,n,o){t.target===n&&re()}function re(){k.settingsContainerShowing=!1,c.style.display="none",c.style.opacity="0",p.style.overflowY="scroll",history.pushState({},"","/")}function ue(){Nt(mt),Nt(ht)}function pe(){T.inHyperFocus?T.flowTimeAnimationToggle&&Gt(mt,"block"):!T.chillTimeAnimationToggle&&T.sessionInProgress||Gt(ht,"flex")}function ye(t,e,n,o,s){window.location.hash=o[t],n.scrollTo(0,0),closeBlogContainer(),n.style.display="block",s.blogShowing=!0,document.getElementById(o[t]).classList.remove("hidden")}function hideBlog(t){t.forEach(function(t){document.getElementById(t.id).classList.contains("hidden")||document.getElementById(t.id).classList.add("hidden")}),pauseVideo(),k.blogShowing=!1}function ge(t,e){t.popupWindowShowing=!1,e.style.opacity="0",setTimeout(()=>{e.style.display="none"},50)}function me(t,e){t.popupWindowShowing=!0,e.style.display="flex",setTimeout(()=>{e.classList.add("menuLanding"),e.style.opacity="1"},100)}function he(t,e){t.popupQuestionWindowShowing=!1,e.style.opacity="0",setTimeout(()=>{e.style.display="none"},50)}function fe(t,e){t.popupQuestionWindowShowing=!0,e.style.display="flex",setTimeout(()=>{e.classList.add("questionMenuLanding"),e.style.opacity="1"},100)}function we(t,e){k.accountWindowShowing=!0,t.style.display="flex",e.style.display="block",p.style.overflowY="hidden"}function be(t,e){k.accountWindowShowing=!1,e.style.display="none",t.style.display="none",p.style.overflowY="scroll"}function Se(t,e){k.deleteAccountWindowShowing=!0,t.style.display="flex",e.style.display="block"}function ve(t,e){k.deleteAccountWindowShowing=!1,e.style.display="none",t.style.display="none"}function Le(t,e){k.shortcutsWindowShowing=!0,t.style.display="flex",e.style.display="block",p.style.overflowY="hidden"}function Ce(t,e){k.shortcutsWindowShowing=!1,e.style.display="none",t.style.display="none",p.style.overflowY="scroll"}function ke(){k.sessionSummarySignupPromptPopupShowing=!1,kt.style.display="none",Et.classList.remove("hyperChillSlowRotate"),kt.style.opacity=0}window.addEventListener("popstate",t=>{var e=window.location.hash.substring(1);t.state&&t.state.window?"blog"===(t=t.state.window)?Kt():"about"===t?Jt():"settings"===t&&$t():""===e&&(P("home"),subMainContainerTransition("flex"),B(S),B(w),closeAboutContainer(),closeBlogContainer(),re())}),document.addEventListener("DOMContentLoaded",()=>{var t=window.location.pathname.split("/").pop(),e=window.location.hash.substring(1);"blog"===t&&""===e?Kt():"about"===t?Jt():"settings"===t&&history.pushState({},"","/"),e&&zt(e)}),document.addEventListener("stateUpdated",function(){var t;t=navigator.userAgent||window.opera,/iPad/.test(t)||navigator.maxTouchPoints;y||(m.style.display="flex",v.style.display="flex",Tt.style.display="flex",L.style.display="flex",C.style.display="flex"),setTimeout(()=>{n.style.opacity="1",k.canToggleSwitch=!0,y||(m.style.opacity="1",v.style.opacity="1",Tt.style.opacity="1",L.style.opacity="1",C.style.opacity="1",setTimeout(()=>{v.style.transition="opacity 0.25s ease-in-out, background-color 0.25s ease",L.style.transition="opacity 0.25s ease-in-out, background-color 0.25s ease",C.style.transition="opacity 0.25s ease-in-out, background-color 0.25s ease"},1e3))},1e3),window.addEventListener("beforeunload",function(t){T.sessionInProgress&&(t.preventDefault(),t.returnValue="")}),n.addEventListener("click",function(){(k.popupWindowShowing?ge:me)(k,e)}),m.addEventListener("click",function(){(k.popupQuestionWindowShowing?he:fe)(k,h)}),r.addEventListener("click",function(){Kt()}),o.addEventListener("click",function(){Jt()}),Y.addEventListener("click",function(){$t(),Vt(Pt,Wt)}),Tt.addEventListener("click",function(){k.settingsContainerShowing?re():($t(),Vt(Pt,Wt))}),ot.addEventListener("click",function(){var t=window.location.origin+"/privacy-policy";window.open(t,"_blank")}),st.addEventListener("click",function(){var t=window.location.origin+"/terms-and-conditions";window.open(t,"_blank")}),window.addEventListener("resize",function(){(window.innerWidth||document.documentElement.clientWidth)<=725&&(k.popupQuestionWindowShowing=!1,h.style.opacity="0",h.style.display="none")}),F.addEventListener("click",function(){!1===It.loggedIn?window.location.href="/login":fetch("/api/state/logout",{method:"POST"}).then(()=>{It.loggedIn=!1,window.location.href="/"}).catch(t=>{})}),it.addEventListener("click",function(){!1===It.loggedIn?window.location.href="/login":we(g,f)}),lt.addEventListener("click",function(){be(g,f)}),ut.addEventListener("click",function(){Le(g,b)}),g.addEventListener("click",function(t){k.accountWindowShowing&&!f.contains(t.target)?lt.click():k.deleteAccountWindowShowing&&!at.contains(t.target)?ct.click():k.shortcutsWindowShowing&&!b.contains(t.target)?Ce(g,b):M.confirmLabelDeletionWindowShowing&&!St.contains(t.target)?Lt.click():k.sessionSummarySignupPromptPopupShowing&&!kt.contains(t.target)&&t.target!==Ct?(ke(),g.style.display="none","home"===E.lastSelectedMode&&subMainContainerTransition("flex")):Qt.confirmSessionDeletionPopupShowing&&!Ft.contains(t.target)&&Xt()}),pt.addEventListener("click",function(){Ce(g,b)}),rt.addEventListener("click",async function(){Se(g,at)}),ct.addEventListener("click",function(){ve(g,at)}),dt.addEventListener("click",async function(){It.loggedIn&&await Ut(),window.location.href="/"}),V.forEach(function(t){t.addEventListener("mouseover",function(){t.classList.remove("resetRotation"),t.classList.add("triggerRotation")}),t.addEventListener("mouseout",function(){t.classList.remove("triggerRotation"),t.classList.add("resetRotation")})}),N.forEach(function(t){t.addEventListener("mouseover",function(){t.classList.remove("resetBounce"),t.classList.add("triggerBounceLeft")}),t.addEventListener("mouseout",function(){t.classList.remove("TriggerBounceLeft"),t.classList.add("resetBounce")}),t.addEventListener("click",function(){k.blogShowing&&(d.style.display="none",hideBlog(u),history.replaceState(null,null,window.location.pathname)),l.style.display="flex",setTimeout(()=>{l.style.opacity="1"},0),k.blogShowing=!1})}),q.forEach(function(t){t.addEventListener("click",function(){ye(t.id,l,d,Mt,k),U.classList.add("resetRotation"),G.classList.add("resetBounce")})}),document.addEventListener("click",function(t){le(t,n,k,e),ce(t,m,k,h),ie(t,o,a,n,s,K,Z),ae(t,r,d,n,i),de(t,c,X,p),oe([W,A,r,j,D,o,O,R,Y,H,Q,F,nt,g,J],[a,l,n,m,d,c,h,at,f,it,b,St,vt],[s,i,U],[s,i,U,X],t,K,et,E,tt,k,d)}),document.addEventListener("keydown",t=>te(t))});export{subMainContainerTransition,hideDashboardCat,closeAboutContainer,closeBlogContainer,hideBlog};