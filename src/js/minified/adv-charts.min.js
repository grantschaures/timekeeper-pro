import{charts as i,dashboardData as a,flags as d}from"../modules/dashboard-objects.js";import{timeConvert as s}from"../modules/index-objects.js";import{calculateDistractionsPerHour as l,focusQualityCalculation as n}from"../dashboard/populate-dashboard.js";let m=[],p=[],t=[],c=["1am","2am","3am","4am","5am","6am","7am","8am","9am","10am","11am","12pm","1pm","2pm","3pm","4pm","5pm","6pm","7pm","8pm","9pm","10pm","11pm","12am"],u=.5;function e(){let a,t,e;e=d.distractionsToggle?(a="rgb(255, 69, 0)",t=p,{beginAtZero:!0,suggestedMax:5,title:{display:!0,text:"Avg Distractions (Per Hour of Deep Work)",color:"white"},ticks:{color:"white"},grid:{display:!0,color:"rgba(255, 255, 255, 0.15)",lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!1}}):(a="rgb(162, 0, 212)",t=m,{beginAtZero:!0,max:100,title:{display:!0,text:"Hourly Focus Quality",color:"white"},ticks:{color:"white"},grid:{display:!0,color:"rgba(255, 255, 255, 0.15)",lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!1}});var r=document.getElementById("hourlyFocusChart").getContext("2d"),o={type:"bar",data:{labels:["12am","1am","2am","3am","4am","5am","6am","7am","8am","9am","10am","11am","12pm","1pm","2pm","3pm","4pm","5pm","6pm","7pm","8pm","9pm","10pm","11pm"],datasets:[{label:"Hourly Focus Quality",data:t,backgroundColor:a,borderColor:"rgb(255, 255, 255)",borderWidth:2,borderRadius:5,barPercentage:1,categoryPercentage:1,offset:!0}]},options:{scales:{y:e,x:{offset:!0,ticks:{align:"end",color:"white"},title:{display:!1}}},plugins:{legend:{display:!1},tooltip:{enabled:!0,backgroundColor:"rgb(0, 0, 0)",titleColor:"white",bodyColor:"white",borderColor:"white",borderWidth:3,callbacks:{title:function(a){var a=a[0],t=a.dataIndex,t=c[t];return a.label+" - "+t},label:function(a){let t;return t=d.distractionsToggle?" "+a.raw+" avg distractions per hour of deep work":" "+a.raw+"%"}}}},animations:{x:{duration:0},y:{duration:d.quickerChartAnimations?500:1e3,easing:"easeOutQuint"}}},plugins:[g]};i.deepWork&&(i.deepWork.destroy(),i.deepWork=null),i.deepWork=new Chart(r,o)}document.addEventListener("displayAdvCharts",async function(){await r(a,m,p,t),e()});let g={id:"noDataPlugin",afterDraw:function(a){var t,e;0!==a.data.datasets[0].data.length&&!a.data.datasets[0].data.every(a=>null===a)||(t=a.ctx,e=a.width,a=a.height,t.save(),t.textAlign="center",t.textBaseline="middle",t.font="48px settingsHeaderFont",t.fillStyle="gray",t.fillText("No Data ðŸ˜©",e/2,a/2-20),t.restore())}};async function r(a,t,e,r){var o=a.hourlyArr;for(let a=0;a<o.length;a++){var i=n(s,o[a].deepWork,o[a].distractions,u),i=(t.push(Math.round(100*i)),l(s,o[a].deepWork,o[a].distractions)),i=(e.push(i),h(o[a].deepWorkTimes));r.push(i)}}function h(a){a=a.reduce((a,t)=>a+t,0)/a.length;return Math.round(a/6e4)}