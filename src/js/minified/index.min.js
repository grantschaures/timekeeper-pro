import{flowtimeBackgrounds as _,chilltimeBackgrounds as U,selectedBackground as i,selectedBackgroundIdTemp as $,selectedBackgroundId as d,timeConvert as s,intervals as l,startTimes as c,recoverBreakState as z,recoverPomState as K,elapsedTime as m,alertVolumes as u,alertSounds as g,counters as f,flags as p,tempStorage as Y,settingsMappings as G,savedInterruptionsArr as q,timeAmount as I}from"../modules/index-objects.js";import{chime as v,bell as y,clock_tick as J,soundMap as X}from"../modules/sound-map.js";import{start_stop_btn as h,submit_change_btn as Q,end_session_btn as Z,report_btn as o,total_time_display as w,productivity_chill_mode as k,progressBarContainer as T,progressBar as S,progressContainer as b,display as oo,hyperChillTitle as x,subMainContainer as eo,interruptionsContainer as to,interruptionsSubContainer as no,decBtn as ro,incBtn as ao,interruptionsNum as io,suggestionBreakContainer as so,suggestionBreak_label as P,suggestionBreak_min as B,completedPomodorosContainer as lo,completedPomodoros_label as co,completedPomodoros_min as mo,targetHoursContainer as uo,timekeepingContainer as go,popupMenu as fo,settingsContainer as po,notesContainer as Io,aboutContainer as vo,blogContainer as yo,blackFlowtimeBackground as ho,blackChilltimeBackground as wo,targetTimeReachedToggle as ko,breakSuggestionToggle as E,suggestionMinutesInput as To,flowmodoroNotificationToggle as C,flowmodoroNotifications as So,flowmodoroNotificationInfoWindow as bo,flowTimeBreakNotification as xo,flowTimeBreakNotificationInfoWindow as Po,pomodoroNotifications as Bo,pomodoroNotificationInfoWindow as Eo,notesAutoSwitch as Co,notesAutoSwitchInfoWindow as No,pomodoroNotificationToggle as N,autoStartPomodoroIntervalToggle as Lo,autoStartBreakIntervalToggle as Fo,defaultThemeContainer as Ao,defaultTheme as Mo,darkThemeContainer as Do,darkGrayTheme as Oo,targetTimeReachedAlert as e,transitionClockSoundToggle as Ho,flowTimeAnimationToggle as Wo,chillTimeAnimationToggle as jo,pomodoroVolumeContainer as Vo,pomodoroVolumeBar as Ro,pomodoroVolumeThumb as _o,flowmodoroVolumeContainer as Uo,flowmodoroVolumeBar as $o,flowmodoroVolumeThumb as zo,generalVolumeContainer as Ko,generalVolumeBar as Yo,generalVolumeThumb as Go,pomodoroVolumeContainer2 as qo,pomodoroVolumeBar2 as Jo,pomodoroVolumeThumb2 as Xo,flowmodoroVolumeContainer2 as Qo,flowmodoroVolumeBar2 as Zo,flowmodoroVolumeThumb2 as oe,generalVolumeContainer2 as ee,generalVolumeBar2 as te,generalVolumeThumb2 as ne,flowmodoroRadios as re,flowmodoroInputs as ae,generalRadios as ie,pomodoroInputs as de,pomodoroRadios as se,flowtimeBackgroundCells as le,chilltimeBackgroundCells as ce,settings_menu_container as me,registerHereText as ue,backgroundVideoSource as t,backgroundVideo as n,flowAnimation as L,chillAnimation as F,hyperChillLogoImage as ge,createLabelInput as fe,updateLabelInput as pe,emojiContainer as Ie,loginEmailInput as ve,loginPasswordInput as ye,forgotPasswordContainer as r,loginBtnContainer as a,loginBtn as he,logoutBtn as we,forgotPasswordSettings as ke,propagateUnfinishedTasks as Te,propagateUnfinishedTasksInfoWindow as Se,flowtimeBackgroundWorldCells as be,chilltimeBackgroundWorldCells as xe}from"../modules/dom-elements.js";import{sessionState as A}from"../modules/state-objects.js";import{initializeGUI as Pe}from"../utility/initialize_gui.js";import{updateUserSettings as M}from"../state/update-settings.js";let D=new Worker("/js/displayWorkers/pomodoroWorker.js"),O=new Worker("/js/displayWorkers/suggestionWorker.js"),H=new Worker("/js/displayWorkers/flowmodoroWorker.js"),Be=new Worker("/js/displayWorkers/displayWorker.js"),Ee=new Worker("/js/displayWorkers/totalDisplayWorker.js");function Ce(o,e,t,n,r,a,i,d,s,l,c,m,u,g,f,p,I,v,y,h){o.pomodoroNotificationToggle?!o.inHyperFocus&&60*e.currentPomodoroNotification*1e3<1e3*Math.floor((Date.now()-t.local)/1e3)+1e3&&!o.modeChangeExecuted?(o.modeChangeExecuted=!0,o.autoSwitchedModes=!1,Ge(o,e,n,t,r,a,d,s,l,c,m,u,g,f,p,I,v)):o.inHyperFocus&&60*e.currentPomodoroNotification*1e3<1e3*Math.floor((Date.now()-t.local)/1e3)+1e3&&!o.modeChangeExecuted&&(o.modeChangeExecuted=!0,o.autoSwitchedModes=!1,qe(o,e,n,d,t,r,i,u,g,f,p)):(o.flowmodoroNotificationToggle&&!o.inHyperFocus&&60*e.currentFlowmodoroNotification*1e3<1e3*Math.floor((Date.now()-t.local)/1e3)+1e3&&!o.sentFlowmodoroNotification&&(y.postMessage("clearInterval"),Ke(d,e,t,u,g,f,p),o.sentFlowmodoroNotification=!0,r.classList.add("glowing-effect")),o.breakSuggestionToggle&&o.inHyperFocus&&60*d.suggestionMinutes*1e3<1e3*Math.floor((Date.now()-t.local)/1e3)+1e3&&!o.sentSuggestionMinutesNotification&&(h.postMessage("clearInterval"),ze(d,t,u,g,f,p),o.sentSuggestionMinutesNotification=!0,r.classList.add("glowing-effect")))}function Ne(o,e){let t;return t=0==o.currentPomodoroIntervalOrderIndex||2==o.currentPomodoroIntervalOrderIndex||4==o.currentPomodoroIntervalOrderIndex?1==e.pomodoroIntervalArr[o.currentPomodoroIntervalIndex]?"It's been "+o.currentPomodoroNotification+" minute! Are you ready to take a short break?":"It's been "+o.currentPomodoroNotification+" minutes! Are you ready to take a short break?":6==o.currentPomodoroIntervalOrderIndex?1==e.pomodoroIntervalArr[o.currentPomodoroIntervalIndex]?"It's been "+o.currentPomodoroNotification+" minute! Are you ready to take a long break?":"It's been "+o.currentPomodoroNotification+" minutes! Are you ready to take a long break?":1==e.pomodoroIntervalArr[o.currentPomodoroIntervalIndex]?"It's been "+o.currentPomodoroNotification+" minute! Are you ready to start your Pomodoro Interval?":"It's been "+o.currentPomodoroNotification+" minutes! Are you ready to start your Pomodoro Interval?"}function Le(o,e,t,n,r,a,i){let d=o["target"];Object.keys(t).forEach(o=>{d.id!==""+e+o+"Input"&&d.id!==""+e+o+"Input2"||(j(n,r),a[e]="NoAlert"===o?"none":o.toLowerCase(),"NoAlert"!==o?(W(t[o],e,i),document.getElementById(""+e+o+"Input").checked=!0,document.getElementById(""+e+o+"Input2").checked=!0):(document.getElementById(e+"NoAlertInput").checked=!0,document.getElementById(e+"NoAlertInput2").checked=!0),Fe(e,o))})}async function Fe(o,e){let t;t="bell"===e.toLowerCase()||"chime"===e.toLowerCase()?e.toLowerCase():"none",A.loggedIn&&("flowmodoro"===o?await M({chillTime:{alertSound:t}}):"general"===o?await M({flowTime:{alertSound:t}}):await M({pomodoro:{alertSound:t}}))}function Ae(o,e,t,n,r){o.inRecoveryBreak&&!o.autoStartPomodoroInterval?e.pomodoroNotificationSeconds=Math.round(60*t.currentPomodoroNotification-(n.displayTime/1e3-1)):e.pomodoroNotificationSeconds=60*t.currentPomodoroNotification,r.postMessage("clearInterval"),r.postMessage(e.pomodoroNotificationSeconds)}function Me(o,e,t,n,r,a){o.inRecoveryBreak&&(setTimeout(()=>{At(e,t,n,o,r,a)},1e3),Vt(o,n.hyperFocus,t)<e.targetTime)&&(a.classList.remove("glowing-effect"),o.hitTarget=!1)}function De(o,e,t,n,r){o+=60*e.pomodoroIntervalArr[t.currentPomodoroIntervalIndex]*1e3,n.autoSwitchedModes&&(r.hyperFocus=o),e=r.hyperFocus;r.hyperFocus=1e3*Math.round(e/1e3)}function Oe(o,e,t,n,r,a){o.inHyperFocus?(o.breakSuggestionToggle&&(e.suggestionSeconds=60*n.suggestionMinutes,a.postMessage(e.suggestionSeconds)),o.flowmodoroNotificationToggle&&r.postMessage("clearInterval")):(o.flowmodoroNotificationToggle&&(e.flowmodoroNotificationSeconds=60*t.currentFlowmodoroNotification,r.postMessage(e.flowmodoroNotificationSeconds)),o.breakSuggestionToggle&&a.postMessage("clearInterval"))}function He(o,e){let t;return t=1===o.currentPomodoroIntervalOrderIndex?"Short Break #1 | "+String(e.pomodoroIntervalArr[1])+" min":3===o.currentPomodoroIntervalOrderIndex?"Short Break #2 | "+String(e.pomodoroIntervalArr[1])+" min":5===o.currentPomodoroIntervalOrderIndex?"Short Break #3 | "+String(e.pomodoroIntervalArr[1])+" min":7===o.currentPomodoroIntervalOrderIndex?"Long Break | "+String(e.pomodoroIntervalArr[2])+" min":"Break Mode"}function We(o,e,t,n,r){!o.inRecoveryPom||o.autoStartPomodoroInterval&&o.autoStartBreakInterval?e.pomodoroNotificationSeconds=60*t.currentPomodoroNotification:e.pomodoroNotificationSeconds=Math.round(60*t.currentPomodoroNotification-(n.displayTime/1e3-1)),r.postMessage("clearInterval"),r.postMessage(e.pomodoroNotificationSeconds)}function je(o,e){let t;return t=1===o.currentPomodoroIntervalOrderIndex?"Short Break #1 | "+String(e.pomodoroIntervalArr[1])+" min":3===o.currentPomodoroIntervalOrderIndex?"Short Break #2 | "+String(e.pomodoroIntervalArr[1])+" min":5===o.currentPomodoroIntervalOrderIndex?"Short Break #3 | "+String(e.pomodoroIntervalArr[1])+" min":"Break Mode"}function Ve(o,e){let t;return t=0===o.currentPomodoroIntervalOrderIndex?"Pomodoro #1 | "+String(e.pomodoroIntervalArr[0])+" min":2===o.currentPomodoroIntervalOrderIndex?"Pomodoro #2 | "+String(e.pomodoroIntervalArr[0])+" min":4===o.currentPomodoroIntervalOrderIndex?"Pomodoro #3 | "+String(e.pomodoroIntervalArr[0])+" min":6===o.currentPomodoroIntervalOrderIndex?"Pomodoro #4 | "+String(e.pomodoroIntervalArr[0])+" min":"Pomodoro Mode"}function Re(o,e,t){ct(e),o.chillTimeAnimationToggle&&lt(t,"flex")}function _e(o,e,t,n){1<o.startStop&&ct(t),e.flowTimeAnimationToggle&&lt(n,"block")}function Ue(o,e,t,n){o.inRecoveryBreak?e.local=t.localStartTime:o.inRecoveryPom?e.local=n.localStartTime:e.local=Date.now()}function $e(o,e,t){o.pomodoroNotificationToggle&&"Chill Time"!==e.textContent&&at(t)}function ze(o,e,t,n,r,a){let i;i=1<o.suggestionMinutes?"Need a break? You've been hard at work for "+String(o.suggestionMinutes)+" minutes!":"Need a break? You've been hard at work for "+String(o.suggestionMinutes)+" minute!",new Notification(i),e.lastBreakSuggestionNotification=Date.now(),Bt(t,n,r.general,a.general)}function Ke(o,e,t,n,r,a,i){let d;d=1==o.breakTimeSuggestionsArr[e.currentFlowmodoroBreakIndex]?"It's been "+e.currentFlowmodoroNotification+" minute! Are you ready to get back into Flow Time?":"It's been "+e.currentFlowmodoroNotification+" minutes! Are you ready to get back into Flow Time?",new Notification(d),t.lastFlowmodoroNotification=Date.now(),Bt(n,r,a.flowmodoro,i.flowmodoro)}function Ye(o,e,t,n,r,a,i,d){let s;0==e.currentPomodoroIntervalOrderIndex||2==e.currentPomodoroIntervalOrderIndex||4==e.currentPomodoroIntervalOrderIndex?(s=1==t.pomodoroIntervalArr[e.currentPomodoroIntervalIndex]?"It's been "+e.currentPomodoroNotification+" minute! Are you ready to take a short break?":"It's been "+e.currentPomodoroNotification+" minutes! Are you ready to take a short break?",d.pomodoroCountIncremented||(e.pomodorosCompleted++,d.pomodoroCountIncremented=!0)):6==e.currentPomodoroIntervalOrderIndex?(s=1==t.pomodoroIntervalArr[e.currentPomodoroIntervalIndex]?"It's been "+e.currentPomodoroNotification+" minute! Are you ready to take a long break?":"It's been "+e.currentPomodoroNotification+" minutes! Are you ready to take a long break?",d.pomodoroCountIncremented||(e.pomodorosCompleted++,d.pomodoroCountIncremented=!0)):s=1==t.pomodoroIntervalArr[e.currentPomodoroIntervalIndex]?"It's been "+e.currentPomodoroNotification+" minute! Are you ready to start your Pomodoro Interval?":"It's been "+e.currentPomodoroNotification+" minutes! Are you ready to start your Pomodoro Interval?",new Notification(s),Bt(n,r,a.pomodoro,i.pomodoro),o.lastPomNotification=Date.now()}function Ge(o,e,t,n,r,a,i,d,s,l,c,m,u,g,f,p,I){let v=Date.now()-n.local;var y={intervalIndex:e.currentPomodoroIntervalIndex,intervalOrderIndex:e.currentPomodoroIntervalOrderIndex,notification:e.currentPomodoroNotification},h=e.pomodorosCompleted,t=t.hyperFocus;let w=n.local;o.autoStartPomodoroInterval&&Math.round(v/1e3)-60*i.pomodoroIntervalArr[e.currentPomodoroIntervalIndex]<=2&&30<(Date.now()-n.lastPomNotification)/1e3&&Ye(n,e,i,m,u,g,f,o),o.autoStartPomodoroInterval&&o.autoStartBreakInterval?(v-=60*i.pomodoroIntervalArr[y.intervalIndex]*1e3,7===y.intervalOrderIndex?y.intervalOrderIndex=0:y.intervalOrderIndex++,dt(y,i),w=Date.now(),n.hyperFocus=w,Qe(a,v,h,t,w,e,o,r),Ze(e,y)):o.autoStartPomodoroInterval?(v-=60*i.pomodoroIntervalArr[y.intervalIndex]*1e3,y.intervalOrderIndex++,dt(y,i),w=Date.now()-v,n.hyperFocus=w,Qe(a,v,h,t,w,e,o,r),Ze(e,y)):(Math.round(v/1e3)-60*i.pomodoroIntervalArr[e.currentPomodoroIntervalIndex]<=2&&30<(Date.now()-n.lastPomNotification)/1e3&&(D.postMessage("clearInterval"),Ye(n,e,i,m,u,g,f,o)),r.classList.add("glowing-effect"))}function qe(o,e,t,n,r,a,i,d,s,l,c){let m=Date.now()-r.local;var u={intervalIndex:e.currentPomodoroIntervalIndex,intervalOrderIndex:e.currentPomodoroIntervalOrderIndex,notification:e.currentPomodoroNotification};let g=e.pomodorosCompleted,f=t.hyperFocus,p=r.local;o.autoStartBreakInterval&&Math.round(m/1e3)-60*n.pomodoroIntervalArr[e.currentPomodoroIntervalIndex]<=2&&30<(Date.now()-r.lastPomNotification)/1e3&&Ye(r,e,n,d,s,l,c,o),o.autoStartPomodoroInterval&&o.autoStartBreakInterval?(m-=60*n.pomodoroIntervalArr[u.intervalIndex]*1e3,o.pomodoroCountIncremented||(g++,o.pomodoroCountIncremented=!0),u.intervalOrderIndex++,dt(u,n),f-=m,p=Date.now(),Xe(i,m,g,f,p,e,o,a),Ze(e,u)):o.autoStartBreakInterval?(m-=60*n.pomodoroIntervalArr[e.currentPomodoroIntervalIndex]*1e3,o.pomodoroCountIncremented||(g++,o.pomodoroCountIncremented=!0),u.intervalOrderIndex++,dt(u,n),f-=m,p=Date.now()-m,Xe(i,m,g,f,p,e,o,a),Ze(e,u)):Math.round(m/1e3)-60*n.pomodoroIntervalArr[e.currentPomodoroIntervalIndex]<=2&&30<(Date.now()-r.lastPomNotification)/1e3?(D.postMessage("clearInterval"),Ye(r,e,n,d,s,l,c,o),a.classList.add("glowing-effect")):(a.classList.add("glowing-effect"),o.pomodoroCountIncremented||(e.pomodorosCompleted++,o.pomodoroCountIncremented=!0))}function Je(o,e,t,n,r){}function Xe(o,e,t,n,r,a,i,d){o.displayTime=e,o.pomodorosCompleted=t,o.hyperFocusElapsedTime=n,o.localStartTime=r,a.pomodorosCompleted<o.pomodorosCompleted&&(a.pomodorosCompleted=o.pomodorosCompleted),i.inRecoveryBreak=!0,d.click()}function Qe(o,e,t,n,r,a,i,d){o.displayTime=e,o.pomodorosCompleted=t,o.hyperFocusElapsedTime=n,o.localStartTime=r,a.pomodorosCompleted=o.pomodorosCompleted,i.inRecoveryPom=!0,d.click()}function Ze(o,e){o.currentPomodoroIntervalIndex=e.intervalIndex,o.currentPomodoroIntervalOrderIndex=e.intervalOrderIndex,o.currentPomodoroNotification=e.notification}function ot(o){var e=Math.floor(o/60),t=o%60,o=Math.floor(60*(o-Math.floor(o)));return String(e).padStart(2,"0")+`:${String(t).padStart(2,"0")}:`+String(o).padStart(2,"0")}function et(o){o.currentPomodoroIntervalIndex=0,o.currentPomodoroIntervalOrderIndex=0}function tt(o,e,t){o.textContent="Pomodoros",e.textContent=t.pomodorosCompleted}function nt(o,e,t,n){o.style.display="flex",tt(e,t,n)}function rt(o){o.style.display="none"}function at(o){7===o.currentPomodoroIntervalOrderIndex?o.currentPomodoroIntervalOrderIndex=0:o.currentPomodoroIntervalOrderIndex++}function it(o,e){0===o.currentPomodoroIntervalOrderIndex||2===o.currentPomodoroIntervalOrderIndex||4===o.currentPomodoroIntervalOrderIndex||6===o.currentPomodoroIntervalOrderIndex?(o.currentPomodoroIntervalIndex=0,o.currentPomodoroNotification=e.pomodoroIntervalArr[o.currentPomodoroIntervalIndex]):1===o.currentPomodoroIntervalOrderIndex||3===o.currentPomodoroIntervalOrderIndex||5===o.currentPomodoroIntervalOrderIndex?(o.currentPomodoroIntervalIndex=1,o.currentPomodoroNotification=e.pomodoroIntervalArr[o.currentPomodoroIntervalIndex]):7===o.currentPomodoroIntervalOrderIndex&&(o.currentPomodoroIntervalIndex=2,o.currentPomodoroNotification=e.pomodoroIntervalArr[o.currentPomodoroIntervalIndex])}function dt(o,e){0===o.intervalOrderIndex||2===o.intervalOrderIndex||4===o.intervalOrderIndex||6===o.intervalOrderIndex?(o.intervalIndex=0,o.notification=e.pomodoroIntervalArr[o.intervalIndex]):1===o.intervalOrderIndex||3===o.intervalOrderIndex||5===o.intervalOrderIndex?(o.intervalIndex=1,o.notification=e.pomodoroIntervalArr[o.intervalIndex]):7===o.intervalOrderIndex&&(o.intervalIndex=2,o.notification=e.pomodoroIntervalArr[o.intervalIndex])}async function st(o,e,t,n,r,a,i){"pomodoroInput"===o.target.id?(i[0]=t,e.pomodoroIntervalArr[0]=t,0===n.currentPomodoroIntervalIndex&&0!==n.startStop&&a.pomodoroNotificationToggle&&a.inHyperFocus&&(r.innerText=Ve(n,e))):"shortBreakInput"===o.target.id?(i[1]=t,e.pomodoroIntervalArr[1]=t,1===n.currentPomodoroIntervalIndex&&0!==n.startStop&&a.pomodoroNotificationToggle&&(r.innerText=je(n,e))):"longBreakInput"===o.target.id&&(i[2]=t,e.pomodoroIntervalArr[2]=t,2===n.currentPomodoroIntervalIndex)&&0!==n.startStop&&a.pomodoroNotificationToggle&&(r.innerText="Long Break | "+String(e.pomodoroIntervalArr[2])+" min"),A.loggedIn&&await M({pomodoro:{intervalArr:i}})}function lt(o,e){o.classList.add("intoOpacityTransition"),o.style.display=e}function ct(o){o.classList.remove("intoOpacityTransition"),setTimeout(()=>{o.style.display="none"},0)}function mt(o,e,t){var n=t[e];n?o.classList.remove("infoWindowOpacity"):o.classList.add("infoWindowOpacity"),t[e]=!n}function ut(o,e,t,n,r,a,i,d,s,l){o=Math.floor((Date.now()-o.hyperFocus)/1e3);e.inHyperFocus?(t.suggestionSeconds=60*n.suggestionMinutes-o,O.postMessage("clearInterval"),O.postMessage(t.suggestionSeconds)):t.suggestionSeconds=60*n.suggestionMinutes}function gt(o){return 720<o?o=720:(o<1||isNaN(o)||void 0===o)&&(o=1),o}function W(o,e,t){"flowmodoro"===e?o.volume=t.flowmodoro:"general"===e?o.volume=t.general:"pomodoro"===e&&(o.volume=t.pomodoro),o.play()}function j(o,e){o.pause(),o.currentTime=0,e.pause(),e.currentTime=0}async function V(o,e,t,n,r,a,i,d){o=o.getBoundingClientRect(),i=(i.clientX-o.left)/o.width,i=Math.max(0,Math.min(1,i));t.style.left=100*i+"%",n.style.width=100*i+"%",r.style.left=100*i+"%",a.style.width=100*i+"%",d.flowmodoroThumbIsDragging||d.flowmodoroThumbIsDragging2?e.flowmodoro=i:d.generalThumbIsDragging||d.generalThumbIsDragging2?e.general=i:(d.pomodoroThumbIsDragging||d.pomodoroThumbIsDragging2)&&(e.pomodoro=i)}function ft(o){for(var[e,t]of Object.entries(o))document.getElementById(t).style.display="none",document.getElementById(e).classList.remove("selected")}function pt(o){for(var[e,t]of Object.entries(o))document.getElementById(t).style.display="block"}function It(o,e){e.innerText=o<=504?"End":"End Session"}function vt(t,o,e){var n=window.innerWidth||document.documentElement.clientWidth,r=document.getElementById("end-session");if(r.innerText=n<=504?"End":"End Session",n<=650)pt(t);else{for(let[o,e]of Object.entries(t))document.getElementById(o).addEventListener("click",function(){ft(t),document.getElementById(e).style.display="block",this.classList.add("selected")});"block"===document.getElementById("settingsContainer").style.display&&document.getElementById(o.lastSettingsSelectionId).click()}e&&(document.getElementById("pomodoroSettingsContainer").style.display="none",document.getElementById("flowmodoroSettingsContainer").style.display="none",document.getElementById("generalSettingsContainer").style.display="none")}function yt(o,e,t,n,r,a){o.style.display="flex",ht(a,r,n),kt(a,e,t,r)}function ht(o,e,t){90<=o.lastHyperFocusIntervalMin?e.currentFlowmodoroNotification=t.breakTimeSuggestionsArr[3]:50<=o.lastHyperFocusIntervalMin?e.currentFlowmodoroNotification=t.breakTimeSuggestionsArr[2]:25<=o.lastHyperFocusIntervalMin?e.currentFlowmodoroNotification=t.breakTimeSuggestionsArr[1]:e.currentFlowmodoroNotification=t.breakTimeSuggestionsArr[0]}async function wt(o,e,t,n,r){"flowmodoroBreakInput1"===o.target.id?(r[0]=t,e.breakTimeSuggestionsArr[0]=t,n.currentFlowmodoroBreakIndex=0):"flowmodoroBreakInput2"===o.target.id?(r[1]=t,e.breakTimeSuggestionsArr[1]=t,n.currentFlowmodoroBreakIndex=1):"flowmodoroBreakInput3"===o.target.id?(r[2]=t,e.breakTimeSuggestionsArr[2]=t,n.currentFlowmodoroBreakIndex=2):"flowmodoroBreakInput4"===o.target.id&&(r[3]=t,e.breakTimeSuggestionsArr[3]=t,n.currentFlowmodoroBreakIndex=3),A.loggedIn&&await M({chillTime:{intervalArr:r}})}function kt(o,e,t,n){o.flowmodoroNotificationToggle?e.textContent="Break":e.textContent="Suggested Break",t.textContent=n.currentFlowmodoroNotification+" min"}function Tt(o,e){o.style.display="none"}function St(o){o.style.display="none"}function bt(o){o.style.display="block"}function xt(o,e,t){t.push(e.interruptions),e.interruptions=0,o.textContent=e.interruptions}function Pt(){var o=Date.now(),o=new Date(o);return(o.getHours()%12||12)+`:${String(o.getMinutes()).padStart(2,"0")} `+(12<=o.getHours()?"PM":"AM")}function Bt(o,e,t,n){"chime"===t?(o.volume=n,o.play()):"bell"===t&&(e.volume=n,e.play())}function Et(){var o=navigator.userAgent;return-1<o.indexOf("Firefox")?"Firefox":-1<o.indexOf("Safari")&&-1==o.indexOf("Chrome")?"Safari":-1<o.indexOf("Edg")?"Chromium-Edge":-1<o.indexOf("Edge")?"Legacy Edge":-1<o.indexOf("Chrome")?"Chrome":"Another browser"}async function Ct(o,e,t,n){return"Notification"in window?"denied"===Notification.permission||"granted"===await Notification.requestPermission():(alert("This browser does not support desktop notifications or auto start functionality"),!1)}function Nt(o){document.getElementById("target-hours").remove();var e=document.createElement("input");e.type="number",e.id="target-hours",e.name="hours",e.min="0",e.value="",document.getElementById("coolDiv").appendChild(e),e.focus(),document.getElementById("target-hours-submit").textContent="Submit",o.submittedTarget=!1}function Lt(o,e,t){var o=Math.round(100*parseFloat(o))/100,n=(e.targetTime=60*o*60*1e3,document.getElementById("target-hours").remove(),document.createElement("h4"));return n.textContent=o,n.id="target-hours",n.className="finalized-hours",n.style.backgroundColor="#5c5c5c",document.getElementById("coolDiv").appendChild(n),document.getElementById("target-hours-submit").textContent="Change",t.submittedTarget=!0,e.targetTime}function Ft(o,e,t,n,r,a){var i=Math.round(100*parseFloat(o))/100;return!(!o||i<=0||24<i||60*i*60*1e3<=Vt(r,n.hyperFocus,t))||(0!==a.startStop?r.inHyperFocus?alert("Enter a valid target time between "+Math.ceil(100*parseFloat((n.hyperFocus+(Date.now()-t.local))/e.msPerHour))/100+" hours and 24 hours"):r.inHyperFocus||alert("Enter a valid target time between "+Math.ceil(100*parseFloat(n.hyperFocus/e.msPerHour))/100+" hours and 24 hours"):0===a.startStop&&alert("Enter a valid target time between 0.01 hours and 24 hours"),!1)}function R(o,e,t,n,r){o.innerText=n,e.innerText=r,t.inHyperFocus="Stop"===n}function At(e,t,n,r,a,i){if(isNaN(e.targetTime)||null===e.targetTime||!r.submittedTarget)a.classList.contains("fullopacity1")&&(a.classList.remove("fullopacity1"),setTimeout(()=>{a.style.width="0%"},500));else{a.classList.contains("fullopacity1")||a.classList.add("fullopacity1");let o=Vt(r,n.hyperFocus,t)/e.targetTime;1<o&&(o=1),0!==e.targetTime&&1<=o&&!r.hitTarget&&(r.hitTarget=!0,setTimeout(()=>{1==r.targetReachedToggle&&new Notification("Congrats! You've hit your target time!")},1),i.classList.add("glowing-effect")),a.style.width=100*o+"%"}}function Mt(o){o.innerText="00:00:00"}function Dt(o,e,t,n){o.beginning=Date.now(),n.sessionInProgress=!0,Rt(),document.getElementById("target-hours").classList.remove("glowing-effect"),e.classList.add("hyperChillLogoRotate"),""!=document.getElementById("target-hours").value&&(""!=!document.getElementById("target-hours").value||n.submittedTarget)||(t.classList.toggle("small"),n.progressBarContainerIsSmall=!0)}function Ot(o,e){1==e.transitionClockSoundToggle&&(o.volume=.25,o.play())}function Ht(o,e,t,n,r,a){"Enter"!==o.key||a.enterKeyDown||(o.preventDefault(),a.enterKeyDown=!0,"target-hours"===document.activeElement.id?t.click():document.activeElement!==n&&document.activeElement!==r&&"noteInput"!=document.activeElement.className&&"note-task-input-text"!=document.activeElement.id&&"note-task-input-text-edit"!==document.activeElement.id&&(a.autoSwitchedModes=!1,e.click()))}function Wt(o,e){"Enter"===o.key&&e.enterKeyDown&&(e.enterKeyDown=!1)}function jt(e,t,n,r,o,a){var t=Vt(o,t.hyperFocus,e),e=Math.floor(t/r.msPerHour),i=Math.floor((t-e*r.msPerHour)/r.msPerMin),r=Math.floor((t-e*r.msPerHour-i*r.msPerMin)/r.msPerSec),e=String(e).padStart(2,"0"),i=String(i).padStart(2,"0"),r=String(r).padStart(2,"0");if(o.submittedTarget){let o=t/a.targetTime;1<o&&(o=1),n.textContent=e+`:${i}:`+r+" ("+Math.trunc(100*o)+"%)"}else n.textContent=e+`:${i}:`+r}function Vt(o,e,t){return o.inHyperFocus?e+(Date.now()-t.local):e}function Rt(){document.title=document.getElementById("display").innerText,new MutationObserver(function(){document.title=document.getElementById("display").innerText}).observe(document.getElementById("display"),{childList:!0,subtree:!0,characterData:!0})}function _t(o){var e=document.getElementById("favicon1"),t=document.getElementById("favicon2");e.href=o,t.href=o}function setInitialBackgroundCellSelection(){document.getElementById(d.flowtime).classList.add("selected-background"),document.getElementById(d.chilltime).classList.add("selected-background")}function setBackground(o){document.documentElement.style.backgroundImage=o}function deactivateDarkTheme(o,e,t,n,r,a,i,d,s,l,c,m,u){let g="rgba(0, 0, 0, 0.8)";var f="rgb(0, 0, 0)";[o,e,t,i,d,s].forEach(function(o){o.style.backgroundColor=g,o.style.border=null}),r.style.backgroundColor=u?f:g,r.style.border=null,n.style.backgroundColor="rgba(255, 255, 255, 0.25)",n.style.border="1px rgba(0, 0, 0, 0.25)",a.style.backgroundColor=f,m.style.backgroundColor="#000000",m.style.border="5px solid #FFFFFF","black-flowtime"===c.flowtime&&"black-chilltime"===c.chilltime&&(document.getElementById(l.flowtime).click(),document.getElementById(l.chilltime).click())}function activateDarkTheme(o,e,t,n,r,a,i,d,s,l,c,m,u,g){r=[r,a,g];[o,e,t,n,i,d,s].forEach(function(o){o.style.backgroundColor="rgba(32, 32, 32, 0.9)",o.style.border="3px solid rgb(255, 255, 255)"}),r.forEach(function(o){o.style.backgroundColor="rgba(32, 32, 32, 1)"}),g.style.border="5px solid white",m.flowtime=u.flowtime,m.chilltime=u.chilltime,l.click(),c.click()}document.addEventListener("DOMContentLoaded",function(){var o=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),e=window.innerWidth||document.documentElement.clientWidth,t=[{radios:re,type:"flowmodoro"},{radios:ie,type:"general"},{radios:se,type:"pomodoro"}];It(e,Z),window.scrollTo({top:0,behavior:"smooth"}),o&&(fo.style.backgroundColor="rgb(0, 0, 0)"),setInitialBackgroundCellSelection(),setTimeout(()=>{x.style.opacity="1",x.classList.add("hyperChillTitleAnimation")},0);let n=document.getElementById("threeWayToggle");setTimeout(()=>{eo.style.opacity="1"},1e3),setTimeout(()=>{x.classList.remove("hyperChillTitleAnimation"),x.style.opacity="0",setTimeout(()=>{x.style.display="none",n.style.display="inline-flex",n.classList.add("threeWayToggleAnimation"),setTimeout(()=>{n.style.opacity="1"},100)},1e3)},2e3);e=new Image;e.src="/images/iStock/iStock-1253862403-mid-edit.jpg",e.onload=function(){document.body.classList.add("fade-out-bg")},document.addEventListener("keydown",o=>Ht(o,h,Q,fe,pe,p)),document.addEventListener("keyup",o=>Wt(o,p)),h.addEventListener("click",function(){var o;f.startStop++,Ot(J,p),Mt(oo),1===f.startStop?(Dt(c,ge,T,p),c.lastPomNotification=Date.now()):$e(p,k,f),Ue(p,c,z,K),Be.postMessage("clearInterval"),Be.postMessage("startInterval"),h.classList.remove("glowing-effect"),p.pomodoroCountIncremented=!1,l.main?(p.inHyperFocus=!1,p.lastHyperFocusIntervalMin=Math.floor((Date.now()-c.hyperFocus)/6e4),c.chillTime=Date.now(),_t("/images/logo/HyperChillLogoBlue.png"),Re(p,L,F),xt(io,f,q),St(no),setBackground(i.chilltime),p.inRecoveryBreak&&(m.hyperFocus=z.hyperFocusElapsedTime),o=m.hyperFocus,m.hyperFocus+=Date.now()-c.hyperFocus,p.pomodoroNotificationToggle?(nt(lo,co,mo,f),De(o,I,f,p,m),it(f,I),Me(p,I,c,m,S,b),Ae(p,m,f,z,D),R(h,k,p,"Start",He(f,I))):(yt(so,P,B,I,f,p),R(h,k,p,"Start","Chill Time")),jt(c,m,w,s,p,I),Oe(p,m,f,I,H,O),clearInterval(l.main),l.main=null,Ee.postMessage("clearInterval")):(p.inHyperFocus=!0,p.sentFlowmodoroNotification=!1,p.inRecoveryPom||(c.hyperFocus=Date.now()),Ee.postMessage("startInterval"),_t("/images/logo/HyperChillLogoGreen.png"),_e(f,p,F,L),Tt(so,P,B),rt(lo),bt(no),it(f,I),setBackground(i.flowtime),Oe(p,m,f,I,H,O),l.main=setInterval(()=>At(I,c,m,p,S,b),1e3),p.pomodoroNotificationToggle?(R(h,k,p,"Stop",Ve(f,I)),We(p,m,f,K,D)):R(h,k,p,"Stop","Flow Time"),1<f.startStop&&(m.chillTime+=Date.now()-c.chillTime)),p.inRecoveryBreak=!1,p.inRecoveryPom=!1,p.sentSuggestionMinutesNotification=!1,p.autoSwitchedModes=!1,setTimeout(()=>{p.modeChangeExecuted=!1},1e3)}),Q.addEventListener("click",function(){var o;p.submittedTarget?p.submittedTarget&&(p.hitTarget&&b.classList.remove("glowing-effect"),Nt(p),At(I,c,m,p,S,b),jt(c,m,w,s,p,I),0<f.startStop)&&(p.progressBarContainerIsSmall||(T.classList.toggle("small"),p.progressBarContainerIsSmall=!0)):Ft(o=document.getElementById("target-hours").value,s,c,m,p,f)&&(p.hitTarget&&b.classList.remove("glowing-effect"),I.targetTime=Lt(o,I,p),p.progressBarContainerIsSmall&&(T.classList.toggle("small"),p.progressBarContainerIsSmall=!1),At(I,c,m,p,S,b),jt(c,m,w,s,p,I),p.hitTarget=!1)}),To.addEventListener("change",async function(){var o=To.value,o=(I.suggestionMinutes=Math.round(parseFloat(o)),gt(I.suggestionMinutes));To.value=o;let e;e=0===f.startStop?0:Math.round((Date.now()-c.hyperFocus)/1e3),p.sentSuggestionMinutesNotification=!1,p.breakSuggestionToggle&&(ut(c,p,m,o,l,g,u,v,y,h),60*o>e?(p.sentSuggestionMinutesNotification=!1,h.classList.remove("glowing-effect")):(p.sentSuggestionMinutesNotification=!0,h.classList.add("glowing-effect"))),A.loggedIn&&await M({flowTime:{suggestionMinutes:o}})}),ro.addEventListener("click",function(){0<f.interruptions&&(f.interruptions--,io.textContent=f.interruptions)}),ao.addEventListener("click",function(){f.interruptions<1e3&&(f.interruptions++,io.textContent=f.interruptions)});for(let[o,e]of Object.entries(G))document.getElementById(o).addEventListener("click",function(){ft(G),document.getElementById(e).style.display="block",this.classList.add("selected"),Y.lastSettingsSelectionId=o});function r(o,e,t,n){o.flowmodoroNotificationToggle&&1<f.startStop&&!o.inHyperFocus&&(60*e.breakTimeSuggestionsArr[f.currentFlowmodoroBreakIndex]>t?(n.classList.remove("glowing-effect"),o.sentFlowmodoroNotification=!1):(n.classList.add("glowing-effect"),o.sentFlowmodoroNotification=!0))}function a(o,e,t){e<60*o?t.classList.remove("glowing-effect"):t.classList.add("glowing-effect")}o&&(document.getElementById("notificationsHeaderContainer").style.display="none",document.getElementById("pomodoroBtnContainer").style.display="none",document.getElementById("flowmodoroBtnContainer").style.display="none",document.getElementById("generalBtnContainer").style.display="none",document.getElementById("pomodoroSettingsContainer").style.display="none",document.getElementById("flowmodoroSettingsContainer").style.display="none",document.getElementById("generalSettingsContainer").style.display="none",document.getElementById("pomodoroAlertSoundBlock2").style.display="none",document.getElementById("flowmodoroAlertSoundBlock2").style.display="none",document.getElementById("generalAlertSoundBlock2").style.display="none",Y.lastSettingsSelectionId="backgroundsBtnContainer"),Bo.addEventListener("click",function(){mt(Eo,"showingPomodoroNotificationInfoWindow",p)}),So.addEventListener("click",function(){mt(bo,"showingFlowmodoroNotificationInfoWindow",p)}),xo.addEventListener("click",function(){mt(Po,"showingFlowTimeBreakNotificationInfoWindow",p)}),Co.addEventListener("click",function(){mt(No,"showingNotesAutoSwitchInfoWindow",p)}),Te.addEventListener("click",function(){mt(Se,"showingPropagateUnfinishedTasksInfoWindow",p)}),zo.addEventListener("mousedown",o=>{p.flowmodoroThumbIsDragging=!0,o.preventDefault()}),Go.addEventListener("mousedown",o=>{p.generalThumbIsDragging=!0,o.preventDefault()}),_o.addEventListener("mousedown",o=>{p.pomodoroThumbIsDragging=!0,o.preventDefault()}),oe.addEventListener("mousedown",o=>{p.flowmodoroThumbIsDragging2=!0,o.preventDefault()}),ne.addEventListener("mousedown",o=>{p.generalThumbIsDragging2=!0,o.preventDefault()}),Xo.addEventListener("mousedown",o=>{p.pomodoroThumbIsDragging2=!0,o.preventDefault()}),document.addEventListener("mousemove",o=>{p.flowmodoroThumbIsDragging?V(Uo,u,zo,$o,oe,Zo,o,p):p.flowmodoroThumbIsDragging2?V(Qo,u,zo,$o,oe,Zo,o,p):p.generalThumbIsDragging?V(Ko,u,Go,Yo,ne,te,o,p):p.generalThumbIsDragging2?V(ee,u,Go,Yo,ne,te,o,p):p.pomodoroThumbIsDragging?V(Vo,u,_o,Ro,Xo,Jo,o,p):p.pomodoroThumbIsDragging2&&V(qo,u,_o,Ro,Xo,Jo,o,p)}),document.addEventListener("mouseup",async o=>{p.flowmodoroThumbIsDragging||p.flowmodoroThumbIsDragging2?("chime"===g.flowmodoro?(j(y,v),W(v,"flowmodoro",u)):"bell"===g.flowmodoro&&(j(y,v),W(y,"flowmodoro",u)),p.flowmodoroThumbIsDragging=!1,p.flowmodoroThumbIsDragging2=!1,A.loggedIn&&await M({chillTime:{alertVolume:u.flowmodoro}})):p.generalThumbIsDragging||p.generalThumbIsDragging2?("chime"===g.general?(j(y,v),W(v,"general",u)):"bell"===g.general&&(j(y,v),W(y,"general",u)),p.generalThumbIsDragging=!1,p.generalThumbIsDragging2=!1,A.loggedIn&&await M({flowTime:{alertVolume:u.general}})):p.pomodoroThumbIsDragging||p.pomodoroThumbIsDragging2?("chime"===g.pomodoro?(j(y,v),W(v,"pomodoro",u)):"bell"===g.pomodoro&&(j(y,v),W(y,"pomodoro",u)),p.pomodoroThumbIsDragging=!1,p.pomodoroThumbIsDragging2=!1,A.loggedIn&&await M({pomodoro:{alertVolume:u.pomodoro}})):"flowmodoroAlert"!==o.target.className&&"generalAlert"!==o.target.className&&"pomodoroAlert"!==o.target.className&&"volume-thumb"!==o.target.className&&"block"===document.getElementById("settingsContainer").style.display&&j(y,v)}),ae.forEach(o=>{o.addEventListener("change",function(o){var e=gt(Math.round(o.target.value));document.getElementById(o.target.id).value=e;let t;var n=[...I.breakTimeSuggestionsArr];wt(o,I,e,f,n),ht(p,f,I),0===f.startStop||p.inHyperFocus?(m.flowmodoroNotificationSeconds=60*f.currentFlowmodoroNotification,t=0):(t=Math.round((Date.now()-c.chillTime)/1e3),m.flowmodoroNotificationSeconds=60*f.currentFlowmodoroNotification-t,H.postMessage("clearInterval"),H.postMessage(m.flowmodoroNotificationSeconds)),(0===f.currentFlowmodoroBreakIndex&&"flowmodoroBreakInput1"===o.target.id||1===f.currentFlowmodoroBreakIndex&&"flowmodoroBreakInput2"===o.target.id||2===f.currentFlowmodoroBreakIndex&&"flowmodoroBreakInput3"===o.target.id||3===f.currentFlowmodoroBreakIndex&&"flowmodoroBreakInput4"===o.target.id)&&r(p,I,t,h),B.textContent=f.currentFlowmodoroNotification+" min"})}),de.forEach(o=>{o.addEventListener("change",async function(o){var e=gt(Math.round(o.target.value));document.getElementById(o.target.id).value=e;let t;var n=[...I.pomodoroIntervalArr];p.inHyperFocus?(t=Math.round((Date.now()-c.hyperFocus)/1e3),"pomodoroInput"===o.target.id&&(p.modeChangeExecuted=!1,a(e,t,h))):(t=Math.round((Date.now()-c.chillTime)/1e3),("shortBreakInput"===o.target.id&&1===f.currentPomodoroIntervalIndex||"longBreakInput"===o.target.id&&2===f.currentPomodoroIntervalIndex)&&(p.modeChangeExecuted=!1,a(e,t,h))),st(o,I,e,f,k,p,n),it(f,I),0===f.startStop?m.pomodoroNotificationSeconds=60*f.currentPomodoroNotification:p.pomodoroNotificationToggle&&(m.pomodoroNotificationSeconds=60*f.currentPomodoroNotification-t,D.postMessage("clearInterval"),D.postMessage(m.pomodoroNotificationSeconds))})}),t.forEach(e=>{e.radios.forEach(o=>{o.addEventListener("change",o=>Le(o,e.type,X,y,v,g,u))})}),[...le,...be].forEach(o=>{o.addEventListener("click",async function(o){var e=o.target.id,t=d.flowtime;document.getElementById(t).classList.remove("selected-background"),i.flowtime=_[e],d.flowtime=e,document.getElementById(o.target.id).classList.add("selected-background"),p.inHyperFocus&&setBackground(i.flowtime),A.loggedIn&&await M({backgroundsThemes:{flowTimeBackground:d.flowtime}})})}),[...ce,...xe].forEach(o=>{o.addEventListener("click",async function(o){var e=o.target.id,t=d.chilltime;document.getElementById(t).classList.remove("selected-background"),i.chilltime=U[e],d.chilltime=e,document.getElementById(o.target.id).classList.add("selected-background"),!p.inHyperFocus&&1<=f.startStop&&setBackground(i.chilltime),A.loggedIn&&await M({backgroundsThemes:{chillTimeBackground:d.chilltime}})})}),ko.addEventListener("click",async function(){ko.checked?p.targetReachedToggle=!0:p.targetReachedToggle=!1,A.loggedIn&&await M({flowTime:{targetTimeReachedToggle:p.targetReachedToggle}})}),E.addEventListener("click",async function(){E.checked?(Ct(E,C,N,p),p.breakSuggestionToggle=!0,p.inHyperFocus?R(h,k,p,"Stop","Flow Time"):R(h,k,p,"Start","Chill Time"),et(f),N.checked&&N.click(),I.suggestionMinutes=To.value,ut(c,p,m,I,l,g,u,v,y,h)):(p.breakSuggestionToggle=!1,O.postMessage("clearInterval"),h.classList.remove("glowing-effect")),A.loggedIn&&await M({flowTime:{notificationToggle:p.breakSuggestionToggle}})}),C.addEventListener("click",async function(){var o;C.checked?(Ct(E,C,N,p),et(f),N.checked&&N.click(),o=Math.floor((Date.now()-c.chillTime)/1e3),p.inHyperFocus||0===f.startStop||(m.flowmodoroNotificationSeconds=60*f.currentFlowmodoroNotification-o,H.postMessage("clearInterval"),H.postMessage(m.flowmodoroNotificationSeconds)),p.flowmodoroNotificationToggle=!0):(p.flowmodoroNotificationToggle=!1,H.postMessage("clearInterval"),h.classList.remove("glowing-effect")),A.loggedIn&&await M({chillTime:{notificationToggle:p.flowmodoroNotificationToggle}}),kt(p,P,B,f)}),N.addEventListener("click",async function(){var o,e;N.checked?(Ct(E,C,N,p),et(f),C.checked&&C.click(),E.checked&&E.click(),o=Math.floor((Date.now()-c.hyperFocus)/1e3),p.inHyperFocus&&(e="Pomodoro #1 | "+String(I.pomodoroIntervalArr[0])+" min",R(h,k,p,"Stop",e),m.pomodoroNotificationSeconds=60*f.currentPomodoroNotification-o,D.postMessage(m.pomodoroNotificationSeconds)),p.pomodoroNotificationToggle=!0):(p.pomodoroNotificationToggle=!1,D.postMessage("clearInterval"),h.classList.remove("glowing-effect"),p.inHyperFocus?R(h,k,p,"Stop","Flow Time"):1<f.startStop&&(R(h,k,p,"Start","Chill Time"),rt(lo),yt(so,P,B,I,f,p))),kt(p,P,B,f),A.loggedIn&&await M({pomodoro:{notificationToggle:p.pomodoroNotificationToggle}})}),Lo.addEventListener("click",async function(){p.autoStartPomodoroInterval?p.autoStartPomodoroInterval&&(p.autoStartPomodoroInterval=!1):(p.autoStartPomodoroInterval=!0,p.modeChangeExecuted=!1),A.loggedIn&&await M({pomodoro:{autoStartPomToggle:p.autoStartPomodoroInterval}})}),Fo.addEventListener("click",async function(){p.autoStartBreakInterval?p.autoStartBreakInterval&&(p.autoStartBreakInterval=!1):(p.autoStartBreakInterval=!0,p.modeChangeExecuted=!1),A.loggedIn&&await M({pomodoro:{autoStartBreakToggle:p.autoStartBreakInterval}})}),Ho.addEventListener("click",async function(){Ho.checked?p.transitionClockSoundToggle=!0:p.transitionClockSoundToggle=!1,A.loggedIn&&await M({sounds:{transitionClockSound:p.transitionClockSoundToggle}})}),Wo.addEventListener("click",async function(){Wo.checked?(p.flowTimeAnimationToggle=!0,p.inHyperFocus&&lt(L,"block")):(p.flowTimeAnimationToggle=!1,p.inHyperFocus&&ct(L)),A.loggedIn&&await M({backgroundsThemes:{flowTimeAnimation:p.flowTimeAnimationToggle}})}),jo.addEventListener("click",async function(){jo.checked?(p.chillTimeAnimationToggle=!0,!p.inHyperFocus&&1<f.startStop&&lt(F,"flex")):(p.chillTimeAnimationToggle=!1,p.inHyperFocus||ct(F)),A.loggedIn&&await M({backgroundsThemes:{chillTimeAnimation:p.chillTimeAnimationToggle}})}),Ao.addEventListener("click",async function(){Oo.classList.remove("selected-background"),Mo.classList.add("selected-background"),p.darkThemeActivated=!1,deactivateDarkTheme(to,uo,go,T,fo,po,Io,vo,yo,$,d,Ie,o),A.loggedIn&&await M({backgroundsThemes:{darkThemeActivated:p.darkThemeActivated}})}),Do.addEventListener("click",async function(){Mo.classList.remove("selected-background"),Oo.classList.add("selected-background"),p.darkThemeActivated=!0,activateDarkTheme(to,uo,go,T,fo,po,Io,vo,yo,ho,wo,$,d,Ie),A.loggedIn&&await M({backgroundsThemes:{darkThemeActivated:p.darkThemeActivated}})}),window.addEventListener("resize",function(){vt(G,Y,o)}),document.addEventListener("visibilitychange",function(){"hidden"===document.visibilityState?p.inHyperFocus?(L.classList.remove("intoOpacityTransition"),L.style.display="none"):(F.classList.remove("intoOpacityTransition"),F.style.display="none"):"visible"===document.visibilityState&&(p.inHyperFocus&&p.flowTimeAnimationToggle?setTimeout(()=>{L.style.display="block",L.classList.add("intoOpacityTransition")},500):!p.inHyperFocus&&p.chillTimeAnimationToggle&&0<f.startStop&&setTimeout(()=>{F.style.display="flex",F.classList.add("intoOpacityTransition")},500))}),me.addEventListener("click",function(){setTimeout(()=>{vt(G,Y,o)},0)}),ue.addEventListener("click",function(){window.location.href="/signup"}),Z.addEventListener("click",function(){p.sessionInProgress=!1,location.reload()}),we.addEventListener("click",async function(){fetch("/api/state/logout",{method:"POST"}).then(()=>{A.loggedIn=!1,window.location.href="/"}).catch(o=>{})}),he.addEventListener("click",async function(){var o,e;o=ve.value,e=ye.value,fetch("/api/api/validateUser",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o,password:e})}).then(o=>{if(o.ok)return o.json();throw alert("Your email or password is incorrect. Please try again."),new Error("HTTP error! Status: "+o.status)}).then(o=>{!0===o.loginSuccess&&Pe()}).catch(o=>{})}),ke.addEventListener("click",function(){window.location.href="/reset-password"}),D.onmessage=function(o){p.modeChangeExecuted||(p.modeChangeExecuted=!0,new Notification(Ne(f,I)),Bt(v,y,g.pomodoro,u.pomodoro),0!==f.currentPomodoroIntervalIndex||p.pomodoroCountIncremented||(f.pomodorosCompleted++,p.pomodoroCountIncremented=!0),c.lastPomNotification=Date.now(),p.inHyperFocus&&p.autoStartBreakInterval||!p.inHyperFocus&&p.autoStartPomodoroInterval?setTimeout(()=>{p.autoSwitchedModes=!0,h.click()},0):h.classList.add("glowing-effect"))},O.onmessage=function(o){p.sentSuggestionMinutesNotification||(ze(I,c,v,y,g,u),p.sentSuggestionMinutesNotification=!0,h.classList.add("glowing-effect"))},H.onmessage=function(o){p.sentFlowmodoroNotification||(Ke(I,f,c,v,y,g,u),p.sentFlowmodoroNotification=!0,h.classList.add("glowing-effect"))},Be.onmessage=function(o){var e=Date.now()-c.local,t=Math.floor(e/s.msPerHour),n=Math.floor((e-t*s.msPerHour)/s.msPerMin),e=Math.floor((e-t*s.msPerHour-n*s.msPerMin)/s.msPerSec),t=String(t).padStart(2,"0"),n=String(n).padStart(2,"0"),e=String(e).padStart(2,"0");oo.textContent=t+`:${n}:`+e,Ce(p,f,c,m,h,K,z,I,w,s,S,b,v,y,g,u,co,mo,H,O)},Ee.onmessage=function(o){jt(c,m,w,s,p,I)},document.dispatchEvent(new Event("defaultSettingsApplied"))});export{setInitialBackgroundCellSelection,setBackground,deactivateDarkTheme,activateDarkTheme};