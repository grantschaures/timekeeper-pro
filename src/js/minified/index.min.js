import{flowtimeBackgrounds as W,chilltimeBackgrounds as O,selectedBackground as d,selectedBackgroundIdTemp as t,selectedBackgroundId as c,timeConvert as u,intervals as j,startTimes as m,recoverBreakState as V,recoverPomState as _,elapsedTime as g,alertVolumes as f,alertSounds as p,counters as h,flags as I,tempStorage as z,settingsMappings as R,savedInterruptionsArr as Z,timeAmount as y,intervalArrs as w,progressTextMod as v,times as $,perHourData as n,catIds as U,lightHtmlBackground as r,darkHtmlBackground as i,tempCounters as Y,pip as T}from"../modules/index-objects.js";import{chimePath as K,bellPath as Q,clock_tick as q,soundMap as k}from"../modules/sound-map.js";import{start_stop_btn as b,submit_change_btn as G,end_session_btn as e,total_time_display as S,productivity_chill_mode as E,progressBarContainer as B,progressBar as J,progressContainer as L,display as X,hyperChillTitle as P,subMainContainer as ee,interruptionsContainer as a,interruptionsSubContainer as oe,decBtn as te,incBtn as ne,interruptionsNum as re,suggestionBreakContainer as ie,suggestionBreak_label as ae,suggestionBreak_min as x,completedPomodorosContainer as se,completedPomodoros_label as le,completedPomodoros_min as de,targetHoursContainer as s,timekeepingContainer as l,popupMenu as ce,settingsContainer as ue,notesContainer as me,aboutContainer as ge,blogContainer as fe,blackFlowtimeBackground as pe,blackChilltimeBackground as he,targetTimeReachedToggle as Ie,breakSuggestionToggle as ye,suggestionMinutesInput as we,flowmodoroNotificationToggle as ve,flowmodoroNotifications as Te,flowmodoroNotificationInfoWindow as ke,flowTimeBreakNotification as be,flowTimeBreakNotificationInfoWindow as Se,pomodoroNotifications as Ee,pomodoroNotificationInfoWindow as Be,notesAutoSwitch as Le,notesAutoSwitchInfoWindow as Pe,pomodoroNotificationToggle as C,autoStartPomodoroIntervalToggle as xe,autoStartBreakIntervalToggle as Ce,defaultThemeContainer as Ne,defaultTheme as Me,darkThemeContainer as Ae,darkGrayTheme as Fe,transitionClockSoundToggle as De,flowTimeAnimationToggle as He,chillTimeAnimationToggle as We,pomodoroVolumeContainer as Oe,pomodoroVolumeBar as je,pomodoroVolumeThumb as Ve,flowmodoroVolumeContainer as _e,flowmodoroVolumeBar as ze,flowmodoroVolumeThumb as Re,generalVolumeContainer as Ze,generalVolumeBar as $e,generalVolumeThumb as Ue,pomodoroVolumeContainer2 as Ye,pomodoroVolumeBar2 as Ke,pomodoroVolumeThumb2 as Qe,flowmodoroVolumeContainer2 as qe,flowmodoroVolumeBar2 as Ge,flowmodoroVolumeThumb2 as Je,generalVolumeContainer2 as Xe,generalVolumeBar2 as eo,generalVolumeThumb2 as oo,flowmodoroRadios as to,flowmodoroInputs as no,generalRadios as ro,pomodoroInputs as io,pomodoroRadios as ao,flowtimeBackgroundCells as so,chilltimeBackgroundCells as lo,settings_menu_container as co,registerHereText as uo,flowAnimation as mo,chillAnimation as N,createLabelInput as go,updateLabelInput as fo,emojiContainer as po,loginEmailInput as ho,loginPasswordInput as Io,loginBtn as yo,logoutBtn as wo,forgotPasswordSettings as vo,propagateUnfinishedTasks as To,propagateUnfinishedTasksInfoWindow as ko,flowtimeBackgroundWorldCells as bo,chilltimeBackgroundWorldCells as So,popupOverlay as Eo,logoutBtn2 as Bo,deepWorkBackground as Lo,breakBackground as Po,streaksContainer as M,streaksLoginSuggestionPopup as xo,previousSessionStartedOkBtn as Co,previousSessionStartedPopup as No,invalidatePreviousSessionInput as Mo,quitCurrentSessionInput as Ao,toggleIntervalTime as Fo,intervalTimeInfoWindow as Do,toggleTotalTime as Ho,totalTimeInfoWindow as Wo,intervalTimeToggle as Oo,totalTimeToggle as jo,stopwatch as Vo,muffinInfoWindow as _o,toggleMuffin as zo,cats as Ro,zzz as Zo,darkContainer as $o,lightContainer as Uo,flowmodoroBtnContainer as Yo,popupQuestionMenu as Ko,supportEmail as Qo,openEyeContainer as qo,closedEyeContainer as Go,timestampsHeader as Jo,timestampsInfoWindow as Xo}from"../modules/dom-elements.js";import{flags as et}from"../modules/dashboard-objects.js";import{sessionState as A}from"../modules/state-objects.js";import{state as ot,flags as tt}from"../modules/navigation-objects.js";import{labelFlags as nt,labelArrs as rt}from"../modules/notes-objects.js";import{initializeGUI as it}from"../utility/initialize-gui.js";import{userAgent as at,userDevice as st,userTimeZone as lt}from"../utility/identification.js";import{updateUserSettings as F}from"../state/update-settings.js";import{updateTargetHours as dt}from"../state/update-target-hours.js";import{updateShowingTimeLeft as ct}from"../state/update-showing-time-left.js";import{lastIntervalSwitch as ut}from"../state/last-interval-switch.js";import{checkSession as mt}from"../state/check-session.js";import{updateInvaliDate as gt}from"../state/update-invaliDate.js";import{initialVisualReset as ft,sessionReset as pt}from"./end-session.js";import{hideDashboardCat as ht}from"./navigation.js";let pomodoroWorker=new Worker("/js/web-workers/pomodoroWorker.js"),suggestionWorker=new Worker("/js/web-workers/suggestionWorker.js"),flowmodoroWorker=new Worker("/js/web-workers/flowmodoroWorker.js"),displayWorker=new Worker("/js/web-workers/displayWorker.js"),totalDisplayWorker=new Worker("/js/web-workers/totalDisplayWorker.js"),observer=new MutationObserver(Bn);async function It(){jo.checked=!1,Oo.checked=!1,totalTimeToggleGUIUpdate(),intervalTimeToggleGUIUpdate(),A.loggedIn&&await F({display:{intervalTime:I.intervalTimeToggle,totalTime:I.totalTimeToggle}})}async function yt(){jo.checked=!0,Oo.checked=!0,totalTimeToggleGUIUpdate(),intervalTimeToggleGUIUpdate(),A.loggedIn&&await F({display:{intervalTime:I.intervalTimeToggle,totalTime:I.totalTimeToggle}})}async function wt(e){Fe.classList.remove("selected-background"),Me.classList.add("selected-background"),I.darkThemeActivated=!1,deactivateDarkTheme(a,s,l,B,ce,ue,me,ge,fe,t,c,po,e,M,r),Uo.style.display="none",$o.style.display="flex",A.loggedIn&&await F({backgroundsThemes:{darkThemeActivated:I.darkThemeActivated}})}async function vt(e){Fe.classList.add("selected-background"),Me.classList.remove("selected-background"),I.darkThemeActivated=!0,activateDarkTheme(a,s,l,B,ce,ue,me,ge,fe,pe,he,t,c,po,M,i),$o.style.display="none",Uo.style.display="flex",A.loggedIn&&await F({backgroundsThemes:{darkThemeActivated:I.darkThemeActivated}})}function hideCat(e,o){I.muffinToggle&&(Tt(e,o),kt(o))}function Tt(e,o){document.getElementById([e[o.catIdsArrIndex]]).style.display="none",document.getElementById([e[o.catIdsArrIndex]]).style.opacity="0"}function kt(e){8===e.catIdsArrIndex?e.catIdsArrIndex=0:e.catIdsArrIndex++}function displayCat(e,o){I.muffinToggle&&!I.pipWindowOpen&&!I.inHyperFocus&&0<o.startStop&&(document.getElementById([e[o.catIdsArrIndex]]).style.display="block",setTimeout(()=>{document.getElementById([e[o.catIdsArrIndex]]).style.opacity="1"},0))}function bt(o){for(let e=o.length-1;0<e;e--){var t=Math.floor(Math.random()*(e+1));[o[e],o[t]]=[o[t],o[e]]}return o}function totalTimeToggleGUIUpdate(){jo.checked?(I.totalTimeToggle=!0,S.style.display="block"):(I.totalTimeToggle=!1,S.style.display="none"),St()}function intervalTimeToggleGUIUpdate(){Oo.checked?(I.intervalTimeToggle=!0,l.style.height="350px",Vo.style.display="block"):(I.intervalTimeToggle=!1,l.style.height="150px",Vo.style.display="none"),St()}function St(){I.totalTimeToggle||I.intervalTimeToggle?(qo.style.display="flex",Go.style.display="none"):(qo.style.display="none",Go.style.display="flex")}function Et(e,o){I.modeChangeExecuted||(I.modeChangeExecuted=!0,e||o||new Notification(Mt(h,y)),yn(k.Chime,k.Bell,p.pomodoro,f.pomodoro),0!==h.currentPomodoroIntervalIndex||I.pomodoroCountIncremented||(h.pomodorosCompleted++,I.pomodoroCountIncremented=!0),m.lastPomNotification=Date.now(),I.inHyperFocus&&I.autoStartBreakInterval||!I.inHyperFocus&&I.autoStartPomodoroInterval?setTimeout(()=>{b.click()},0):b.classList.add("glowing-effect"))}function Bt(){var e=Date.now(),o=new Date(e),t=new Date(o.getFullYear(),o.getMonth(),o.getDate(),o.getHours()),o=new Date(o.getFullYear(),o.getMonth(),o.getDate(),o.getHours()-1);Lt(e,t)&&updateDataPerHour(w,t,o,n)}function Lt(e,o){return e-o.getTime()<=1e3}function updateDataPerHour(o,t,n,r){if(!(t<=new Date(m.beginning)||r[n.toISOString()])){var i=Pt(o.transitionTime,t,n),t=xt(o.interruptionTime,t,n);let e;t={inDeepWork:e=0<i,distractions:t,deepWorkTime:i},i=(r[n.toISOString()]=t,n),t=new Date(n);t.setHours(t.getHours()-1),updateDataPerHour(o,i,t,r)}}function Pt(e,o,t){let n=!1;var r=[],i=o.getTime(),a=t.getTime();let s=0,l=0;for(;e[s]<i&&s<e.length;)e[s]>=a&&(s%2==1?n?(r.push(e[s]-e[s-1]),n=!1):r.push(e[s]-a):n=!0),l=s,s++;return e[l]<i&&l%2==0&&(e[l]<a?r.push(i-a):r.push(i-e[l])),r.reduce((e,o)=>e+o,0)}function xt(e,o,t){var n=o.getTime(),r=t.getTime();let i=0,a=0;for(;e[a]<n&&a<e.length;)e[a]>=r&&i++,a++;return i}async function Ct(){A.loggedIn&&(1===h.startStop&&await mt(),await xn(h.startStop,$.start))}function updateLabelArrs(e,o,t){for(var n in o)t[n]||(t[n]=[]),o[n]&&t[n].push(e)}function Nt(e,o,t,n,r,i,a,flowmodoroWorker,suggestionWorker,s,l){e.pomodoroNotificationToggle?60*o.currentPomodoroNotification*1e3<1e3*Math.floor((Date.now()-t.local)/1e3)+1e3&&!e.modeChangeExecuted&&Kt(s,l):(e.flowmodoroNotificationToggle&&!e.inHyperFocus&&60*o.currentFlowmodoroNotification*1e3<1e3*Math.floor((Date.now()-t.local)/1e3)+1e3&&!e.sentFlowmodoroNotification&&(flowmodoroWorker.postMessage("clearInterval"),Ut(r,o,t,i,a,s,l),e.sentFlowmodoroNotification=!0,n.classList.add("glowing-effect")),e.breakSuggestionToggle&&e.inHyperFocus&&60*r.suggestionMinutes*1e3<1e3*Math.floor((Date.now()-t.local)/1e3)+1e3&&!e.sentSuggestionMinutesNotification&&(suggestionWorker.postMessage("clearInterval"),$t(r,t,i,a,s,l),e.sentSuggestionMinutesNotification=!0,n.classList.add("glowing-effect")))}function Mt(e,o){let t;return t=I.inHyperFocus&&6!==e.currentPomodoroIntervalOrderIndex?1==o.pomodoroIntervalArr[e.currentPomodoroIntervalIndex]?"It's been "+e.currentPomodoroNotification+" minute! Are you ready to take a short break?":"It's been "+e.currentPomodoroNotification+" minutes! Are you ready to take a short break?":6==e.currentPomodoroIntervalOrderIndex?1==o.pomodoroIntervalArr[e.currentPomodoroIntervalIndex]?"It's been "+e.currentPomodoroNotification+" minute! Are you ready to take a long break?":"It's been "+e.currentPomodoroNotification+" minutes! Are you ready to take a long break?":1==o.pomodoroIntervalArr[e.currentPomodoroIntervalIndex]?"It's been "+e.currentPomodoroNotification+" minute! Are you ready to start your Pomodoro Interval?":"It's been "+e.currentPomodoroNotification+" minutes! Are you ready to start your Pomodoro Interval?"}function At(e,o,t,n,r){let i=e["target"];Object.keys(t).forEach(e=>{i.id!==""+o+e+"Input"&&i.id!==""+o+e+"Input2"||(pauseAndResetAlertSounds(t.Bell,t.Chime),n[o]="NoAlert"===e?"none":e.toLowerCase(),"NoAlert"!==e?(nn(t[e],o,r),document.getElementById(""+o+e+"Input").checked=!0,document.getElementById(""+o+e+"Input2").checked=!0):(document.getElementById(o+"NoAlertInput").checked=!0,document.getElementById(o+"NoAlertInput2").checked=!0),Ft(o,e))})}async function Ft(e,o){let t;t="bell"===o.toLowerCase()||"chime"===o.toLowerCase()?o.toLowerCase():"none",A.loggedIn&&("flowmodoro"===e?await F({chillTime:{alertSound:t}}):"general"===e?await F({flowTime:{alertSound:t}}):await F({pomodoro:{alertSound:t}}))}function Dt(e,o,t,n,pomodoroWorker){o.pomodoroNotificationSeconds=60*t.currentPomodoroNotification,pomodoroWorker.postMessage("clearInterval"),pomodoroWorker.postMessage(o.pomodoroNotificationSeconds)}function Ht(e,o,t,n,flowmodoroWorker,suggestionWorker){e.inHyperFocus?(e.breakSuggestionToggle&&(o.suggestionSeconds=60*n.suggestionMinutes,suggestionWorker.postMessage(o.suggestionSeconds)),e.flowmodoroNotificationToggle&&flowmodoroWorker.postMessage("clearInterval")):(e.flowmodoroNotificationToggle&&(o.flowmodoroNotificationSeconds=60*t.currentFlowmodoroNotification,flowmodoroWorker.postMessage(o.flowmodoroNotificationSeconds)),e.breakSuggestionToggle&&suggestionWorker.postMessage("clearInterval"))}function Wt(e,o){let t;return t=1===e.currentPomodoroIntervalOrderIndex?"Short Break #1 | "+String(o.pomodoroIntervalArr[1])+" min":3===e.currentPomodoroIntervalOrderIndex?"Short Break #2 | "+String(o.pomodoroIntervalArr[1])+" min":5===e.currentPomodoroIntervalOrderIndex?"Short Break #3 | "+String(o.pomodoroIntervalArr[1])+" min":7===e.currentPomodoroIntervalOrderIndex?"Long Break | "+String(o.pomodoroIntervalArr[2])+" min":"Break Mode"}function Ot(e,o,t,n,pomodoroWorker){o.pomodoroNotificationSeconds=60*t.currentPomodoroNotification,pomodoroWorker.postMessage("clearInterval"),pomodoroWorker.postMessage(o.pomodoroNotificationSeconds)}function jt(e,o){let t;return t=1===e.currentPomodoroIntervalOrderIndex?"Short Break #1 | "+String(o.pomodoroIntervalArr[1])+" min":3===e.currentPomodoroIntervalOrderIndex?"Short Break #2 | "+String(o.pomodoroIntervalArr[1])+" min":5===e.currentPomodoroIntervalOrderIndex?"Short Break #3 | "+String(o.pomodoroIntervalArr[1])+" min":"Break Mode"}function Vt(e,o){let t;return t=0===e.currentPomodoroIntervalOrderIndex?"Pomodoro #1 | "+String(o.pomodoroIntervalArr[0])+" min":2===e.currentPomodoroIntervalOrderIndex?"Pomodoro #2 | "+String(o.pomodoroIntervalArr[0])+" min":4===e.currentPomodoroIntervalOrderIndex?"Pomodoro #3 | "+String(o.pomodoroIntervalArr[0])+" min":6===e.currentPomodoroIntervalOrderIndex?"Pomodoro #4 | "+String(o.pomodoroIntervalArr[0])+" min":"Pomodoro Mode"}function _t(e,o,t){animationsFadeOut(o),e.chillTimeAnimationToggle&&animationsFadeIn(t,"flex")}function zt(e,o,t,n){1<e.startStop&&animationsFadeOut(t),o.flowTimeAnimationToggle&&animationsFadeIn(n,"block")}function Rt(e,o,t,n){o.local=Date.now()}function Zt(e,o,t){e.pomodoroNotificationToggle&&"Break"!==o.textContent&&Jt(t)}function $t(e,o,t,n,r,i){let a;a=1<e.suggestionMinutes?"Need a break? You've been hard at work for "+String(e.suggestionMinutes)+" minutes!":"Need a break? You've been hard at work for "+String(e.suggestionMinutes)+" minute!",r||i||new Notification(a),o.lastBreakSuggestionNotification=Date.now(),yn(k.Chime,k.Bell,t.general,n.general)}function Ut(e,o,t,n,r,i,a){let s;s=1==e.breakTimeSuggestionsArr[o.currentFlowmodoroBreakIndex]?"It's been "+o.currentFlowmodoroNotification+" minute! Are you ready to get back into Flow Time?":"It's been "+o.currentFlowmodoroNotification+" minutes! Are you ready to get back into Flow Time?",i||a||new Notification(s),t.lastFlowmodoroNotification=Date.now(),yn(k.Chime,k.Bell,n.flowmodoro,r.flowmodoro)}function Yt(e,o,t,n,r,i,a,s){let l;0==o.currentPomodoroIntervalOrderIndex||2==o.currentPomodoroIntervalOrderIndex||4==o.currentPomodoroIntervalOrderIndex?(l=1==t.pomodoroIntervalArr[o.currentPomodoroIntervalIndex]?"It's been "+o.currentPomodoroNotification+" minute! Are you ready to take a short break?":"It's been "+o.currentPomodoroNotification+" minutes! Are you ready to take a short break?",i.pomodoroCountIncremented||(o.pomodorosCompleted++,i.pomodoroCountIncremented=!0)):6==o.currentPomodoroIntervalOrderIndex?(l=1==t.pomodoroIntervalArr[o.currentPomodoroIntervalIndex]?"It's been "+o.currentPomodoroNotification+" minute! Are you ready to take a long break?":"It's been "+o.currentPomodoroNotification+" minutes! Are you ready to take a long break?",i.pomodoroCountIncremented||(o.pomodorosCompleted++,i.pomodoroCountIncremented=!0)):l=1==t.pomodoroIntervalArr[o.currentPomodoroIntervalIndex]?"It's been "+o.currentPomodoroNotification+" minute! Are you ready to start your Pomodoro Interval?":"It's been "+o.currentPomodoroNotification+" minutes! Are you ready to start your Pomodoro Interval?",a||s||new Notification(l),yn(k.Chime,k.Bell,n.pomodoro,r.pomodoro),e.lastPomNotification=Date.now()}function Kt(e,o){Et(e,o),pomodoroWorker.postMessage("clearInterval")}function Qt(e){e.currentPomodoroIntervalIndex=0,e.currentPomodoroIntervalOrderIndex=0}function qt(e,o,t){e.textContent="Pomodoros",o.textContent=t.pomodorosCompleted}function Gt(e,o,t,n){e.style.display="flex",qt(o,t,n)}function hidePomodorosCompletedContainer(e){e.style.display="none"}function Jt(e){7===e.currentPomodoroIntervalOrderIndex?e.currentPomodoroIntervalOrderIndex=0:e.currentPomodoroIntervalOrderIndex++}function Xt(e,o){0===e.currentPomodoroIntervalOrderIndex||2===e.currentPomodoroIntervalOrderIndex||4===e.currentPomodoroIntervalOrderIndex||6===e.currentPomodoroIntervalOrderIndex?(e.currentPomodoroIntervalIndex=0,e.currentPomodoroNotification=o.pomodoroIntervalArr[e.currentPomodoroIntervalIndex]):1===e.currentPomodoroIntervalOrderIndex||3===e.currentPomodoroIntervalOrderIndex||5===e.currentPomodoroIntervalOrderIndex?(e.currentPomodoroIntervalIndex=1,e.currentPomodoroNotification=o.pomodoroIntervalArr[e.currentPomodoroIntervalIndex]):7===e.currentPomodoroIntervalOrderIndex&&(e.currentPomodoroIntervalIndex=2,e.currentPomodoroNotification=o.pomodoroIntervalArr[e.currentPomodoroIntervalIndex])}async function en(e,o,t,n,r,i,a){"pomodoroInput"===e.target.id?(a[0]=t,o.pomodoroIntervalArr[0]=t,0===n.currentPomodoroIntervalIndex&&0!==n.startStop&&i.pomodoroNotificationToggle&&i.inHyperFocus&&(r.innerText=Vt(n,o))):"shortBreakInput"===e.target.id?(a[1]=t,o.pomodoroIntervalArr[1]=t,1===n.currentPomodoroIntervalIndex&&0!==n.startStop&&i.pomodoroNotificationToggle&&(r.innerText=jt(n,o))):"longBreakInput"===e.target.id&&(a[2]=t,o.pomodoroIntervalArr[2]=t,2===n.currentPomodoroIntervalIndex)&&0!==n.startStop&&i.pomodoroNotificationToggle&&(r.innerText="Long Break | "+String(o.pomodoroIntervalArr[2])+" min"),A.loggedIn&&await F({pomodoro:{intervalArr:a}})}function D(e,o,t){var n=t[o];n?e.classList.remove("infoWindowOpacity"):e.classList.add("infoWindowOpacity"),t[o]=!n}function on(e,o,t,n){e=Math.floor((Date.now()-e.hyperFocus)/1e3);o.inHyperFocus?(t.suggestionSeconds=60*n.suggestionMinutes-e,suggestionWorker.postMessage("clearInterval"),suggestionWorker.postMessage(t.suggestionSeconds)):t.suggestionSeconds=60*n.suggestionMinutes}function tn(e){return 720<e?e=720:(e<1||isNaN(e)||void 0===e)&&(e=1),e}function nn(e,o,t){"flowmodoro"===o?e.volume=t.flowmodoro:"general"===o?e.volume=t.general:"pomodoro"===o&&(e.volume=t.pomodoro),e.play()}function pauseAndResetAlertSounds(e,o){e.pause(),e.currentTime=0,o.pause(),o.currentTime=0}async function o(e,o,t,n,r,i,a,s){e=e.getBoundingClientRect(),a=(a.clientX-e.left)/e.width,a=Math.max(0,Math.min(1,a));t.style.left=100*a+"%",n.style.width=100*a+"%",r.style.left=100*a+"%",i.style.width=100*a+"%",s.flowmodoroThumbIsDragging||s.flowmodoroThumbIsDragging2?o.flowmodoro=a:s.generalThumbIsDragging||s.generalThumbIsDragging2?o.general=a:(s.pomodoroThumbIsDragging||s.pomodoroThumbIsDragging2)&&(o.pomodoro=a)}function H(e,o){I[o]=!0,e.preventDefault()}function rn(e){"touchmove"===e.type&&(e=e.touches[0]),I.flowmodoroThumbIsDragging?o(_e,f,Re,ze,Je,Ge,e,I):I.flowmodoroThumbIsDragging2?o(qe,f,Re,ze,Je,Ge,e,I):I.generalThumbIsDragging?o(Ze,f,Ue,$e,oo,eo,e,I):I.generalThumbIsDragging2?o(Xe,f,Ue,$e,oo,eo,e,I):I.pomodoroThumbIsDragging?o(Oe,f,Ve,je,Qe,Ke,e,I):I.pomodoroThumbIsDragging2&&o(Ye,f,Ve,je,Qe,Ke,e,I)}function an(e){"touchend"===e.type&&(e=e.changedTouches[0]),I.flowmodoroThumbIsDragging||I.flowmodoroThumbIsDragging2?sn("flowmodoro","flowmodoroThumbIsDragging","flowmodoroThumbIsDragging2"):I.generalThumbIsDragging||I.generalThumbIsDragging2?sn("general","generalThumbIsDragging","generalThumbIsDragging2"):I.pomodoroThumbIsDragging||I.pomodoroThumbIsDragging2?sn("pomodoro","pomodoroThumbIsDragging","pomodoroThumbIsDragging2"):"flowmodoroAlert"!==e.target.className&&"generalAlert"!==e.target.className&&"pomodoroAlert"!==e.target.className&&"volume-thumb"!==e.target.className&&"block"===document.getElementById("settingsContainer").style.display&&pauseAndResetAlertSounds(k.Bell,k.Chime)}async function sn(e,o,t){"chime"===p[e]?(pauseAndResetAlertSounds(k.Bell,k.Chime),nn(k.Chime,e,f)):"bell"===p[e]&&(pauseAndResetAlertSounds(k.Bell,k.Chime),nn(k.Bell,e,f)),I[o]=!1,I[t]=!1,A.loggedIn&&((o={})["pomodoro"===e?"pomodoro":"general"===e?"flowTime":"chillTime"]={alertVolume:f[e]},await F(o))}function ln(e){for(var[o,t]of Object.entries(e))document.getElementById(t).style.display="none",document.getElementById(o).classList.remove("selected")}function dn(e){for(var[o,t]of Object.entries(e))document.getElementById(t).style.display="block"}function handleViewportWidthChange(t,e){var o=window.innerWidth||document.documentElement.clientWidth;if(o<=650)dn(t);else{for(let[e,o]of Object.entries(t))document.getElementById(e).addEventListener("click",function(){ln(t),document.getElementById(o).style.display="block",this.classList.add("selected")});"block"===document.getElementById("settingsContainer").style.display&&document.getElementById(e.lastSettingsSelectionId).click()}5===Y.dashboardCatIdsArrIndex&&(o<=670&&et.calendarPopupShowing?document.getElementById("dashboardCat6").style.display="none":document.getElementById("dashboardCat6").style.display="flex")}function cn(e,o,t,n,r,i){e.style.display="flex",un(i,r,n),gn(i,o,t,r)}function un(e,o,t){90<=e.lastHyperFocusIntervalMin?o.currentFlowmodoroNotification=t.breakTimeSuggestionsArr[3]:50<=e.lastHyperFocusIntervalMin?o.currentFlowmodoroNotification=t.breakTimeSuggestionsArr[2]:25<=e.lastHyperFocusIntervalMin?o.currentFlowmodoroNotification=t.breakTimeSuggestionsArr[1]:o.currentFlowmodoroNotification=t.breakTimeSuggestionsArr[0]}async function mn(e,o,t,n,r){"flowmodoroBreakInput1"===e.target.id?(r[0]=t,o.breakTimeSuggestionsArr[0]=t,n.currentFlowmodoroBreakIndex=0):"flowmodoroBreakInput2"===e.target.id?(r[1]=t,o.breakTimeSuggestionsArr[1]=t,n.currentFlowmodoroBreakIndex=1):"flowmodoroBreakInput3"===e.target.id?(r[2]=t,o.breakTimeSuggestionsArr[2]=t,n.currentFlowmodoroBreakIndex=2):"flowmodoroBreakInput4"===e.target.id&&(r[3]=t,o.breakTimeSuggestionsArr[3]=t,n.currentFlowmodoroBreakIndex=3),A.loggedIn&&await F({chillTime:{intervalArr:r}})}function gn(e,o,t,n){e.flowmodoroNotificationToggle?o.textContent="ðŸ”” Break":o.textContent="Suggested Break",t.textContent=n.currentFlowmodoroNotification+" min"}function hideSuggestionBreakContainer(e,o){e.style.display="none"}function fn(e){e.style.display="none"}function showInterruptionsSubContainer(e){e.style.display="flex"}function pn(e,o,t){t.push(o.interruptions),hn(o,e)}function hn(e,o){e.interruptions=0,o.textContent=e.interruptions}function In(){var e=Date.now(),e=new Date(e);return(e.getHours()%12||12)+`:${String(e.getMinutes()).padStart(2,"0")} `+(12<=e.getHours()?"PM":"AM")}function yn(e,o,t,n){pauseAndResetAlertSounds(k.Bell,k.Chime),"chime"===t?(e.volume=n,e.play().then(()=>{}).catch(e=>{})):"bell"===t&&(o.volume=n,o.play().then(()=>{}).catch(e=>{}))}async function wn(){return"Notification"in window?"denied"===Notification.permission||"granted"===await Notification.requestPermission():(alert("This browser does not support push notifications"),!1)}async function vn(e,o,t){e.submittedTarget=!1,t.targetTime=null,document.getElementById("target-hours").remove();e=document.createElement("input");e.type="number",e.id="target-hours",e.name="hours",e.min="0",e.value="",document.getElementById("coolDiv").appendChild(e),e.focus(),document.getElementById("target-hours-submit").textContent="Submit",o.loggedIn&&await dt(0)}function Tn(e,o,t,n,r,i){var a=Math.round(100*parseFloat(e))/100;return!(!e||a<=0||24<a||60*a*60*1e3<=getTotalElapsed(r,n.hyperFocus,t))||(0!==i.startStop?r.inHyperFocus?alert("Enter a valid target time between "+Math.ceil(100*parseFloat((n.hyperFocus+(Date.now()-t.local))/o.msPerHour))/100+" hours and 24 hours"):r.inHyperFocus||alert("Enter a valid target time between "+Math.ceil(100*parseFloat(n.hyperFocus/o.msPerHour))/100+" hours and 24 hours"):0===i.startStop&&alert("Enter a valid target time between 0.01 hours and 24 hours"),!1)}function setButtonTextAndMode(e,o,t,n){e.innerText=t,o.innerHTML=`<b>${n}</b>`}function updateProgressBar(o,t,n,r,i,a){if(isNaN(o.targetTime)||null===o.targetTime||!r.submittedTarget)i.classList.contains("fullopacity1")&&(i.classList.remove("fullopacity1"),setTimeout(()=>{i.style.width="0%"},500));else{i.classList.contains("fullopacity1")||i.classList.add("fullopacity1");let e=getTotalElapsed(r,n.hyperFocus,t)/o.targetTime;1<e&&(e=1),0!==o.targetTime&&1<=e&&!r.hitTarget&&(r.hitTarget=!0,setTimeout(()=>{1==r.targetReachedToggle&&new Notification("Congrats! You've hit your target time!")},1),a.classList.add("glowing-effect")),i.style.width=100*e+"%"}}function resetDisplay(e){e.innerText="00:00:00"}function kn(e,o,t,n,r){var i=Date.now();hn(n,r),e.beginning=i,t.start=i,o.sessionInProgress=!0,Ln(),document.getElementById("target-hours").classList.remove("glowing-effect")}function bn(e,o){1==o.transitionClockSoundToggle&&(e.volume=.25,e.play())}function Sn(e,o,t,n,r,i){"Enter"!==e.key||i.enterKeyDown||"home"!==ot.lastSelectedMode?"ArrowLeft"!==e.key&&e.key:(e.preventDefault(),i.enterKeyDown=!0,"target-hours"===document.activeElement.id?t.click():document.activeElement===Io?yo.click():document.activeElement===n||document.activeElement===r||"noteInput"==document.activeElement.className||"note-task-input-text"==document.activeElement.id||"note-task-input-text-edit"===document.activeElement.id||tt.sessionSummaryPopupShowing||tt.sessionSummarySignupPromptPopupShowing||o.click())}function En(e,o){"Enter"===e.key&&o.enterKeyDown&&(o.enterKeyDown=!1)}function returnTotalTimeString(e,o){var t=Math.floor(e/o.msPerHour),n=Math.floor((e-t*o.msPerHour)/o.msPerMin),e=Math.floor((e-t*o.msPerHour-n*o.msPerMin)/o.msPerSec);return String(t)+" hours, "+String(n)+" minutes, "+String(e)+" seconds"}function getTotalElapsed(e,o,t){return e.inHyperFocus?o+(Date.now()-t.local):o}function Bn(){I.pipWindowOpen?document.title=T.window.document.getElementById("display").innerText:document.title=document.getElementById("display").innerText}function Ln(){I.pipWindowOpen?(document.title=T.window.document.getElementById("display").innerText,observer.observe(T.window.document.getElementById("display"),{childList:!0,subtree:!0,characterData:!0})):(document.title=document.getElementById("display").innerText,observer.observe(document.getElementById("display"),{childList:!0,subtree:!0,characterData:!0}))}function setFavicon(e){var o=document.getElementById("favicon1"),t=document.getElementById("favicon2");o.href=e,t.href=e}function Pn(e){var o=document.getElementById("mainContainer"),t=document.createElement("div");t.style.width="50px",t.style.height="50px",t.style.backgroundColor=e,t.style.position="absolute",t.style.innerText="Debugging Square",t.style.top="500px",t.style.left="100px",o.appendChild(t)}async function xn(e,o){await ut(e,o)}function triggerSilentAlertAudioMobile(e,o,t,n,r){r.triggeredSilentAudio||(e.volume=0,o.volume=0,e.muted=!0,o.muted=!0,e.play().then(()=>{e.pause(),e.muted=!1,e.currentTime=0}).catch(e=>{}),o.play().then(()=>{o.pause(),o.muted=!1,o.currentTime=0}).catch(e=>{}),t=new Audio(t),n=new Audio(n),k.Chime=t,k.Bell=n,r.triggeredSilentAudio=!0)}function setInitialBackgroundCellSelection(){document.getElementById(c.flowtime).classList.add("selected-background"),document.getElementById(c.chilltime).classList.add("selected-background")}function setBackground(e,o){I.inHyperFocus?(Po.style.opacity=0,Lo.style.backgroundImage=e,Lo.style.opacity=o):(Po.style.backgroundImage=e,Po.style.opacity=1),I.pipWindowOpen&&(T.window.document.body.style.backgroundImage=e)}function deactivateDarkTheme(e,o,t,n,r,i,a,s,l,d,c,u,m,g,f){let p="rgba(0, 0, 0, 0.9)";var h="rgb(0, 0, 0)";[e,o,t,a,s,l,g].forEach(function(e){e.style.backgroundColor=p,e!==g&&(e.style.border=null)}),r.style.backgroundColor=m?h:p,r.style.border=null,a.style.marginTop="0px",n.style.backgroundColor="rgba(255, 255, 255, 0.25)",n.style.border="1px rgba(0, 0, 0, 0.25)",i.style.backgroundColor=h,u.style.backgroundColor="#000000",u.style.border="5px solid #FFFFFF",document.documentElement.style.backgroundImage=f,I.pipWindowOpen&&(T.window.document.body.style.backgroundImage=""),"black-flowtime"===c.flowtime&&"black-chilltime"===c.chilltime&&(document.getElementById(d.flowtime).click(),document.getElementById(d.chilltime).click())}async function activateDarkTheme(e,o,t,n,r,i,a,s,l,d,c,u,m,g,f,p){r=[r,i,g];[e,o,t,n,a,s,l,f].forEach(function(e){e.style.backgroundColor="rgba(32, 32, 32, 0.9)",e.style.border="3px solid rgb(255, 255, 255)"}),r.forEach(function(e){e.style.backgroundColor="rgba(32, 32, 32, 1)"}),g.style.border="5px solid white",a.style.marginTop="-3px",document.documentElement.style.backgroundImage=p,A.updatingState||(u.flowtime=m.flowtime,u.chilltime=m.chilltime,i="linear-gradient(90deg, #202020, #202020, #202020)",(I.inHyperFocus||!I.inHyperFocus&&1<=h.startStop)&&setBackground(i,1),I.pipWindowOpen&&(T.window.document.body.style.backgroundImage="linear-gradient(90deg, #202020, #202020, #202020)"),A.loggedIn&&await F({backgroundsThemes:{flowTimeBackgroundTemp:m.flowtime,chillTimeBackgroundTemp:m.chilltime}}),d.click(),c.click())}function replaceTargetHours(e,o,t){e=Math.round(100*parseFloat(e))/100,o.targetTime=60*e*60*1e3,document.getElementById("target-hours").remove(),o=document.createElement("h4");return o.textContent=e,o.id="target-hours",o.className="finalized-hours",o.style.backgroundColor="#5c5c5c",document.getElementById("coolDiv").appendChild(o),document.getElementById("target-hours-submit").textContent="Change",t.submittedTarget=!0,e}function totalTimeDisplay(t,n,r,i,a,s,l){var n=1e3*Math.round(getTotalElapsed(a,n.hyperFocus,t)/1e3),t=(864e5<=n&&setTimeout(()=>{e.click()},0),Math.floor(n/i.msPerHour)),d=Math.floor((n-t*i.msPerHour)/i.msPerMin),c=Math.floor((n-t*i.msPerHour-d*i.msPerMin)/i.msPerSec),t=String(t).padStart(2,"0"),d=String(d).padStart(2,"0"),c=String(c).padStart(2,"0");if(a.submittedTarget){let e=n/s.targetTime;1<e&&(e=1);var u=t+`:${d}:`+c+" ("+Math.trunc(100*e)+"%) completed",n=(l.defaultTimeStr=u,s.targetTime-n),m=Math.floor(n/i.msPerHour),g=Math.floor((n-m*i.msPerHour)/i.msPerMin),i=Math.ceil((n-m*i.msPerHour-g*i.msPerMin)/i.msPerSec),m=String(m).padStart(2,"0"),g=String(g).padStart(2,"0"),i=String(i).padStart(2,"0");let o;n=n/s.targetTime;o=a.hitTarget?"00:00:00 (0%) remaining":`${m}:${g}:${i} (${Math.ceil(100*n)}%) remaining`,l.targetTimeLeftStr=o,l.showingTimeLeft?r.textContent=o:r.textContent=u}else r.textContent=t+`:${d}:`+c}async function animationsFadeIn(e,o){"home"===ot.lastSelectedMode&&(e.classList.add("intoOpacityTransition"),e.style.display=o)}function animationsFadeOut(e){e.classList.remove("intoOpacityTransition"),setTimeout(()=>{e.style.display="none"},0)}document.addEventListener("click",function(e){e.target.classList.contains("finalized-hours")&&G.click()}),document.addEventListener("stateUpdated",function(){let r=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),i=(e=navigator.userAgent||window.opera,/iPad/.test(e)||1<navigator.maxTouchPoints);e=navigator.userAgent||navigator.vendor||window.opera;var e=/^((?!chrome|android).)*safari/i.test(e),o=window.innerWidth||document.documentElement.clientWidth,t=[{radios:to,type:"flowmodoro"},{radios:ro,type:"general"},{radios:ao,type:"pomodoro"}];(i||e)&&(Ko.style.background="rgb(50, 50, 50)",accountPopup.style.background="rgb(50, 50, 50)",deleteAccountPopup.style.background="rgb(50, 50, 50)",shortcutsPopup.style.background="rgb(50, 50, 50)"),window.scrollTo({top:0,behavior:"smooth"}),r&&(ce.style.backgroundColor="rgb(0, 0, 0)"),setInitialBackgroundCellSelection();let n=document.getElementById("threeWayToggle");!r&&504<o?(setTimeout(()=>{P.style.opacity="1",P.classList.add("hyperChillTitleAnimationTranslate")},0),setTimeout(()=>{ee.style.opacity="1",P.classList.add("hyperChillTitleAnimationScale")},1e3),setTimeout(()=>{ee.style.transition="opacity 0.5s ease-in-out",P.classList.remove("hyperChillTitleAnimationTranslate"),P.style.opacity="0",setTimeout(()=>{P.style.display="none",n.style.display="inline-flex",n.classList.add("threeWayToggleAnimation"),setTimeout(()=>{n.style.opacity="1"},100)},1e3)},2e3)):(r||o<=504)&&setTimeout(()=>{P.style.display="none",ee.style.opacity="1",ee.style.transition="opacity 0.5s ease-in-out",n.style.display="inline-flex",setTimeout(()=>{n.style.opacity="1"},100)},1e3),setTimeout(()=>{0===h.startStop&&animationsFadeIn(N,"flex")},3e3),document.addEventListener("keydown",e=>Sn(e,b,G,go,fo,I)),document.addEventListener("keyup",e=>En(e,I)),b.addEventListener("click",function(){var e=Date.now();h.startStop++,bn(q,I),resetDisplay(X),updateLabelArrs(e,nt,rt),1===h.startStop?(kn(m,I,$,h,re),triggerSilentAlertAudioMobile(k.Chime,k.Bell,K,Q,I),animationsFadeOut(N),m.lastPomNotification=Date.now(),bt(U),setTimeout(()=>{document.documentElement.style.backgroundSize="100%",I.canEndSession=!0},1e3)):Zt(I,E,h),Ct(),Rt(I,m,V,_),displayWorker.postMessage("clearInterval"),displayWorker.postMessage("startInterval"),b.classList.remove("glowing-effect"),I.pomodoroCountIncremented=!1,w.transitionTime.push(e),j.main?(I.inHyperFocus=!1,I.lastHyperFocusIntervalMin=Math.floor((Date.now()-m.hyperFocus)/6e4),m.chillTime=Date.now(),h.chillTimeIntervals++,setFavicon("/images/logo/HyperChillLogoBlue.png"),_t(I,mo,N),displayCat(U,h),pn(re,h,Z),fn(oe),setBackground(d.chilltime,1),e=Date.now()-m.hyperFocus,w.flowTime.push(e),g.hyperFocus,g.hyperFocus+=Date.now()-m.hyperFocus,I.autoStartBreakInterval||pauseAndResetAlertSounds(k.Bell,k.Chime),I.pomodoroNotificationToggle?(Gt(se,le,de,h),Xt(h,y),Dt(I,g,h,V,pomodoroWorker),setButtonTextAndMode(b,E,"Switch",Wt(h,y))):(cn(ie,ae,x,y,h,I),setButtonTextAndMode(b,E,"Switch","Break")),totalTimeDisplay(m,g,S,u,I,y,v),Ht(I,g,h,y,flowmodoroWorker,suggestionWorker),clearInterval(j.main),j.main=null,totalDisplayWorker.postMessage("clearInterval")):(I.inHyperFocus=!0,I.sentFlowmodoroNotification=!1,h.flowTimeIntervals++,m.hyperFocus=Date.now(),e=m.hyperFocus-m.chillTime,2<h.startStop&&w.chillTime.push(e),totalDisplayWorker.postMessage("startInterval"),setFavicon("/images/logo/HyperChillLogoGreen.png"),zt(h,I,N,mo),hideSuggestionBreakContainer(ie,ae,x),hidePomodorosCompletedContainer(se),showInterruptionsSubContainer(oe),Xt(h,y),setBackground(d.flowtime,1),Ht(I,g,h,y,flowmodoroWorker,suggestionWorker),j.main=setInterval(()=>updateProgressBar(y,m,g,I,J,L),1e3),I.autoStartPomodoroInterval||pauseAndResetAlertSounds(k.Bell,k.Chime),I.pomodoroNotificationToggle?(setButtonTextAndMode(b,E,"Switch",Vt(h,y)),Ot(I,g,h,_,pomodoroWorker)):setButtonTextAndMode(b,E,"Switch","Deep Work"),1<h.startStop&&(g.chillTime+=Date.now()-m.chillTime,hideCat(U,h))),I.sentSuggestionMinutesNotification=!1,setTimeout(()=>{I.modeChangeExecuted=!1},1e3)}),G.addEventListener("click",async function(){var e;I.submittedTarget?I.submittedTarget&&(I.hitTarget&&L.classList.remove("glowing-effect"),vn(I,A,y),updateProgressBar(y,m,g,I,J,L),totalTimeDisplay(m,g,S,u,I,y,v),I.progressBarContainerIsSmall||(B.classList.toggle("small"),I.progressBarContainerIsSmall=!0)):Tn(e=document.getElementById("target-hours").value,u,m,g,I,h)&&(I.hitTarget&&L.classList.remove("glowing-effect"),e=replaceTargetHours(e,y,I),A.loggedIn&&await dt(e),I.progressBarContainerIsSmall&&(B.classList.toggle("small"),I.progressBarContainerIsSmall=!1),updateProgressBar(y,m,g,I,J,L),totalTimeDisplay(m,g,S,u,I,y,v),I.hitTarget=!1)}),we.addEventListener("change",async function(){var e=we.value,e=tn(Math.round(parseFloat(e)));we.value=e,y.suggestionMinutes=e;let o;o=0===h.startStop?0:Math.round((Date.now()-m.hyperFocus)/1e3),I.sentSuggestionMinutesNotification=!1,I.breakSuggestionToggle&&(on(m,I,g,y),60*e>o?(I.sentSuggestionMinutesNotification=!1,b.classList.remove("glowing-effect")):(I.sentSuggestionMinutesNotification=!0,b.classList.add("glowing-effect"))),A.loggedIn&&await F({flowTime:{suggestionMinutes:e}})}),te.addEventListener("click",function(){0<h.interruptions&&(h.interruptions--,re.textContent=h.interruptions,I.sessionInProgress)&&w.interruptionTime.pop()}),ne.addEventListener("click",function(){var e;h.interruptions<1e3&&(h.interruptions++,re.textContent=h.interruptions,I.sessionInProgress)&&(e=Date.now(),w.interruptionTime.push(e))});for(let[e,o]of Object.entries(R))document.getElementById(e).addEventListener("click",function(){ln(R),document.getElementById(o).style.display="block",this.classList.add("selected"),z.lastSettingsSelectionId=e});function a(e,o,t,n){e.flowmodoroNotificationToggle&&1<h.startStop&&!e.inHyperFocus&&(60*o.breakTimeSuggestionsArr[h.currentFlowmodoroBreakIndex]>t?(n.classList.remove("glowing-effect"),e.sentFlowmodoroNotification=!1):(n.classList.add("glowing-effect"),e.sentFlowmodoroNotification=!0))}function s(e,o,t){o<60*e?t.classList.remove("glowing-effect"):t.classList.add("glowing-effect")}function l(){fetch("/api/state/logout",{method:"POST"}).then(()=>{A.loggedIn=!1,window.location.href="/"}).catch(e=>{})}Ee.addEventListener("mouseover",function(){D(Be,"showingPomodoroNotificationInfoWindow",I)}),Te.addEventListener("mouseover",function(){D(ke,"showingFlowmodoroNotificationInfoWindow",I)}),be.addEventListener("mouseover",function(){D(Se,"showingFlowTimeBreakNotificationInfoWindow",I)}),Fo.addEventListener("mouseover",function(){D(Do,"showingIntervalTimeInfoWindow",I)}),Ho.addEventListener("mouseover",function(){D(Wo,"showingTotalTimeInfoWindow",I)}),zo.addEventListener("mouseover",function(){D(_o,"showingMuffinInfoWindow",I)}),Le.addEventListener("mouseover",function(){D(Pe,"showingNotesAutoSwitchInfoWindow",I)}),To.addEventListener("mouseover",function(){D(ko,"showingPropagateUnfinishedTasksInfoWindow",I)}),Jo.addEventListener("mouseover",function(){D(Xo,"showingTimestampsInfoWindow",I)}),Ee.addEventListener("mouseout",function(){D(Be,"showingPomodoroNotificationInfoWindow",I)}),Te.addEventListener("mouseout",function(){D(ke,"showingFlowmodoroNotificationInfoWindow",I)}),be.addEventListener("mouseout",function(){D(Se,"showingFlowTimeBreakNotificationInfoWindow",I)}),Fo.addEventListener("mouseout",function(){D(Do,"showingIntervalTimeInfoWindow",I)}),Ho.addEventListener("mouseout",function(){D(Wo,"showingTotalTimeInfoWindow",I)}),zo.addEventListener("mouseout",function(){D(_o,"showingMuffinInfoWindow",I)}),Le.addEventListener("mouseout",function(){D(Pe,"showingNotesAutoSwitchInfoWindow",I)}),To.addEventListener("mouseout",function(){D(ko,"showingPropagateUnfinishedTasksInfoWindow",I)}),Jo.addEventListener("mouseout",function(){D(Xo,"showingTimestampsInfoWindow",I)}),Re.addEventListener("mousedown",e=>H(e,"flowmodoroThumbIsDragging")),Re.addEventListener("touchstart",e=>H(e,"flowmodoroThumbIsDragging")),Ue.addEventListener("mousedown",e=>H(e,"generalThumbIsDragging")),Ue.addEventListener("touchstart",e=>H(e,"generalThumbIsDragging")),Ve.addEventListener("mousedown",e=>H(e,"pomodoroThumbIsDragging")),Ve.addEventListener("touchstart",e=>H(e,"pomodoroThumbIsDragging")),Je.addEventListener("mousedown",e=>H(e,"flowmodoroThumbIsDragging2")),Je.addEventListener("touchstart",e=>H(e,"flowmodoroThumbIsDragging2")),oo.addEventListener("mousedown",e=>H(e,"generalThumbIsDragging2")),oo.addEventListener("touchstart",e=>H(e,"generalThumbIsDragging2")),Qe.addEventListener("mousedown",e=>H(e,"pomodoroThumbIsDragging2")),Qe.addEventListener("touchstart",e=>H(e,"pomodoroThumbIsDragging2")),document.addEventListener("mousemove",rn),document.addEventListener("touchmove",rn),document.addEventListener("mouseup",an),document.addEventListener("touchend",an),no.forEach(e=>{e.addEventListener("change",function(e){var o=tn(Math.round(e.target.value));document.getElementById(e.target.id).value=o;let t;var n=[...y.breakTimeSuggestionsArr];mn(e,y,o,h,n),un(I,h,y),0===h.startStop||I.inHyperFocus?(g.flowmodoroNotificationSeconds=60*h.currentFlowmodoroNotification,t=0):(t=Math.round((Date.now()-m.chillTime)/1e3),g.flowmodoroNotificationSeconds=60*h.currentFlowmodoroNotification-t,flowmodoroWorker.postMessage("clearInterval"),flowmodoroWorker.postMessage(g.flowmodoroNotificationSeconds)),(0===h.currentFlowmodoroBreakIndex&&"flowmodoroBreakInput1"===e.target.id||1===h.currentFlowmodoroBreakIndex&&"flowmodoroBreakInput2"===e.target.id||2===h.currentFlowmodoroBreakIndex&&"flowmodoroBreakInput3"===e.target.id||3===h.currentFlowmodoroBreakIndex&&"flowmodoroBreakInput4"===e.target.id)&&a(I,y,t,b),x.textContent=h.currentFlowmodoroNotification+" min"})}),io.forEach(e=>{e.addEventListener("change",async function(e){var o=tn(Math.round(e.target.value));document.getElementById(e.target.id).value=o;let t;var n=[...y.pomodoroIntervalArr];I.inHyperFocus?(t=Math.round((Date.now()-m.hyperFocus)/1e3),"pomodoroInput"===e.target.id&&(I.modeChangeExecuted=!1,s(o,t,b))):(t=Math.round((Date.now()-m.chillTime)/1e3),("shortBreakInput"===e.target.id&&1===h.currentPomodoroIntervalIndex||"longBreakInput"===e.target.id&&2===h.currentPomodoroIntervalIndex)&&(I.modeChangeExecuted=!1,s(o,t,b))),en(e,y,o,h,E,I,n),Xt(h,y),0===h.startStop?g.pomodoroNotificationSeconds=60*h.currentPomodoroNotification:I.pomodoroNotificationToggle&&(g.pomodoroNotificationSeconds=60*h.currentPomodoroNotification-t,pomodoroWorker.postMessage("clearInterval"),pomodoroWorker.postMessage(g.pomodoroNotificationSeconds))})}),t.forEach(o=>{o.radios.forEach(e=>{e.addEventListener("change",e=>At(e,o.type,k,p,f))})}),[...so,...bo].forEach(e=>{e.addEventListener("click",async function(e){var o=e.target.id,t=c.flowtime;document.getElementById(t).classList.remove("selected-background"),d.flowtime=W[o],c.flowtime=o,document.getElementById(e.target.id).classList.add("selected-background"),I.inHyperFocus&&!I.darkThemeActivated&&setBackground(d.flowtime,1),A.loggedIn&&await F({backgroundsThemes:{flowTimeBackground:c.flowtime}})})}),[...lo,...So].forEach(e=>{e.addEventListener("click",async function(e){var o=e.target.id,t=c.chilltime;document.getElementById(t).classList.remove("selected-background"),d.chilltime=O[o],c.chilltime=o,document.getElementById(e.target.id).classList.add("selected-background"),!I.inHyperFocus&&1<=h.startStop&&!I.darkThemeActivated&&setBackground(d.chilltime,1),A.loggedIn&&await F({backgroundsThemes:{chillTimeBackground:c.chilltime}})})}),Ie.addEventListener("click",async function(){Ie.checked?(wn(),I.targetReachedToggle=!0):I.targetReachedToggle=!1,A.loggedIn&&await F({flowTime:{targetTimeReachedToggle:I.targetReachedToggle}})}),ye.addEventListener("click",async function(){ye.checked?(wn(),I.breakSuggestionToggle=!0,I.inHyperFocus?setButtonTextAndMode(b,E,"Switch","Deep Work"):setButtonTextAndMode(b,E,"Switch","Break"),Qt(h),C.checked&&C.click(),y.suggestionMinutes=we.value,on(m,I,g,y)):(I.breakSuggestionToggle=!1,suggestionWorker.postMessage("clearInterval"),b.classList.remove("glowing-effect")),A.loggedIn&&await F({flowTime:{notificationToggle:I.breakSuggestionToggle}})}),ve.addEventListener("click",async function(){var e;ve.checked?(wn(),Qt(h),C.checked&&C.click(),e=Math.floor((Date.now()-m.chillTime)/1e3),I.inHyperFocus||0===h.startStop||(g.flowmodoroNotificationSeconds=60*h.currentFlowmodoroNotification-e,flowmodoroWorker.postMessage("clearInterval"),flowmodoroWorker.postMessage(g.flowmodoroNotificationSeconds)),I.flowmodoroNotificationToggle=!0):(I.flowmodoroNotificationToggle=!1,flowmodoroWorker.postMessage("clearInterval"),b.classList.remove("glowing-effect")),A.loggedIn&&await F({chillTime:{notificationToggle:I.flowmodoroNotificationToggle}}),gn(I,ae,x,h)}),C.addEventListener("click",async function(){var e,o;C.checked?(wn(),Qt(h),ve.checked&&ve.click(),ye.checked&&ye.click(),e=Math.floor((Date.now()-m.hyperFocus)/1e3),I.inHyperFocus&&(o="Pomodoro #1 | "+String(y.pomodoroIntervalArr[0])+" min",setButtonTextAndMode(b,E,"Switch",o),g.pomodoroNotificationSeconds=60*h.currentPomodoroNotification-e,pomodoroWorker.postMessage(g.pomodoroNotificationSeconds)),I.pomodoroNotificationToggle=!0):(I.pomodoroNotificationToggle=!1,pomodoroWorker.postMessage("clearInterval"),b.classList.remove("glowing-effect"),I.inHyperFocus?setButtonTextAndMode(b,E,"Switch","Deep Work"):1<h.startStop&&(setButtonTextAndMode(b,E,"Switch","Break"),hidePomodorosCompletedContainer(se),cn(ie,ae,x,y,h,I))),gn(I,ae,x,h),A.loggedIn&&await F({pomodoro:{notificationToggle:I.pomodoroNotificationToggle}})}),xe.addEventListener("click",async function(){I.autoStartPomodoroInterval?I.autoStartPomodoroInterval&&(I.autoStartPomodoroInterval=!1):(I.autoStartPomodoroInterval=!0,I.modeChangeExecuted=!1),A.loggedIn&&await F({pomodoro:{autoStartPomToggle:I.autoStartPomodoroInterval}})}),Ce.addEventListener("click",async function(){I.autoStartBreakInterval?I.autoStartBreakInterval&&(I.autoStartBreakInterval=!1):(I.autoStartBreakInterval=!0,I.modeChangeExecuted=!1),A.loggedIn&&await F({pomodoro:{autoStartBreakToggle:I.autoStartBreakInterval}})}),De.addEventListener("click",async function(){De.checked?I.transitionClockSoundToggle=!0:I.transitionClockSoundToggle=!1,A.loggedIn&&await F({sounds:{transitionClockSound:I.transitionClockSoundToggle}})}),He.addEventListener("click",async function(){He.checked?(I.flowTimeAnimationToggle=!0,I.inHyperFocus&&animationsFadeIn(mo,"block")):(I.flowTimeAnimationToggle=!1,I.inHyperFocus&&animationsFadeOut(mo)),A.loggedIn&&await F({backgroundsThemes:{flowTimeAnimation:I.flowTimeAnimationToggle}})}),We.addEventListener("click",async function(){We.checked?(I.chillTimeAnimationToggle=!0,!I.inHyperFocus&&1<h.startStop&&animationsFadeIn(N,"flex")):(I.chillTimeAnimationToggle=!1,I.inHyperFocus||animationsFadeOut(N)),A.loggedIn&&await F({backgroundsThemes:{chillTimeAnimation:I.chillTimeAnimationToggle}})}),Ne.addEventListener("click",async function(){wt(r)}),Ae.addEventListener("click",async function(){vt(r)}),$o.addEventListener("click",async function(){vt(r)}),qo.addEventListener("click",function(){It()}),Go.addEventListener("click",function(){yt()}),Uo.addEventListener("click",async function(){wt(r)}),window.addEventListener("resize",function(){handleViewportWidthChange(R,z)}),uo.addEventListener("click",function(){window.location.href="/signup"}),wo.addEventListener("click",async function(){l()}),Bo.addEventListener("click",function(){l()}),yo.addEventListener("click",async function(){var e,o;o=ho.value,/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o)?(ho.value,Io.value,o=ho.value,e=Io.value,fetch("/api/api/validateUser",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:{email:o,password:e},userAgent:at,userDevice:st,userTimeZone:lt})}).then(o=>{if(o.ok)return o.json();if(429===o.status)return o.json().then(e=>{throw alert(e.message),new Error(`HTTP error! Status: ${o.status} - `+e.message)});throw alert("Your email or password is incorrect. Please try again."),new Error("HTTP error! Status: "+o.status)}).then(e=>{!0===e.loginSuccess?it():alert("An error occured on the server. We apologize for the inconvenience. Please try again later.")}).catch(e=>{})):alert("Invalid email address. Please try again.")}),vo.addEventListener("click",function(){window.location.href="/reset-password"}),L.addEventListener("mouseover",function(){(!B.classList.contains("small")&&1<=h.startStop||0===h.startStop&&I.submittedTarget)&&(L.style.cursor="pointer")}),L.addEventListener("mouseout",function(){(!B.classList.contains("small")&&1<=h.startStop||0===h.startStop&&I.submittedTarget)&&(L.style.cursor="default")}),L.addEventListener("click",async function(){(!B.classList.contains("small")&&1<=h.startStop||0===h.startStop&&I.submittedTarget)&&I.totalTimeToggle&&(v.showingTimeLeft?(v.showingTimeLeft=!1,S.textContent=v.defaultTimeStr):(v.showingTimeLeft=!0,S.textContent=v.targetTimeLeftStr),A.loggedIn)&&await ct(v.showingTimeLeft)}),M.addEventListener("mouseover",function(){A.loggedIn||tt.popupQuestionWindowShowing||(M.style.cursor="pointer",xo.style.opacity=1,xo.style.zIndex=35)}),M.addEventListener("mouseout",function(){A.loggedIn||tt.popupQuestionWindowShowing||(xo.style.opacity=0,xo.style.zIndex=0)}),M.addEventListener("click",function(){A.loggedIn||tt.popupQuestionWindowShowing||(window.location.href="/login")}),Co.addEventListener("click",function(){Eo.style.display="none",No.style.display="none",No.style.opacity="0",Mo.checked?gt(m.beginning):(ft(Y),pt(!1),Ao.checked=!1,Mo.checked=!0)}),Oo.addEventListener("click",async function(){intervalTimeToggleGUIUpdate(),A.loggedIn&&await F({display:{intervalTime:I.intervalTimeToggle}})}),jo.addEventListener("click",async function(){totalTimeToggleGUIUpdate(),A.loggedIn&&await F({display:{totalTime:I.totalTimeToggle}})}),muffinToggle.addEventListener("click",async function(){muffinToggle.checked?(I.muffinToggle=!0,displayCat(U,h)):(I.muffinToggle=!1,I.inHyperFocus||Tt(U,h)),A.loggedIn&&await F({display:{muffinToggle:I.muffinToggle}})}),Ro.forEach(e=>{e.addEventListener("click",function(){var e;I.canTriggerZZZ&&(I.canTriggerZZZ=!1,e=`rotateZ(-${Math.floor(30*Math.random())}deg)`,Zo.style.transform=e,Zo.style.display="block",setTimeout(()=>{Zo.style.opacity=1,setTimeout(()=>{Zo.style.opacity=0,setTimeout(()=>{Zo.style.display="none",I.canTriggerZZZ=!0},250)},1e3)},0))})}),x.addEventListener("click",function(){co.click(),setTimeout(()=>{Yo.click()},0),I.pipWindowOpen&&window.focus()}),Qo.addEventListener("click",function(){navigator.clipboard.writeText("support@hyperchill.io").then(function(){alert("'support@hyperchill.io' has been copied to clipboard")}).catch(function(e){})}),pomodoroWorker.onmessage=function(e){Et(r,i)},suggestionWorker.onmessage=function(e){I.sentSuggestionMinutesNotification||($t(y,m,p,f,r,i),I.sentSuggestionMinutesNotification=!0,b.classList.add("glowing-effect"))},flowmodoroWorker.onmessage=function(e){I.sentFlowmodoroNotification||(Ut(y,h,m,p,f,r,i),I.sentFlowmodoroNotification=!0,b.classList.add("glowing-effect"))},displayWorker.onmessage=function(e){var o=1e3*Math.round((Date.now()-m.local)/1e3),t=Math.floor(o/u.msPerHour),n=Math.floor((o-t*u.msPerHour)/u.msPerMin),o=Math.floor((o-t*u.msPerHour-n*u.msPerMin)/u.msPerSec),t=String(t).padStart(2,"0"),n=String(n).padStart(2,"0"),o=String(o).padStart(2,"0");X.textContent=t+`:${n}:`+o,Bt(),Nt(I,h,m,b,y,p,f,flowmodoroWorker,suggestionWorker,r,i)},totalDisplayWorker.onmessage=function(e){totalTimeDisplay(m,g,S,u,I,y,v)}});export{pomodoroWorker,suggestionWorker,flowmodoroWorker,displayWorker,totalDisplayWorker,observer,hideCat,displayCat,totalTimeToggleGUIUpdate,intervalTimeToggleGUIUpdate,updateDataPerHour,updateLabelArrs,hidePomodorosCompletedContainer,pauseAndResetAlertSounds,handleViewportWidthChange,hideSuggestionBreakContainer,showInterruptionsSubContainer,setButtonTextAndMode,updateProgressBar,resetDisplay,returnTotalTimeString,getTotalElapsed,setFavicon,triggerSilentAlertAudioMobile,setInitialBackgroundCellSelection,setBackground,deactivateDarkTheme,activateDarkTheme,replaceTargetHours,totalTimeDisplay,animationsFadeIn,animationsFadeOut};