function t(){fetch("/api/state/sessionValidation",{method:"POST",headers:{"Content-Type":"application/json"}}).then(t=>t.json()).then(t=>{updateStreak(t.user)}).catch(t=>{})}function updateStreak(t){t=e(t.activityTimeArr.map(t=>n(t.activityDateUTC,t.timeZone)));streaksCount.innerText=t}function e(t){if(0===t.length)return 0;t.sort((t,e)=>e-t);var e=s(t),t=new Date;t.setHours(0,0,0,0);let n=0,r=0;var a=e[r],t=(a.setHours(0,0,0,0),(t-a)/864e5);if(0==t||1==t)n=1;else if(1<t)return 0;r++;let o=!0;for(;r<e.length&&o;){var i=e[r-1],u=e[r],i=(u.setHours(0,0,0,0),(i-u)/864e5);1==i?n++:o=!1,r++}return n}function s(t){return t.filter((t,e,n)=>{return 0===e||(n=n[e-1],!(t.getFullYear()===n.getFullYear()&&t.getMonth()===n.getMonth()&&t.getDate()===n.getDate()))})}function n(t,e){t=moment.utc(t).tz(e).format();return new Date(t)}document.addEventListener("updateStreak",()=>{t()});export{updateStreak};