function e(){fetch("/api/state/sessionValidation",{method:"GET"}).then(e=>e.json()).then(e=>{updateStreak(e.sessions)}).catch(e=>{})}function updateStreak(e){e=t(e.map(({timeZone:e,endTime:t})=>({timeZone:e,endTime:t})).map(e=>n(e.endTime,e.timeZone)));streaksCount.innerText=e}function t(e){if(0===e.length)return 0;e.sort((e,t)=>t-e);var t=u(e),e=new Date;e.setHours(0,0,0,0);let n=0,r=0;var o=t[r],e=(o.setHours(0,0,0,0),(e-o)/864e5);if(0==e||1==e)n=1;else if(1<e)return 0;r++;let i=!0;for(;r<t.length&&i;){var a=t[r-1],s=t[r],a=(s.setHours(0,0,0,0),(a-s)/864e5);1==a?n++:i=!1,r++}return n}function u(e){return e.filter((e,t,n)=>{return 0===t||(n=n[t-1],!(e.getFullYear()===n.getFullYear()&&e.getMonth()===n.getMonth()&&e.getDate()===n.getDate()))})}function n(e,t){e=moment.utc(e).tz(t).format();return new Date(e)}document.addEventListener("updateStreak",()=>{e()});export{updateStreak};