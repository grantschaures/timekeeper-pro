import{catsContainer as n,completedPomodoros_label as o,completedPomodoros_min as a,completedPomodorosContainer as l,display as p,interruptionsChangeContainer as d,interruptionsContainer as y,interruptionsLabel as r,interruptionsNum as m,interruptionsSubContainer as c,lowerButtons as g,notesBtn as x,notesContainer as e,pipCatShadow as u,pipIconContainer as h,pipInfoText as f,pomodoroInfoTooltip as t,productivity_chill_mode as T,progress as w,progressCatBody as v,progressCatHead as C,start_stop_btn as b,stopwatch as s,suggestionBreak_label as L,suggestionBreak_min as B,targetHoursContainer as E,targetHoursInterruptionsContainer as i,timekeepingContainer as H}from"../modules/dom-elements.js";import{catIds as S,counters as k,flags as I,pip as _,selectedBackground as z}from"../modules/index-objects.js";import{displayCat as P,setBackground as M}from"../main/index.js";document.addEventListener("stateUpdated",function(){function s(){var e=window.innerHeight,t=window.innerWidth;u.style.opacity=e<=430?"0":"1",f.style.opacity=t<=320?"0":"1"}"documentPictureInPicture"in window&&(h.style.display="flex"),h.addEventListener("click",async function(){I.pipWindowOpen=!0;let e,i=(e=I.intervalTimeToggle?280:240,await window.documentPictureInPicture.requestWindow({width:240,height:e}));_.window=i,C.style.display="flex",v.style.display="flex",u.style.display="flex",f.style.display="flex",setTimeout(()=>{C.style.opacity="1",v.style.opacity="1",u.style.opacity="1",f.style.opacity="1",s()},0),h.style.display="none",x.style.display="none",n.style.display="none",H.style.paddingTop="10px",H.style.paddingBottom="10px",H.style.maxHeight="260px",H.style.marginTop="10px",H.style.marginBottom="5px",0===k.startStop&&(T.innerHTML="<b>Press 'Start'</b>"),g.classList.add("pipMode"),g.style.gap="0px",b.style.marginRight="10px",p.classList.add("pipMode"),L.style.display="none",B.style.marginBottom="0px",B.style.marginTop="0px",o.style.display="none",l.style.paddingTop="22px",r.style.display="none",E.style.visibility="hidden",y.style.marginTop="5px",y.style.height="75px",y.style.minHeight="75px",y.classList.add("pipMode"),y.style.zIndex="26",m.style.marginTop="3px",c.style.marginTop="0px",d.style.marginBottom="0px",d.style.marginTop="0px";var t=document.createElement("div");t.id="pipContainer",t.appendChild(y),t.appendChild(H),i.document.body.append(t),I.inHyperFocus?M(z.flowtime,1):0<k.startStop?M(z.chilltime,1):I.darkThemeActivated&&(_.window.document.body.style.backgroundImage="linear-gradient(90deg, #202020, #202020, #202020)"),[...document.styleSheets].forEach(t=>{try{var s=[...t.cssRules].map(e=>e.cssText).join(""),e=document.createElement("style");e.textContent=s,i.document.head.appendChild(e)}catch(e){s=document.createElement("link");s.rel="stylesheet",s.type=t.type,s.media=t.media,s.href=t.href,i.document.head.appendChild(s)}}),i.addEventListener("pagehide",e=>{I.pipWindowOpen=!1,C.style.display="none",C.style.opacity="0",v.style.display="none",v.style.opacity="0",u.style.display="none",u.style.opacity="0",f.style.display="none",f.style.opacity="0",h.style.display="flex",x.style.display="flex",n.style.display="block",P(S,k),H.style.paddingTop="",H.style.paddingBottom="",H.style.maxHeight="",H.style.marginTop="0px",H.style.marginBottom="25px",I.intervalTimeToggle?H.style.height="350px":H.style.height="150px",0===k.startStop&&(T.innerHTML="<b>Press 'Start' to begin session</b>"),g.classList.remove("pipMode"),g.style.gap="10px",b.style.marginRight="0px",p.classList.remove("pipMode"),r.style.display="block",E.style.visibility="visible",L.style.display="flex",B.style.marginBottom="45px",B.style.marginTop="27px",o.style.display="flex",l.style.paddingTop="0px",m.style.fontSize="50px",m.style.marginTop="",y.style.height="150px",y.style.minHeight="",y.style.marginTop="0px",y.classList.remove("pipMode"),y.style.zIndex="25",c.style.marginTop="6px",d.style.marginBottom="30px",d.style.marginTop="-10px",w.insertAdjacentElement("afterend",H),E.insertAdjacentElement("afterend",y)}),i.addEventListener("resize",function(){i.innerWidth<=300?(m.style.fontSize="35px",a.style.fontSize="35px",y.style.height="60px",y.style.minHeight="60px"):(m.style.fontSize="50px",a.style.fontSize="50px",y.style.height="75px",y.style.minHeight="75px")}),i.document.getElementById("end_session_btn").addEventListener("click",function(){window.focus(),i.close()})}),a.addEventListener("mouseenter",function(){I.pipWindowOpen&&(t.style.display="flex",setTimeout(()=>{t.style.opacity="1"},0))}),a.addEventListener("mouseleave",function(){t.style.display="none",t.style.opacity="0"}),window.addEventListener("resize",function(){s()})});