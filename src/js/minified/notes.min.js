import{notesContainer as t,taskContainer as e,promptContainer as s,labelInputContainer as a,createLabelContainer as i,createLabelWindow as l,createLabelInput as o,createLabelDone as O,createLabelCancel as H,updateLabelContainer as M,updateLabelWindow as d,updateLabelInput as c,updateLabelCancel as R,updateLabelDone as J,labelSelectionWindow as r,labelSelectionRow as u,clearIcon as m,notesBtn as U,notesConsole as g,taskPrompt as z,tagIcon as p,tagSelection as q,tagSelectionDivider as y,addDoneContainer as h,selectionDoneDiv as n,selectionDone as v,addTagIcon as f,emojiBtn as Y,emojiBtn2 as $,emojiImg as _,emojiImg2 as V,emojiContainer as k,emojiSymbols as F,transitionNotesAutoSwitchToggle as G,start_stop_btn as K,tutorialImgContainers as Q,aboutIconNotes as X,settings_menu_container as Z,notesBtnContainer as ee,notesSettingsHr1 as te,notesSettingsHr2 as ne,addingDeletingUpdatingLabelsInfoBlock as se,addNoteTaskContainer as E,noteTaskInputContainer as L,noteTaskInputText as b,noteInputCancelBtn as ae,noteInputSaveBtn as ie,taskCheckbox as I,dynamicList as le,textarea as S,settingsContainer as oe,aboutContainer as de,blogContainer as ce,main_elements as re,isMobile as C,propagateUnfinishedTasksToggle as ue,clearNotesConsoleBtn as me,body as ge}from"../modules/dom-elements.js";import{flags as pe}from"../modules/index-objects.js";import{state as ye}from"../modules/navigation-objects.js";import{notesFlags as w,counters as T,state as x,flags as N,emojiMap as he,tutorialContainerMap as ve,fontSizeArr as fe,fontNumArr as ke,labelDict as B,notesArr as A}from"../modules/notes-objects.js";import{sessionState as j}from"../modules/state-objects.js";import{updateUserSettings as Ee}from"../state/update-settings.js";import{updateLabels as Le}from"../state/update-labels.js";import{updateNotes as P}from"../state/update-notes.js";function be(){var t=["‚úçÔ∏è Homework","üìö Reading","üßò Meditation"];for(let e=0;e<t.length;e++){var n=document.createElement("input");n.value=t[e],Ce(n,T,u,h)}}function W(e,t){e.style.display="none",e.style.opacity="0",t.emojiContainerShowing=!1}function Ie(e,t,n){!1===e.tagSelection&&(t.style.display="flex",n.style.marginLeft="",e.tagSelection=!0)}function Se(e,t,n){null!==e.lastSelectedEmojiId&&(e=document.getElementById(e.lastSelectedEmojiId).src,t.src=e,n.src=e)}function Ce(e,t,n,s){var e=e.value,a="<h4 class='tag-text'>"+e+"</h4>",i=document.createElement("div");i.className="tag unselectable selection-tag",i.innerHTML=a,t.lastLabelIdNum+=1,i.id="tag-"+t.lastLabelIdNum,n.insertBefore(i,s),B[i.id]=e}function we(t){let n=!0;return document.querySelectorAll(".selection-tag").forEach(e=>{e=e.firstElementChild.textContent;e===t.value.trim()&&(alert("The label '"+e+"' already exists!"),n=!1)}),n}function Te(e,t){let n=!0,s=document.getElementById(e.elementToUpdateId).innerText.trim();return document.querySelectorAll(".selection-tag").forEach(e=>{e=e.firstElementChild.textContent;e===t.value.trim()&&s!==t.value.trim()&&(alert("The label '"+e+"' already exists!"),n=!1)}),n}function xe(t,n,s,a,i,l,o){var d=a.value;if(""===d)Fe(t,n,s,a);else if(100<=o.children.length)alert("You've reached your limit of 100 notes/ tasks!"),Fe(t,n,s,a);else{let e;t=document.createElement("div"),s=(t.classList.add("noteTask"),e=(i.checked?(n=createCheckElements(l),t.appendChild(n),t.classList.add("task")):t.classList.add("note"),De(d,t,l,e)),t.appendChild(e),o.appendChild(t),{id:t.id,classList:[...t.classList],content:d,date:Date.now()}),a=(A.push(s),l.lastTaskInputIdNum);j.loggedIn&&P({notesArr:A,lastTaskInputIdNum:a})}}function Ne(e,t,n,s){!1===e.tagSelected&&(e.tagSelected=!0,t.style.marginLeft="5px",t.classList.add("tagToLeftSide"),n.style.width="100%",s.style.display="flex")}function Be(e,t){let n,s;s=("tag-text"===e.className?(n=e.parentElement.id,e.parentElement):(n=e.id,e)).innerHTML,document.getElementById(n).remove();e=document.createElement("div");e.className="tag unselectable selected-tag",e.innerHTML=s,e.id=n,e.firstElementChild.style.backgroundColor="rgba(255, 255, 255, 0.2)",t.appendChild(e)}function Ae(e,t){1<e.tagsSelected&&((e=document.createElement("h4")).className="tag-divider unselectable",e.innerText="|",t.append(e))}function je(t,n,s,e){var a=document.querySelectorAll(".selected-tag .tag-text");let i=0;for(;a.forEach(e=>{e.style.fontSize=n[i],t.currentLabelInputTagSize=s[i]}),i++,0<e.scrollWidth-e.clientWidth&&i<9;);}function Pe(e,t,n,s){let a;a=("tag-text deleteJiggling"===e.className?e.parentElement:e).id,document.getElementById(a).remove(),We(t,n,s),delete B[a],j.loggedIn&&(e=[B,T.lastLabelIdNum,x.lastSelectedEmojiId],Le(e))}function We(e,t,n){e.previousElementSibling||(t.style.display="none",e.style.marginLeft="7px",n.tagSelection=!1)}function De(e,t,n,s){var a=document.createElement("span"),e=(a.textContent=e,"spanText"+n.lastTaskInputIdNum),e=(a.setAttribute("data-testid",e),t.appendChild(a),"taskDiv"+n.lastTaskInputIdNum);return t.id=e,t.setAttribute("data-testid",e),s=appendEditRemoveContainer("Task",n.lastTaskInputIdNum),n.lastTaskInputIdNum+=1,s}function createCheckElements(e){var t=document.createElement("div"),n=(t.classList.add("taskCircularCheck"),document.createElement("div")),s=(n.classList.add("circularCheck"),document.createElementNS("http://www.w3.org/2000/svg","svg")),a=(s.setAttribute("width","20"),s.setAttribute("height","20"),s.setAttribute("viewBox","0 0 20 20"),s.classList.add("svgCheck"),"svgCheck"+e.lastTaskInputIdNum),a=(s.id=a,s.setAttribute("data-testid",a),document.createElementNS("http://www.w3.org/2000/svg","path"));return a.classList.add("check"),a.setAttribute("class","check"),a.setAttribute("d","M4 10 L8 14 L16 6"),a.setAttribute("stroke","white"),a.setAttribute("stroke-width","2"),a.setAttribute("fill","none"),a.setAttribute("stroke-linecap","round"),a.setAttribute("stroke-linejoin","round"),a.id="check"+e.lastTaskInputIdNum,s.appendChild(a),n.appendChild(s),t.appendChild(n),t}function Oe(e,t){document.getElementById("note-task-input-container-edit").remove(),document.getElementById(e.currentNoteTaskEditId).style.display="flex",t.noteTaskInputContainerEditShowing=!1}function He(t,e){var n=document.getElementById("note-task-input-container-edit").querySelector("textarea").value,e=(document.getElementById(t.currentNoteTaskEditId).querySelector("span").textContent=n,document.getElementById(t.currentNoteTaskEditId).style.display="flex",document.getElementById("note-task-input-container-edit").remove(),e.noteTaskInputContainerEditShowing=!1,A.findIndex(e=>e.id===t.currentNoteTaskEditId)),e=(A[e].content=n,T.lastTaskInputIdNum);j.loggedIn&&P({notesArr:A,lastTaskInputIdNum:e})}function Me(e){Re(e);e=T.lastTaskInputIdNum;j.loggedIn&&P({notesArr:A,lastTaskInputIdNum:e})}function Re(e){let t="taskDiv"+getLastNumberFromId(e);document.getElementById(t)&&document.getElementById(t).remove();e=A.findIndex(e=>e.id===t);-1!==e&&A.splice(e,1)}function Je(e,t,n,s,a){var i="taskDiv"+getLastNumberFromId(e);t.noteTaskInputContainerShowing&&(n.style.display="none",s.style.display="flex"),"Task"===ze(e)&&$e("task",i,a,t)}function Ue(e){e=getLastNumberFromId(e);let t="taskDiv"+e;var n=document.getElementById(t),e=document.getElementById("check"+e),s=n.firstElementChild,s=(n.classList.contains("completed-task")?(s.style.backgroundColor="",e.setAttribute("stroke-width","2"),e.parentElement.parentElement.style.opacity="",n.classList.remove("completed-task")):n.classList.contains("completed-task")||(s.style.backgroundColor="#3ba43e",e.setAttribute("stroke-width","3"),e.parentElement.parentElement.style.opacity="1",n.classList.add("completed-task")),A.findIndex(e=>e.id===t)),e=(A[s].classList=[...n.classList],T.lastTaskInputIdNum);j.loggedIn&&P({notesArr:A,lastTaskInputIdNum:e})}function ze(e){e=e.match(/(editBtn|editIcon)(Note|Task)\d+/);return e&&e[2]?e[2]:null}function qe(e){e.style.height="24px",e.style.height=e.scrollHeight+"px"}function Ye(e){var t=document.createElement("div"),n=(t.id="note-task-input-container-edit",document.createElement("div")),s=(n.id="upper-half-note-task-input-edit",document.createElement("textarea")),e=(s.id="note-task-input-text-edit",s.setAttribute("data-testid","note-task-input-text-edit"),s.placeholder="Description",s.value=e,n.appendChild(s),document.createElement("div")),s=(e.id="lower-half-note-task-input-edit",document.createElement("div")),a=(s.id="save-cancel-container-edit",document.createElement("div")),i=(a.id="note-input-save-container-edit",a.classList.add("save-cancel-task-container"),document.createElement("div")),i=(i.id="note-input-save-btn-edit",i.textContent="Save",a.appendChild(i),document.createElement("div")),l=(i.id="note-input-cancel-container-edit",i.classList.add("save-cancel-task-container"),document.createElement("div"));return l.id="note-input-cancel-btn-edit",l.textContent="Cancel",i.appendChild(l),s.appendChild(a),s.appendChild(i),e.appendChild(s),t.appendChild(n),t.appendChild(e),t}function $e(e,t,n,s){n.currentNoteTaskEditId=t;var n=document.getElementById(t),t=document.getElementById(t).querySelector("span").innerText,t=(n.style.display="none",Ye(t)),a=(t.style.display="flex",n.previousElementSibling);a?a.parentNode.insertBefore(t,a.nextSibling):n.parentNode.insertBefore(t,n),s.noteTaskInputContainerEditShowing=!0,document.getElementById("note-task-input-text-edit").addEventListener("input",function(e){qe(document.getElementById("note-task-input-text-edit"))}),qe(document.getElementById("note-task-input-text-edit")),t.querySelector("textarea").focus()}function appendEditRemoveContainer(e,t){var n=document.createElement("div"),s=(n.classList.add("editRemoveContainer"),"editRemoveContainer"+e+t),s=(n.id=s,document.createElement("div")),a=(s.classList.add("editRemoveBtn"),s.classList.add("editBtn"),s.classList.add("no-select"),"editBtn"+e+t),a=(s.setAttribute("id",a),s.setAttribute("data-testid",a),document.createElement("img")),a=(a.id="editIcon"+e+t,a.classList.add("editIcon"),a.src="images/icons/whitepencil.png",a.draggable=!1,s.appendChild(a),document.createElement("div")),i=(a.classList.add("editRemoveBtn"),a.classList.add("removeBtn"),a.classList.add("no-select"),"removeBtn"+e+t),i=(a.setAttribute("id",i),a.setAttribute("data-testid",i),document.createElementNS("http://www.w3.org/2000/svg","svg")),l=(i.classList.add("editRemoveSvg"),i.classList.add("removeSvg"),"trashSvg"+e+t),l=(i.setAttribute("id",l),i.setAttribute("xmlns","http://www.w3.org/2000/svg"),i.setAttribute("width","24"),i.setAttribute("height","24"),i.setAttribute("viewBox","0 0 24 24"),i.setAttribute("fill","none"),i.setAttribute("stroke","currentColor"),i.setAttribute("stroke-width","2"),i.setAttribute("stroke-linecap","round"),i.setAttribute("stroke-linejoin","round"),"polyline"+e+t);return i.innerHTML=`<polyline id="${l}" class="removePath" points="3 6 5 6 21 6"></polyline>
                        <path id="${"path"+e+t}" class="removePath" d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                        <line id="${"line1"+e+t}" class="removePath" x1="10" y1="11" x2="10" y2="17"></line>
                        <line id="${"line2"+e+t}" class="removePath" x1="14" y1="11" x2="14" y2="17"></line>`,a.appendChild(i),n.appendChild(s),n.appendChild(a),n}function getLastNumberFromId(e){e=e.match(/\d+$/);return e?parseInt(e[0],10):null}function _e(e,t,n,s,a){n.noteTaskInputContainerShowing&&(s.click(),n.noteTaskInputContainerShowing=!1),e.classList.remove("fullsize"),e.classList.remove("fullopacity"),a||window.scrollTo({top:0,behavior:"smooth"}),t.notesShowing=!1}function Ve(e,t){e.classList.add("fullsize"),e.classList.add("fullopacity"),window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"}),t.notesShowing=!0}function Fe(e,t,n,s){e.style.display="none",t.style.display="flex",n.noteTaskInputContainerShowing=!1,s.value=""}function Ge(e,t){document.activeElement!==e&&e.focus();var n=e.selectionStart,s=e.selectionEnd,a=e.value.substring(0,n),s=e.value.substring(s,e.value.length),a=(e.value=a+t+s,n+t.length);e.setSelectionRange(a,a)}function Ke(e,t,n,s){let a;a=s?600:616,e<450&&(t.style.display="none",n.emojiContainerShowing=!1),e<a?(s=45+(a-1-e)/4.3+"%",t.style.setProperty("--after-left",s)):t.style.setProperty("--after-left","45%")}function Qe(e){return/[^\s]/.test(e)}function D(e,t,n,s,a,i,l){e.style.display="none",t.style.display="none",l.tagSelected?n.style.display="flex":n.style.display="none",s.style.display="flex",a.style.display="flex",i.style.display="block"}function Xe(e,t,n,s,a,i,l,o){let d,c;c=("tag-text"===e.className?(d=e.parentElement.id,e.parentElement):(d=e.id,e)).innerHTML;var e=document.getElementById(d).previousElementSibling,r=document.getElementById(d).nextElementSibling,e=(e&&"h4"===e.tagName.toLowerCase()?e.remove():r&&"h4"===r.tagName.toLowerCase()?r.remove():(t.tagSelected=!1,n.classList.add("blink"),n.style.display="block",t.clearIconClicked||(s.style.display="none")),document.getElementById(d).remove(),document.createElement("div"));e.className="tag unselectable selection-tag",e.innerHTML=c,e.id=d,e.firstElementChild.style.backgroundColor="",a.insertBefore(e,a.firstChild),i.tagsSelected--,Ie(t,l,o)}function Ze(e,t,n,s,a,i,l,o,d,c,r,u,m,g,p,y,h){"home"===ye.lastSelectedMode&&("Enter"===e.key?(e.preventDefault(),document.activeElement===s?a.click():document.activeElement===i?l.click():document.activeElement===d?o.click():"note-task-input-text-edit"===document.activeElement.id&&document.getElementById("note-input-save-btn-edit").click()):"n"===e.key&&tt(y,p,g,h)?t.notesShowing?u.noteTaskInputContainerShowing||u.noteTaskInputContainerEditShowing||!t.notesConsoleShowing||(r.click(),I.checked=!1,e.preventDefault()):Ve(n,t):"t"===e.key&&t.notesShowing&&t.notesConsoleShowing&&!u.noteTaskInputContainerShowing&&!u.noteTaskInputContainerEditShowing?(r.click(),I.checked=!0,e.preventDefault()):"Escape"===e.key&&t.notesShowing&&(document.activeElement===d?c.click():_e(n,t,u,c,m)))}function et(t){return new Promise(e=>setTimeout(e,t))}function tt(e,t,n,s){return""===e.style.display&&""===t.style.display&&""===n.style.display||("none"===n.style.display||""===n.style.display)&&"none"!==s.style.display}document.addEventListener("DOMContentLoaded",function(){function e(){S.style.height="24px",S.style.height=S.scrollHeight+"px"}Ke(window.innerWidth,k,w,C),be(),C&&(X.style.display="none",te.style.display="none",ne.style.display="none",se.style.display="none"),le.addEventListener("click",function(e){var e=e.target,t=e.id;"check"===e.className.baseVal||"svgCheck"===e.className.baseVal?Ue(t):e.classList.contains("editRemoveBtn")||e.classList.contains("editRemoveSvg")||e.classList.contains("editIcon")||e.classList.contains("removePath")?e.classList.contains("editBtn")||e.classList.contains("editIcon")?Je(t,N,L,E,x):(e.classList.contains("removeBtn")||e.classList.contains("removeSvg")||e.classList.contains("removePath"))&&Me(t):"note-input-save-btn-edit"!==t&&"note-input-cancel-btn-edit"!==t||("note-input-save-btn-edit"===t?He(x,N):"note-input-cancel-btn-edit"===t&&Oe(x,N))}),I.addEventListener("click",function(){b.focus()}),ie.addEventListener("click",function(){xe(L,E,N,b,I,T,le),setTimeout(()=>{g.scrollTo({top:g.scrollHeight,behavior:"smooth"})},0),b.value="",b.focus(),e()}),ae.addEventListener("click",function(){Fe(L,E,N,b),e()}),E.addEventListener("click",function(){E.style.display="none",L.style.display="flex",N.noteTaskInputContainerEditShowing&&(document.getElementById("note-task-input-container-edit").remove(),N.noteTaskInputContainerEditShowing=!1,document.getElementById(x.currentNoteTaskEditId).style.display="flex"),b.focus(),N.noteTaskInputContainerShowing=!0,setTimeout(()=>{g.scrollTo({top:g.scrollHeight,behavior:"smooth"})},0)}),S.addEventListener("input",e),U.addEventListener("click",function(){!1===w.notesShowing?Ve(t,w):_e(t,w,N,ae,C)}),document.addEventListener("keydown",e=>Ze(e,w,t,o,O,c,J,ie,b,ae,E,N,C,oe,de,ce,re)),m.addEventListener("click",async function(){document.querySelectorAll(".selected-tag .tag-text").forEach(e=>{e.style.fontSize="20px"}),N.clearIconClicked=!0,m.classList.add("resetIconRotation"),setTimeout(()=>{m.style.display="none",m.classList.remove("resetIconRotation")},500),p.style.marginLeft="",p.classList.remove("tagToLeftSide"),s.style.width="",w.notesConsoleShowing&&(g.style.display="none",r.style.display="block",w.notesConsoleShowing=!1),document.querySelectorAll(".selected-tag").forEach(e=>{Xe(e,N,p,m,u,T,y,h)}),N.clearIconClicked=!1,N.tagSelected=!1,a.style.justifyContent="center"}),s.addEventListener("click",function(){w.isClicked=!0,z.style.display="none",p.style.marginRight=0,p.classList.add("blink"),g.style.display="none",r.style.display="block",w.notesConsoleShowing=!1,s.style.zIndex=3}),document.addEventListener("keydown",function(e){var t=x.generalTarget;"Shift"!==e.key||N.shiftPressed?"Alt"!==e.key||N.altPressed||(e.preventDefault(),N.altPressed=!0,t.classList.contains("tag-text")&&!t.parentElement.classList.contains("selected-tag")&&!t.classList.contains("create-label")&&N.altPressed&&t!==n&&t!==v&&t!==f&&((x.lastSelectionElement=t).style.backgroundColor="rgba(0, 255, 0, 0.2)")):(N.shiftPressed=!0,t.classList.contains("tag-text")&&!t.classList.contains("create-label")&&!t.parentElement.classList.contains("selected-tag")&&N.shiftPressed&&t!==n&&t!==v&&t!==f&&(x.lastSelectionElement=t,N.altPressed?t.style.backgroundColor="rgba(0, 255, 0, 0.2)":(t.style.backgroundColor="rgba(255, 0, 0, 0.2)",t.classList.add("deleteJiggling"))))}),document.addEventListener("keyup",function(e){"Shift"===e.key&&N.shiftPressed?(N.shiftPressed=!1,null!==x.lastSelectionElement&&(x.lastSelectionElement.style.backgroundColor="",x.lastSelectionElement.classList.remove("deleteJiggling"))):"Alt"===e.key&&N.altPressed&&(N.altPressed=!1,null!==x.lastSelectionElement)&&(x.lastSelectionElement.style.backgroundColor="")}),document.addEventListener("mouseover",function(e){e=e.target;(x.generalTarget=e).classList.contains("tag-text")&&(N.shiftPressed||N.altPressed)&&e!==n&&e!==v&&e!==f||null===x.lastSelectionElement||(x.lastSelectionElement.style.backgroundColor="",x.lastSelectionElement.classList.remove("deleteJiggling"))}),u.addEventListener("mouseover",function(e){e=e.target;e.classList.contains("tag-text")&&N.shiftPressed&&!N.altPressed&&e!==n&&e!==v&&e!==f?(null!==x.lastSelectionElement&&(x.lastSelectionElement.style.backgroundColor="",x.lastSelectionElement.classList.remove("deleteJiggling")),(x.lastSelectionElement=e).style.backgroundColor="rgba(255, 0, 0, 0.2)",e.classList.add("deleteJiggling")):e.classList.contains("tag-text")&&N.altPressed&&e!==n&&e!==v&&e!==f?(null!==x.lastSelectionElement&&(x.lastSelectionElement.style.backgroundColor=""),(x.lastSelectionElement=e).style.backgroundColor="rgba(0, 255, 0, 0.2)"):null!==x.lastSelectionElement&&(x.lastSelectionElement.style.backgroundColor="",x.lastSelectionElement.classList.remove("deleteJiggling"))}),u.addEventListener("click",function(t){t=t.target;if("selection-tag"===t.className||("tag-text"===t.className||"tag-text deleteJiggling"===t.className)&&"Done"!==t.innerText)if(N.shiftPressed&&!N.altPressed)Pe(t,h,y,N);else if(N.altPressed||N.altPressed&&N.shiftPressed){var n=t;m.style.display="none",s.style.display="none",a.style.display="none",r.style.display="none",M.style.display="flex",d.style.display="block",N.updateLabelWindowOpen=!0;let e;"tag-text"!==n.className&&(n.className="tag-text deleteJiggling"),e=n.parentElement.id,c.value=document.getElementById(e).innerText.trim(),x.elementToUpdateId=e,c.focus()}else 5===T.tagsSelected?alert("You've reached your max limit of 5 labels"):(T.tagsSelected++,Ae(T,a),Be(t,a),Ne(N,p,s,m),We(h,y,N),(a.scrollWidth>a.clientWidth||x.currentLabelInputTagSize<20)&&(je(x,fe,ke,a),a.scrollWidth>a.clientWidth)&&(a.style.justifyContent="left"));else"selection-done-div"===t.id||"selection-done"===t.id?(g.style.display="block",r.style.display="none",0===T.tagsSelected&&(p.style.marginLeft="",p.classList.remove("tagToLeftSide"),s.style.width="",z.style.display="block",p.style.marginRight="10px",s.style.zIndex=5),p.classList.remove("blink"),N.transitionNotesAutoSwitchToggle&&(N.tagSelected&&"Start"===K.innerText||!N.tagSelected&&"Stop"===K.innerText)&&K.click(),N.noteTaskInputContainerShowing&&b.focus(),N.noteTaskInputContainerEditShowing&&document.getElementById("note-task-input-text-edit").focus(),w.notesConsoleShowing=!0,w.notesConsoleShowing=!0):"add-tag-icon"===t.id&&(m.style.display="none",s.style.display="none",a.style.display="none",r.style.display="none",i.style.display="flex",l.style.display="block",N.createLabelWindowOpen=!0,o.focus())}),a.addEventListener("mouseover",function(e){var t=e.target;"selected-tag"!==t.className&&"tag-text"!==t.className||w.notesConsoleShowing||(t.classList.add("deleteJiggling"),setTimeout(()=>{t.classList.remove("deleteJiggling")},250))}),a.addEventListener("click",function(e){e=e.target;"selected-tag"!==e.className&&"tag-text"!==e.className&&"tag-text deleteJiggling"!==e.className||w.notesConsoleShowing?s.click():("tag-text deleteJiggling"===e.className&&(e.className="tag-text"),Xe(e,N,p,m,u,T,y,h),document.querySelectorAll(".selection-tag .tag-text").forEach(e=>{e.style.fontSize="20px"}),a.scrollWidth<=a.clientWidth&&je(x,fe,ke,a),a.scrollWidth<=a.clientWidth&&(a.style.justifyContent="center"),N.tagSelected||(p.style.marginLeft="",p.classList.remove("tagToLeftSide"),s.style.width=""))}),H.addEventListener("click",function(e){o.value="",D(i,l,m,s,a,r,N),W(k,w),N.createLabelWindowOpen=!1}),R.addEventListener("click",function(e){c.value="",D(M,d,m,s,a,r,N),W(k,w),N.updateLabelWindowOpen=!1}),O.addEventListener("click",function(e){if(""!==o.value&&Qe(o.value)){if(100<=Object.keys(B).length)return alert("You've reached your limit of 100 labels. If you'd like to add more labels, you can delete other labels by holding shift and clicking on the label you'd like to delete."),void H.click();var t=we(o);if(42<o.value.trim().length)return void alert("Oops! Your label seems a bit too long. Could you please make it 42 characters or shorter? Thank you!");t&&(Ce(o,T,u,h),Se(x,_,V),j.loggedIn)&&(t=[B,T.lastLabelIdNum,x.lastSelectedEmojiId],Le(t)),N.createLabelWindowOpen=!1}Ie(N,y,h),W(k,w),o.value="",D(i,l,m,s,a,r,N)}),J.addEventListener("click",function(e){if(""!==c.value&&Qe(c.value)){var t;if(!1===Te(x,c))return;if(42<c.value.trim().length)return void alert("Oops! Your label seems a bit too long. Could you please make it 42 characters or shorter? Thank you!");document.getElementById(x.elementToUpdateId).firstElementChild.textContent=c.value.trim(),Se(x,_,V),N.updateLabelWindowOpen=!1,B[x.elementToUpdateId]=c.value,j.loggedIn&&(t=[B,T.lastLabelIdNum,x.lastSelectedEmojiId],Le(t))}Ie(N,y,h),W(k,w),c.value="",D(M,d,m,s,a,r,N)}),Y.addEventListener("click",function(){w.emojiContainerShowing?W(k,w):(k.style.display="block",setTimeout(()=>{k.classList.add("emojiPopup"),k.style.opacity="1"},1),w.emojiContainerShowing=!0)}),$.addEventListener("click",function(){w.emojiContainerShowing?W(k,w):(k.style.display="block",setTimeout(()=>{k.classList.add("emojiPopup"),k.style.opacity="1"},1),w.emojiContainerShowing=!0)}),l.addEventListener("click",function(){o.focus()}),d.addEventListener("click",function(){c.focus()}),k.addEventListener("click",function(){N.createLabelWindowOpen?o.focus():N.updateLabelWindowOpen&&c.focus()}),F.forEach(s=>{s.addEventListener("click",function(){var e=s.id,t=he[e];let n;N.createLabelWindowOpen?n=o:N.updateLabelWindowOpen&&(n=c),n&&Ge(n,t),x.lastSelectedEmojiId=e,k.style.display="none",w.emojiContainerShowing=!1})}),document.addEventListener("click",function(e){k.contains(e.target)||e.target===_||e.target===V||"block"!==k.style.display||(k.style.display="none",w.emojiContainerShowing=!1)}),window.addEventListener("resize",function(){Ke(this.window.innerWidth,k,w,C)}),G.addEventListener("click",async function(){G.checked?N.transitionNotesAutoSwitchToggle=!0:N.transitionNotesAutoSwitchToggle=!1,j.loggedIn&&await Ee({notes:{autoSwitchToggle:N.transitionNotesAutoSwitchToggle}})}),ue.addEventListener("click",async function(){ue.checked?N.propagateUnfinishedTasksToggle=!0:N.propagateUnfinishedTasksToggle=!1,j.loggedIn&&await Ee({notes:{propagateUnfinishedTasksToggle:N.propagateUnfinishedTasksToggle}})}),Q.forEach(t=>{t.addEventListener("mouseover",function(){var e=t.id,e=ve[e];document.getElementById(e).classList.add("fullOpacity")}),t.addEventListener("mouseout",function(){var e=t.id,e=ve[e];document.getElementById(e).classList.remove("fullOpacity")})}),X.addEventListener("click",function(){Z.click(),setTimeout(()=>{ee.click()},0)}),me.addEventListener("click",function(){let t=0;for(let e=A.length-1;0<=e;e--)(!N.propagateUnfinishedTasksToggle||A[e].classList.includes("completed-task")||A[e].classList.includes("note"))&&(Re(A[e].id),t++);var e=T.lastTaskInputIdNum;j.loggedIn&&P({notesArr:A,lastTaskInputIdNum:e}),0!==t?new Notification("The notes console has been reset."):new Notification("No changes were made to the notes console.")})});export{createCheckElements,appendEditRemoveContainer,getLastNumberFromId};