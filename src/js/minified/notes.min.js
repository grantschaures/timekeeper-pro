import{notesContainer as O,taskContainer as e,promptContainer as s,labelInputContainer as a,createLabelContainer as M,createLabelWindow as l,createLabelInput as i,createLabelDone as R,createLabelCancel as U,updateLabelContainer as J,updateLabelWindow as o,updateLabelInput as d,updateLabelCancel as z,updateLabelDone as q,labelSelectionWindow as c,labelSelectionRow as r,clearIcon as u,notesBtn as Y,notesConsole as m,taskPrompt as F,tagIcon as g,tagSelection as $,tagSelectionDivider as p,addDoneContainer as y,selectionDoneDiv as n,selectionDone as f,addTagIcon as h,emojiBtn as _,emojiBtn2 as V,emojiImg as G,emojiImg2 as K,emojiContainer as v,emojiSymbols as Q,transitionNotesAutoSwitchToggle as X,start_stop_btn as Z,tutorialImgContainers as ee,aboutIconNotes as te,settings_menu_container as ne,notesBtnContainer as se,notesSettingsHr1 as ae,notesSettingsHr2 as le,addingDeletingUpdatingLabelsInfoBlock as ie,addNoteTaskContainer as k,noteTaskInputContainer as b,noteTaskInputText as E,noteInputCancelBtn as oe,noteInputSaveBtn as de,taskCheckbox as L,dynamicList as ce,textarea as re,settingsContainer as ue,aboutContainer as me,blogContainer as ge,main_elements as pe,isMobile as t,propagateUnfinishedTasksToggle as ye,clearNotesConsoleBtn as he,body as fe,confirmLabelDeletionPopup as ve,popupOverlay as ke,confirmLabelDeletionNoBtn as be,confirmLabelDeletionYesBtn as Ee,labelToDeleteContainer as Le,confirmLabelDeletionText as Ie}from"../modules/dom-elements.js";import{flags as Se}from"../modules/index-objects.js";import{state as we,flags as I}from"../modules/navigation-objects.js";import{notesFlags as S,counters as w,state as C,flags as T,emojiMap as Ce,tutorialContainerMap as Te,fontSizeArr as xe,fontNumArr as Ne,labelDict as x,notesArr as N,selectedLabelDict as B,labelFlags as A,labelArrs as j}from"../modules/notes-objects.js";import{sessionState as D}from"../modules/state-objects.js";import{updateUserSettings as Be}from"../state/update-settings.js";import{updateLabels as P}from"../state/update-labels.js";import{updateDeletedLabels as Ae}from"../state/update-deleted-labels.js";import{updateNotes as W}from"../state/update-notes.js";function je(e){e.innerText="Are you sure you want to delete the following label and its associated data?"}function De(e,t,n){T.confirmLabelDeletionWindowShowing=!1,n.labelToDeleteId=null,e.style.display="none",t.style.display="none",fe.style.overflowY="scroll",Le.removeChild(Le.firstChild)}function Pe(e,t,n,s){T.confirmLabelDeletionWindowShowing=!0,s.labelToDeleteId=e,t.style.display="flex",n.style.display="block",fe.style.overflowY="hidden",We(e)}function We(e){var e="<h4 class='tag-text-delete-label-popup'>"+document.getElementById(e).firstChild.innerText+"</h4>",t=document.createElement("div");t.className="tag unselectable selection-tag",t.innerHTML=e,Le.appendChild(t)}function He(e,t,n){t[e]||(t[e]=[]),t[e].push(n)}function Oe(e,t,n){e.hasOwnProperty(t)&&(e[n]=e[t],delete e[t])}function Me(e){"selected-tag"!==e.className&&"tag-text"!==e.className&&"tag-text deleteJiggling"!==e.className||S.notesConsoleShowing?s.click():("tag-text deleteJiggling"===e.className&&(e.className="tag-text"),yt(e,T,g,u,r,w,p,y),document.querySelectorAll(".selection-tag .tag-text").forEach(e=>{e.style.fontSize="20px"}),a.scrollWidth<=a.clientWidth&&adjustLabelFontSize(C,xe,Ne,a),a.scrollWidth<=a.clientWidth&&(a.style.justifyContent="center"),T.tagSelected||(g.style.marginLeft="",g.classList.remove("tagToLeftSide"),s.style.width=""))}function Re(e){w.tagsSelected++,addLabelInputContainerTagDivider(w,a),Ve(e,a),addLabelInitialActions(T,g,s,u),removeTagSelectionDivider(y,p,T),(a.scrollWidth>a.clientWidth||C.currentLabelInputTagSize<20)&&(adjustLabelFontSize(C,xe,Ne,a),a.scrollWidth>a.clientWidth)&&(a.style.justifyContent="left")}function Ue(){var t=["‚úçÔ∏è Homework","üìö Reading","üßò Meditation"];for(let e=0;e<t.length;e++){var n=document.createElement("input");n.value=t[e],qe(n,w,r,y)}}function H(e,t){e.style.display="none",e.style.opacity="0",t.emojiContainerShowing=!1}function Je(e,t,n){!1===e.tagSelection&&(t.style.display="flex",n.style.marginLeft="",e.tagSelection=!0)}function ze(e,t,n){null!==e.lastSelectedEmojiId&&(e=document.getElementById(e.lastSelectedEmojiId).src,t.src=e,n.src=e)}function qe(e,t,n,s){var e=e.value,a="<h4 class='tag-text'>"+e+"</h4>",l=document.createElement("div");l.className="tag unselectable selection-tag",l.innerHTML=a,t.lastLabelIdNum+=1,l.id="tag-"+t.lastLabelIdNum,n.insertBefore(l,s),x[l.id]=e,A[e]=!1,j[e]=[]}function Ye(e){let t=!0;e=e.value.trim();return Object.values(x).includes(e)&&(alert("The label '"+e+"' already exists!"),t=!1),t}function Fe(e,t){let n=!0,s=document.getElementById(e.elementToUpdateId).innerText.trim();return document.querySelectorAll(".selection-tag").forEach(e=>{e=e.firstElementChild.textContent;e===t.value.trim()&&s!==t.value.trim()&&(alert("The label '"+e+"' already exists!"),n=!1)}),n}function $e(t,n,s,a,l,i,o){var d=a.value;if(""===d)rt(t,n,s,a);else if(100<=o.children.length)alert("You've reached your limit of 100 notes/ tasks!"),rt(t,n,s,a);else if(_e(d))alert("Please keep your notes/tasks less than 1000 characters. Thanks!");else{let e;t=document.createElement("div"),s=(t.classList.add("noteTask"),e=(l.checked?(n=createCheckElements(i),t.appendChild(n),t.classList.add("task")):t.classList.add("note"),Qe(d,t,i,e)),t.appendChild(e),o.appendChild(t),{id:t.id,classList:[...t.classList],content:d,date:Date.now()}),a=(N.push(s),i.lastTaskInputIdNum);D.loggedIn&&W({notesArr:N,lastTaskInputIdNum:a})}}function _e(e){return 1e3<e.length}function addLabelInitialActions(e,t,n,s){e.tagSelected||(e.tagSelected=!0,t.style.marginLeft="5px",t.classList.add("tagToLeftSide"),n.style.width="100%",s.style.display="flex")}function Ve(e,t){let n,s;s=("tag-text"===e.className?(n=e.parentElement.id,e.parentElement):(n=e.id,e)).innerHTML,document.getElementById(n).remove();var e=document.createElement("div"),t=(e.className="tag unselectable selected-tag",e.innerHTML=s,e.id=n,e.firstElementChild.style.backgroundColor="rgba(255, 255, 255, 0.2)",t.appendChild(e),B[n]=x[n],B[n]),e=(A[t]=!0,Date.now());Se.inHyperFocus&&He(t,j,e),D.loggedIn&&(t=[x,B,w.lastLabelIdNum,C.lastSelectedEmojiId],P(t))}function addLabelInputContainerTagDivider(e,t){1<e.tagsSelected&&((e=document.createElement("h4")).className="tag-divider unselectable",e.innerText="|",t.append(e))}function adjustLabelFontSize(t,n,s,e){var a=document.querySelectorAll(".selected-tag .tag-text");let l=0;for(;a.forEach(e=>{e.style.fontSize=n[l],t.currentLabelInputTagSize=s[l]}),l++,0<e.scrollWidth-e.clientWidth&&l<9;);}function Ge(e){let t;Pe(t=("tag-text deleteJiggling"===e.className?e.parentElement:e).id,ke,ve,C)}function Ke(e,t,n,s){document.getElementById(s.labelToDeleteId).remove(),removeTagSelectionDivider(e,t,n);e=x[s.labelToDeleteId],t={};t[s.labelToDeleteId]=e,delete x[s.labelToDeleteId],delete A[e],delete j[e],D.loggedIn&&(n=[x,B,w.lastLabelIdNum,s.lastSelectedEmojiId],P(n),Ae(t))}function removeTagSelectionDivider(e,t,n){e.previousElementSibling||(t.style.display="none",e.style.marginLeft="7px",n.tagSelection=!1)}function Qe(e,t,n,s){var a=document.createElement("span"),e=(a.textContent=e,"spanText"+n.lastTaskInputIdNum),e=(a.setAttribute("data-testid",e),t.appendChild(a),"taskDiv"+n.lastTaskInputIdNum);return t.id=e,t.setAttribute("data-testid",e),s=appendEditRemoveContainer("Task",n.lastTaskInputIdNum),n.lastTaskInputIdNum+=1,s}function createCheckElements(e){var t=document.createElement("div"),n=(t.classList.add("taskCircularCheck"),document.createElement("div")),s=(n.classList.add("circularCheck"),document.createElementNS("http://www.w3.org/2000/svg","svg")),a=(s.setAttribute("width","20"),s.setAttribute("height","20"),s.setAttribute("viewBox","0 0 20 20"),s.classList.add("svgCheck"),"svgCheck"+e.lastTaskInputIdNum),a=(s.id=a,s.setAttribute("data-testid",a),document.createElementNS("http://www.w3.org/2000/svg","path"));return a.classList.add("check"),a.setAttribute("class","check"),a.setAttribute("d","M4 10 L8 14 L16 6"),a.setAttribute("stroke","white"),a.setAttribute("stroke-width","2"),a.setAttribute("fill","none"),a.setAttribute("stroke-linecap","round"),a.setAttribute("stroke-linejoin","round"),a.id="check"+e.lastTaskInputIdNum,s.appendChild(a),n.appendChild(s),t.appendChild(n),t}function Xe(e,t){document.getElementById("note-task-input-container-edit").remove(),document.getElementById(e.currentNoteTaskEditId).style.display="flex",t.noteTaskInputContainerEditShowing=!1}function Ze(t,e){var n=document.getElementById("note-task-input-container-edit").querySelector("textarea").value,e=(document.getElementById(t.currentNoteTaskEditId).querySelector("span").textContent=n,document.getElementById(t.currentNoteTaskEditId).style.display="flex",document.getElementById("note-task-input-container-edit").remove(),e.noteTaskInputContainerEditShowing=!1,N.findIndex(e=>e.id===t.currentNoteTaskEditId)),e=(N[e].content=n,w.lastTaskInputIdNum);D.loggedIn&&W({notesArr:N,lastTaskInputIdNum:e})}function et(e){tt(e);e=w.lastTaskInputIdNum;D.loggedIn&&W({notesArr:N,lastTaskInputIdNum:e})}function tt(e){let t="taskDiv"+getLastNumberFromId(e);document.getElementById(t)&&document.getElementById(t).remove();e=N.findIndex(e=>e.id===t);-1!==e&&N.splice(e,1)}function nt(e,t,n,s,a){var l="taskDiv"+getLastNumberFromId(e);t.noteTaskInputContainerShowing&&(n.style.display="none",s.style.display="flex"),"Task"===at(e)&&ot("task",l,a,t)}function st(e){e=getLastNumberFromId(e);let t="taskDiv"+e;var n=document.getElementById(t),e=document.getElementById("check"+e),s=n.firstElementChild,s=(n.classList.contains("completed-task")?(s.style.backgroundColor="",e.setAttribute("stroke-width","2"),e.parentElement.parentElement.style.opacity="",n.classList.remove("completed-task")):n.classList.contains("completed-task")||(s.style.backgroundColor="#3ba43e",e.setAttribute("stroke-width","3"),e.parentElement.parentElement.style.opacity="1",n.classList.add("completed-task")),N.findIndex(e=>e.id===t)),e=(N[s].classList=[...n.classList],w.lastTaskInputIdNum);D.loggedIn&&W({notesArr:N,lastTaskInputIdNum:e})}function at(e){e=e.match(/(editBtn|editIcon)(Note|Task)\d+/);return e&&e[2]?e[2]:null}function lt(e){e.style.height="24px",e.style.height=e.scrollHeight+"px"}function it(e){var t=document.createElement("div"),n=(t.id="note-task-input-container-edit",document.createElement("div")),s=(n.id="upper-half-note-task-input-edit",document.createElement("textarea")),e=(s.id="note-task-input-text-edit",s.setAttribute("data-testid","note-task-input-text-edit"),s.placeholder="Description",s.value=e,n.appendChild(s),document.createElement("div")),s=(e.id="lower-half-note-task-input-edit",document.createElement("div")),a=(s.id="save-cancel-container-edit",document.createElement("div")),l=(a.id="note-input-save-container-edit",a.classList.add("save-cancel-task-container"),document.createElement("div")),l=(l.id="note-input-save-btn-edit",l.textContent="Save",a.appendChild(l),document.createElement("div")),i=(l.id="note-input-cancel-container-edit",l.classList.add("save-cancel-task-container"),document.createElement("div"));return i.id="note-input-cancel-btn-edit",i.textContent="Cancel",l.appendChild(i),s.appendChild(a),s.appendChild(l),e.appendChild(s),t.appendChild(n),t.appendChild(e),t}function ot(e,t,n,s){n.currentNoteTaskEditId=t;var n=document.getElementById(t),t=document.getElementById(t).querySelector("span").innerText,t=(n.style.display="none",it(t)),a=(t.style.display="flex",n.previousElementSibling);a?a.parentNode.insertBefore(t,a.nextSibling):n.parentNode.insertBefore(t,n),s.noteTaskInputContainerEditShowing=!0,document.getElementById("note-task-input-text-edit").addEventListener("input",function(e){lt(document.getElementById("note-task-input-text-edit"))}),lt(document.getElementById("note-task-input-text-edit")),t.querySelector("textarea").focus()}function appendEditRemoveContainer(e,t){var n=document.createElement("div"),s=(n.classList.add("editRemoveContainer"),"editRemoveContainer"+e+t),s=(n.id=s,document.createElement("div")),a=(s.classList.add("editRemoveBtn"),s.classList.add("editBtn"),s.classList.add("no-select"),"editBtn"+e+t),a=(s.setAttribute("id",a),s.setAttribute("data-testid",a),document.createElement("img")),a=(a.id="editIcon"+e+t,a.classList.add("editIcon"),a.src="images/icons/whitepencil.png",a.draggable=!1,s.appendChild(a),document.createElement("div")),l=(a.classList.add("editRemoveBtn"),a.classList.add("removeBtn"),a.classList.add("no-select"),"removeBtn"+e+t),l=(a.setAttribute("id",l),a.setAttribute("data-testid",l),document.createElementNS("http://www.w3.org/2000/svg","svg")),i=(l.classList.add("editRemoveSvg"),l.classList.add("removeSvg"),"trashSvg"+e+t),i=(l.setAttribute("id",i),l.setAttribute("xmlns","http://www.w3.org/2000/svg"),l.setAttribute("width","24"),l.setAttribute("height","24"),l.setAttribute("viewBox","0 0 24 24"),l.setAttribute("fill","none"),l.setAttribute("stroke","currentColor"),l.setAttribute("stroke-width","2"),l.setAttribute("stroke-linecap","round"),l.setAttribute("stroke-linejoin","round"),"polyline"+e+t);return l.innerHTML=`<polyline id="${i}" class="removePath" points="3 6 5 6 21 6"></polyline>
                        <path id="${"path"+e+t}" class="removePath" d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                        <line id="${"line1"+e+t}" class="removePath" x1="10" y1="11" x2="10" y2="17"></line>
                        <line id="${"line2"+e+t}" class="removePath" x1="14" y1="11" x2="14" y2="17"></line>`,a.appendChild(l),n.appendChild(s),n.appendChild(a),n}function getLastNumberFromId(e){e=e.match(/\d+$/);return e?parseInt(e[0],10):null}function dt(e,t,n){e.classList.remove("fullsize"),e.classList.remove("fullopacity"),n||window.scrollTo({top:0,behavior:"smooth"}),t.notesShowing=!1}function ct(e,t){e.classList.add("fullsize"),e.classList.add("fullopacity"),window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"}),t.notesShowing=!0}function rt(e,t,n,s){e.style.display="none",t.style.display="flex",n.noteTaskInputContainerShowing=!1,s.value=""}function ut(e,t){document.activeElement!==e&&e.focus();var n=e.selectionStart,s=e.selectionEnd,a=e.value.substring(0,n),s=e.value.substring(s,e.value.length),a=(e.value=a+t+s,n+t.length);e.setSelectionRange(a,a)}function mt(e,t,n,s){let a;a=s?600:616,e<450&&(t.style.display="none",n.emojiContainerShowing=!1),e<a?(s=45+(a-1-e)/4.3+"%",t.style.setProperty("--after-left",s)):t.style.setProperty("--after-left","45%")}function gt(e){return/[^\s]/.test(e)}function pt(e,t,n,s,a,l,i){e.style.display="none",t.style.display="none",i.tagSelected?n.style.display="flex":n.style.display="none",s.style.display="flex",a.style.display="flex",l.style.display="block"}function yt(e,t,n,s,a,l,i,o){let d,c;c=("tag-text"===e.className?(d=e.parentElement.id,e.parentElement):(d=e.id,e)).innerHTML;var e=document.getElementById(d).previousElementSibling,r=document.getElementById(d).nextElementSibling,e=(e&&"h4"===e.tagName.toLowerCase()?e.remove():r&&"h4"===r.tagName.toLowerCase()?r.remove():(t.tagSelected=!1,n.classList.add("blink"),n.style.display="block",t.clearIconClicked||(s.style.display="none")),document.getElementById(d).remove(),document.createElement("div")),r=(e.className="tag unselectable selection-tag",e.innerHTML=c,e.id=d,e.firstElementChild.style.backgroundColor="",a.insertBefore(e,a.firstChild),l.tagsSelected--,Je(t,i,o),B[d]),n=(delete B[d],Date.now());Se.inHyperFocus&&He(r,j,n),A[r]=!1,D.loggedIn&&(s=[x,B,l.lastLabelIdNum,C.lastSelectedEmojiId],P(s))}function ht(e,t,n,s,a,l,i,o,d,c,r,u,m,g,p,y,h){"home"===we.lastSelectedMode&&("Enter"===e.key?(e.preventDefault(),document.activeElement===s?a.click():document.activeElement===l?i.click():document.activeElement===d?o.click():"note-task-input-text-edit"===document.activeElement.id&&document.getElementById("note-input-save-btn-edit").click()):"n"===e.key&&vt(y,p,g,h)?t.notesShowing?u.noteTaskInputContainerShowing||u.noteTaskInputContainerEditShowing||!t.notesConsoleShowing||I.sessionSummaryPopupShowing||(r.click(),L.checked=!1,e.preventDefault()):ct(n,t):"t"!==e.key||!t.notesShowing||!t.notesConsoleShowing||u.noteTaskInputContainerShowing||u.noteTaskInputContainerEditShowing||I.sessionSummaryPopupShowing?"l"!==e.key||!t.notesShowing||!t.notesConsoleShowing||u.noteTaskInputContainerShowing||u.noteTaskInputContainerEditShowing||I.sessionSummaryPopupShowing?"Escape"===e.key&&t.notesShowing&&!I.sessionSummaryPopupShowing&&(u.noteTaskInputContainerShowing?c.click():u.noteTaskInputContainerEditShowing?document.getElementById("note-input-cancel-btn-edit").click():u.createLabelWindowOpen?U.click():u.updateLabelWindowOpen?z.click():u.confirmLabelDeletionWindowShowing?be.click():t.notesConsoleShowing?dt(n,t,m):f.click()):(F.click(),e.preventDefault()):(r.click(),L.checked=!0,e.preventDefault()))}function ft(t){return new Promise(e=>setTimeout(e,t))}function vt(e,t,n,s){return""===e.style.display&&""===t.style.display&&""===n.style.display||("none"===n.style.display||""===n.style.display)&&"none"!==s.style.display&&!I.sessionSummaryPopupShowing}document.addEventListener("stateUpdated",function(){function e(){re.style.height="24px",re.style.height=re.scrollHeight+"px"}mt(window.innerWidth,v,S,t),D.loggedIn?je(Ie):Ue(),t&&(te.style.display="none",ae.style.display="none",le.style.display="none",ie.style.display="none"),ce.addEventListener("click",function(e){var e=e.target,t=e.id;"check"===e.className.baseVal||"svgCheck"===e.className.baseVal?st(t):e.classList.contains("editRemoveBtn")||e.classList.contains("editRemoveSvg")||e.classList.contains("editIcon")||e.classList.contains("removePath")?e.classList.contains("editBtn")||e.classList.contains("editIcon")?nt(t,T,b,k,C):(e.classList.contains("removeBtn")||e.classList.contains("removeSvg")||e.classList.contains("removePath"))&&et(t):"note-input-save-btn-edit"!==t&&"note-input-cancel-btn-edit"!==t||("note-input-save-btn-edit"===t?Ze(C,T):"note-input-cancel-btn-edit"===t&&Xe(C,T))}),L.addEventListener("click",function(){E.focus()}),de.addEventListener("click",function(){$e(b,k,T,E,L,w,ce),setTimeout(()=>{m.scrollTo({top:m.scrollHeight,behavior:"smooth"})},0),E.value="",E.focus(),e()}),oe.addEventListener("click",function(){rt(b,k,T,E),e()}),k.addEventListener("click",function(){k.style.display="none",b.style.display="flex",T.noteTaskInputContainerEditShowing&&(document.getElementById("note-task-input-container-edit").remove(),T.noteTaskInputContainerEditShowing=!1,document.getElementById(C.currentNoteTaskEditId).style.display="flex"),E.focus(),T.noteTaskInputContainerShowing=!0,setTimeout(()=>{m.scrollTo({top:m.scrollHeight,behavior:"smooth"})},0)}),re.addEventListener("input",e),Y.addEventListener("click",function(){!1===S.notesShowing?ct(O,S):dt(O,S,t)}),document.addEventListener("keydown",e=>ht(e,S,O,i,R,d,q,de,E,oe,k,T,t,ue,me,ge,pe)),u.addEventListener("click",async function(){document.querySelectorAll(".selected-tag .tag-text").forEach(e=>{e.style.fontSize="20px"}),T.clearIconClicked=!0,u.classList.add("resetIconRotation"),setTimeout(()=>{u.style.display="none",u.classList.remove("resetIconRotation")},500),g.style.marginLeft="",g.classList.remove("tagToLeftSide"),s.style.width="",S.notesConsoleShowing&&(m.style.display="none",c.style.display="block",S.notesConsoleShowing=!1),document.querySelectorAll(".selected-tag").forEach(e=>{yt(e,T,g,u,r,w,p,y)}),T.clearIconClicked=!1,T.tagSelected=!1,a.style.justifyContent="center"}),s.addEventListener("click",function(){S.isClicked=!0,F.style.display="none",g.style.marginRight=0,g.classList.add("blink"),m.style.display="none",c.style.display="block",S.notesConsoleShowing=!1,s.style.zIndex=3}),document.addEventListener("keydown",function(e){var t=C.generalTarget;"Shift"!==e.key||T.shiftPressed?"Alt"!==e.key||T.altPressed||(e.preventDefault(),T.altPressed=!0,t.classList.contains("tag-text")&&!t.parentElement.classList.contains("selected-tag")&&!t.classList.contains("create-label")&&T.altPressed&&t!==n&&t!==f&&t!==h&&((C.lastSelectionElement=t).style.backgroundColor="rgba(0, 255, 0, 0.2)")):(T.shiftPressed=!0,t.classList.contains("tag-text")&&!t.classList.contains("create-label")&&!t.parentElement.classList.contains("selected-tag")&&T.shiftPressed&&t!==n&&t!==f&&t!==h&&(C.lastSelectionElement=t,T.altPressed?t.style.backgroundColor="rgba(0, 255, 0, 0.2)":(t.style.backgroundColor="rgba(255, 0, 0, 0.2)",t.classList.add("deleteJiggling"))))}),document.addEventListener("keyup",function(e){"Shift"===e.key&&T.shiftPressed?(T.shiftPressed=!1,null!==C.lastSelectionElement&&null===C.labelToDeleteId&&(C.lastSelectionElement.style.backgroundColor="",C.lastSelectionElement.classList.remove("deleteJiggling"))):"Alt"===e.key&&T.altPressed&&(T.altPressed=!1,null!==C.lastSelectionElement)&&(C.lastSelectionElement.style.backgroundColor="")}),document.addEventListener("mouseover",function(e){e=e.target;(C.generalTarget=e).classList.contains("tag-text")&&(T.shiftPressed||T.altPressed)&&e!==n&&e!==f&&e!==h||null===C.lastSelectionElement||null!==C.labelToDeleteId||(C.lastSelectionElement.style.backgroundColor="",C.lastSelectionElement.classList.remove("deleteJiggling"))}),r.addEventListener("mouseover",function(e){e=e.target;e.classList.contains("tag-text")&&T.shiftPressed&&!T.altPressed&&e!==n&&e!==f&&e!==h?(null!==C.lastSelectionElement&&(C.lastSelectionElement.style.backgroundColor="",C.lastSelectionElement.classList.remove("deleteJiggling")),(C.lastSelectionElement=e).style.backgroundColor="rgba(255, 0, 0, 0.2)",e.classList.add("deleteJiggling")):e.classList.contains("tag-text")&&T.altPressed&&e!==n&&e!==f&&e!==h?(null!==C.lastSelectionElement&&(C.lastSelectionElement.style.backgroundColor=""),(C.lastSelectionElement=e).style.backgroundColor="rgba(0, 255, 0, 0.2)"):null!==C.lastSelectionElement&&(C.lastSelectionElement.style.backgroundColor="",C.lastSelectionElement.classList.remove("deleteJiggling"))}),r.addEventListener("click",function(t){t=t.target;if("selection-tag"===t.className||("tag-text"===t.className||"tag-text deleteJiggling"===t.className)&&"Done"!==t.innerText)if(T.shiftPressed&&!T.altPressed)Ge(t,y,p,T);else if(T.altPressed||T.altPressed&&T.shiftPressed){var n=t;u.style.display="none",s.style.display="none",a.style.display="none",c.style.display="none",J.style.display="flex",o.style.display="block",T.updateLabelWindowOpen=!0;let e;"tag-text"!==n.className&&(n.className="tag-text deleteJiggling"),e=n.parentElement.id,d.value=document.getElementById(e).innerText.trim(),C.elementToUpdateId=e,d.focus()}else 5===w.tagsSelected?alert("You've reached your max limit of 5 labels"):Re(t);else"selection-done-div"===t.id||"selection-done"===t.id?(m.style.display="block",c.style.display="none",0===w.tagsSelected&&(g.style.marginLeft="",g.classList.remove("tagToLeftSide"),s.style.width="",F.style.display="block",g.style.marginRight="10px",s.style.zIndex=5),g.classList.remove("blink"),T.transitionNotesAutoSwitchToggle&&(T.tagSelected&&!Se.inHyperFocus||!T.tagSelected&&Se.inHyperFocus)&&Z.click(),T.noteTaskInputContainerShowing&&E.focus(),T.noteTaskInputContainerEditShowing&&document.getElementById("note-task-input-text-edit").focus(),S.notesConsoleShowing=!0,S.notesConsoleShowing=!0):"add-tag-icon"===t.id&&(u.style.display="none",s.style.display="none",a.style.display="none",c.style.display="none",M.style.display="flex",l.style.display="block",T.createLabelWindowOpen=!0,i.focus())}),a.addEventListener("mouseover",function(e){var t=e.target;"selected-tag"!==t.className&&"tag-text"!==t.className||S.notesConsoleShowing||(t.classList.add("deleteJiggling"),setTimeout(()=>{t.classList.remove("deleteJiggling")},250))}),a.addEventListener("click",function(e){Me(e.target)}),U.addEventListener("click",function(e){i.value="",pt(M,l,u,s,a,c,T),H(v,S),T.createLabelWindowOpen=!1}),z.addEventListener("click",function(e){d.value="",pt(J,o,u,s,a,c,T),H(v,S),T.updateLabelWindowOpen=!1}),R.addEventListener("click",function(e){if(""!==i.value&&gt(i.value)){if(100<=Object.keys(x).length)return alert("You've reached your limit of 100 labels. If you'd like to add more labels, you can delete other labels by holding shift and clicking on the label you'd like to delete."),void U.click();var t=Ye(i);if(42<i.value.trim().length)return void alert("Oops! Your label seems a bit too long. Could you please make it 42 characters or shorter? Thank you!");t&&(qe(i,w,r,y),ze(C,G,K),D.loggedIn)&&(t=[x,B,w.lastLabelIdNum,C.lastSelectedEmojiId],P(t)),T.createLabelWindowOpen=!1}Je(T,p,y),H(v,S),i.value="",pt(M,l,u,s,a,c,T)}),q.addEventListener("click",function(e){if(""!==d.value&&gt(d.value)){if(!1===Fe(C,d))return;if(42<d.value.trim().length)return void alert("Oops! Your label seems a bit too long. Could you please make it 42 characters or shorter? Thank you!");document.getElementById(C.elementToUpdateId).firstElementChild.textContent=d.value.trim(),ze(C,G,K),T.updateLabelWindowOpen=!1;var t=x[C.elementToUpdateId],n=d.value;Oe(A,t,n),Oe(j,t,n),x[C.elementToUpdateId]=n,D.loggedIn&&(t=[x,B,w.lastLabelIdNum,C.lastSelectedEmojiId],P(t))}Je(T,p,y),H(v,S),d.value="",pt(J,o,u,s,a,c,T)}),_.addEventListener("click",function(){S.emojiContainerShowing?H(v,S):(v.style.display="block",setTimeout(()=>{v.classList.add("emojiPopup"),v.style.opacity="1"},1),S.emojiContainerShowing=!0)}),V.addEventListener("click",function(){S.emojiContainerShowing?H(v,S):(v.style.display="block",setTimeout(()=>{v.classList.add("emojiPopup"),v.style.opacity="1"},1),S.emojiContainerShowing=!0)}),l.addEventListener("click",function(){i.focus()}),o.addEventListener("click",function(){d.focus()}),v.addEventListener("click",function(){T.createLabelWindowOpen?i.focus():T.updateLabelWindowOpen&&d.focus()}),Q.forEach(s=>{s.addEventListener("click",function(){var e=s.id,t=Ce[e];let n;T.createLabelWindowOpen?n=i:T.updateLabelWindowOpen&&(n=d),n&&ut(n,t),C.lastSelectedEmojiId=e,v.style.display="none",S.emojiContainerShowing=!1})}),document.addEventListener("click",function(e){v.contains(e.target)||e.target===G||e.target===K||"block"!==v.style.display||(v.style.display="none",S.emojiContainerShowing=!1)}),window.addEventListener("resize",function(){mt(this.window.innerWidth,v,S,t)}),X.addEventListener("click",async function(){X.checked?T.transitionNotesAutoSwitchToggle=!0:T.transitionNotesAutoSwitchToggle=!1,D.loggedIn&&await Be({notes:{autoSwitchToggle:T.transitionNotesAutoSwitchToggle}})}),ye.addEventListener("click",async function(){ye.checked?T.propagateUnfinishedTasksToggle=!0:T.propagateUnfinishedTasksToggle=!1,D.loggedIn&&await Be({notes:{propagateUnfinishedTasksToggle:T.propagateUnfinishedTasksToggle}})}),ee.forEach(t=>{t.addEventListener("mouseover",function(){var e=t.id,e=Te[e];document.getElementById(e).classList.add("fullOpacity")}),t.addEventListener("mouseout",function(){var e=t.id,e=Te[e];document.getElementById(e).classList.remove("fullOpacity")})}),te.addEventListener("click",function(){ne.click(),setTimeout(()=>{se.click()},0)}),he.addEventListener("click",function(){let t=0;for(let e=N.length-1;0<=e;e--)(!T.propagateUnfinishedTasksToggle||N[e].classList.includes("completed-task")||N[e].classList.includes("note"))&&(tt(N[e].id),t++);var e=w.lastTaskInputIdNum;D.loggedIn&&W({notesArr:N,lastTaskInputIdNum:e}),0!==t?new Notification("The notes console has been reset."):new Notification("No changes were made to the notes console.")}),be.addEventListener("click",function(){De(ke,ve,C)}),Ee.addEventListener("click",function(){Ke(y,p,T,C),De(ke,ve,C)})});export{addLabelInitialActions,addLabelInputContainerTagDivider,adjustLabelFontSize,removeTagSelectionDivider,createCheckElements,appendEditRemoveContainer,getLastNumberFromId};